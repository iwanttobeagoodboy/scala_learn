## 简单使用

[github源码](https://github.com/sbt/sbt)

[官方文档](https://www.scala-sbt.org/1.x/docs/zh-cn/Directories.html)

### 目录结构

* 基础目录

  > 包含项目的目录

* 源代码

  > `.scala` 文件是源码文件。 可以直接放在目录下，但是不建议大多都是在 ` src` 目录下

* 构建定义文件

  > `.sbt` 文件是构建文件。 基础目录下 `build.sbt`，其他 sbt 文件在 `project` 子目录中。project 中也会包含`.scala`文件，这些文件最终和 `.sbt` 文件共同构建完整的构建定定义。

* 构建产品

  > 构建出来的文件（编译的 classes, 打包的 jars，托管文件，caches 和文档）默认在 `target` 目录下

* 版本管理文件

  > `.gitignore` 文件应该包含 `target/`
  >
  > 注意：这里后面需要跟一个 `/` （只匹配目录）且前面不能有 `/` （除了匹配普通的 `target/` 还匹配 `project/target/`

### 运行

* 批处理模式

  > `sbt clean compile "testOnly TestA TestB`
  >
  > 你也可以用批处理模式来运行 sbt，可以以空格为分隔符指定参数。对于接受参数的 sbt 命令，将命令和参数用引号引起来一起传给 sbt

* 交互模式

  * `sbt`  不带任何参数进入交互模式，命令行的交互，含 tab 补全和历史记录

  * 交互模式下`help`查看帮助，`help <command>` 

  * 常用命令

    |    命令    |                             作用                             |
    | :--------: | :----------------------------------------------------------: |
    |   clean    |          删除所有生成的文件 （在 `target` 目录下）           |
    |  compile   | 编译源文件（在 `src/main/scala` 和   `src/main/java` 目录下） |
    |    test    |                      编译和运行所有测试                      |
    |  console   | 进入到一个包含所有编译文件和所有依赖的 classpath 的 Scala 解释器 <br />推出：quti(q)，Ctrl + D(unix), Ctrl + Z(windows) |
    | run<参数>  |      在和 sbt 所处的同一个虚拟机上执行项目的 main class      |
    |  paceage   | 将 `src/main/resources` 下的文件和 `src/main/scala` 以及 `src/main/java` 中编译出来的 class 文件打包成一个 jar 文件 |
    | help<命令> | 显示指定的命令的详细帮助信息。如果没有指定命令，会显示所有命令的简介 |
    |   reload   | 重新加载构建定义（`build.sbt`， `project/*.scala`， `project/*.sbt` 这些文件中定义的内容)。在修改了构建定义文件之后需要重新加载 |

  

  * 命令的历史记录

    |    命令    |                    作用                     |
    | :--------: | :-----------------------------------------: |
    |     ！     |          显示历史记录命令帮助（）           |
    |    ！！    |             重新执行前一条命令              |
    |    ！：    |             显示所有之前的命令              |
    |   ！：n    |          显示之前的最后 `n` 条命令          |
    |    ！n     | 执行 `!:` 命令显示的结果中下标为 `n` 的命令 |
    |   ！- n    |        执行从该命令往前数第 n 条命令        |
    |  ！string  |    执行最近执行过的以 string 打头的命令     |
    | ！？string |     执行最近执行过的包含 string 的命令      |



* 持续构建和测试

  为了加快编辑-编译-测试循环，你可以让 sbt 在你保存源文件时自动重新编译或者跑测试。 在命令前面加上前缀 `~` 后，每当有一个或多个源文件发生变化时就会自动运行该命令。例如，在交互模式下尝试：

  `> ~ compile`

  按回车键停止监视变化。 你可以在交互模式或者批处理模式下使用 `~` 前缀

### .sbt 构建定义

#### 构建定义的两种风格

* 多工程 .sbt 构建定义

* bare .sbt 构建定义

  > 注：构建文件可以包含 `.scala`结尾的文件，位于 `project/` 文件夹下，来定义常用的函数和值

#### 什么是构建定义

​	sbt 在检查项目和处理构建定义文件之后，形成一个 `Project`  定义

​	在 `build.sbt` 中可以创建本目录的 `Project` 工程定义 如： 

​			`lazy val root = (project in file("."))`

> 每个工程都对应一个个不可变的映射表（键值对集合）了描述工程
>
> 工程的名字呀，使用的工具版本，使用的库 ...



#### 在 build.sbt 中定义构建

* 

