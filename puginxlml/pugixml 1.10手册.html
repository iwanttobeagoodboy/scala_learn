<!DOCTYPE html>
<!-- saved from url=(0036)https://pugixml.org/docs/manual.html -->
<html lang="zh-CN" class="translated-ltr" style="height: 100%;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<meta name="author" content="website, repository">
<title>pugixml 1.10手册</title>
<link rel="stylesheet" href="./pugixml 1.10手册_files/css">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Uncomment @import statement below to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock pre.nowrap,.literalblock pre.nowrap pre,.listingblock pre.nowrap,.listingblock pre.nowrap pre{white-space:pre;word-wrap:normal}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #dddddf}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd){background:#f8f8f7}
table.stripes-none tr,table.stripes-odd tr:nth-of-type(even){background:none}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
.listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #f8f8f8; }
.listingblock .pygments .tok-c { color: #408080; font-style: italic } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
.listingblock .pygments .tok-o { color: #666666 } /* Operator */
.listingblock .pygments .tok-ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.listingblock .pygments .tok-cm { color: #408080; font-style: italic } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #BC7A00 } /* Comment.Preproc */
.listingblock .pygments .tok-cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.listingblock .pygments .tok-c1 { color: #408080; font-style: italic } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #408080; font-style: italic } /* Comment.Special */
.listingblock .pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gr { color: #FF0000 } /* Generic.Error */
.listingblock .pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gi { color: #00A000 } /* Generic.Inserted */
.listingblock .pygments .tok-go { color: #888888 } /* Generic.Output */
.listingblock .pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
.listingblock .pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #B00040 } /* Keyword.Type */
.listingblock .pygments .tok-m { color: #666666 } /* Literal.Number */
.listingblock .pygments .tok-s { color: #BA2121 } /* Literal.String */
.listingblock .pygments .tok-na { color: #7D9029 } /* Name.Attribute */
.listingblock .pygments .tok-nb { color: #008000 } /* Name.Builtin */
.listingblock .pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
.listingblock .pygments .tok-no { color: #880000 } /* Name.Constant */
.listingblock .pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
.listingblock .pygments .tok-ni { color: #999999; font-weight: bold } /* Name.Entity */
.listingblock .pygments .tok-ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.listingblock .pygments .tok-nf { color: #0000FF } /* Name.Function */
.listingblock .pygments .tok-nl { color: #A0A000 } /* Name.Label */
.listingblock .pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.listingblock .pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
.listingblock .pygments .tok-nv { color: #19177C } /* Name.Variable */
.listingblock .pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.listingblock .pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
.listingblock .pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
.listingblock .pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
.listingblock .pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
.listingblock .pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
.listingblock .pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
.listingblock .pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
.listingblock .pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
.listingblock .pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
.listingblock .pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #008000 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #BB6688 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
.listingblock .pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
.listingblock .pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
.listingblock .pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
.listingblock .pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
.listingblock .pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
.listingblock .pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
.listingblock .pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
<script>(function(){(function injection() {
  var pageLang = 'en';
  var userLang = 'zh-CN';

  var uid = '1E07F158C6FA4460B352973E9693B329';
  var teId = 'TE_' + uid;
  var cbId = 'TECB_' + uid;

  function show() {
    window.setTimeout(function() {
      window[teId].showBanner(true);
    }, 10);
  }

  function newElem() {
    var elem = new google.translate.TranslateElement({
      autoDisplay: false,
      floatPosition: 0,
      multilanguagePage: true,
      pageLanguage: pageLang
    });
    return elem;
  }

  if (window[teId]) {
    show();
  } else {
    if (!window.google || !google.translate ||
        !google.translate.TranslateElement) {
      if (!window[cbId]) {
        window[cbId] = function() {
          window[teId] = newElem();
          show();
        };
      }
      var s = document.createElement('script');
      s.src = 'https://translate.google.com/translate_a/element.js?cb=' +
              encodeURIComponent(cbId) + '&client=tee&hl=' + userLang;
      document.getElementsByTagName('head')[0].appendChild(s);
    }
  }
})();})();</script><script src="./pugixml 1.10手册_files/f.txt"></script><link type="text/css" rel="stylesheet" charset="UTF-8" href="./pugixml 1.10手册_files/translateelement.css"><script type="text/javascript" charset="UTF-8" src="./pugixml 1.10手册_files/main_zh-CN.js.下载"></script><script type="text/javascript" charset="UTF-8" src="./pugixml 1.10手册_files/element_main.js.下载"></script></head>
<body class="article toc2 toc-right" style="position: relative; min-height: 100%; top: 40px;"><div class="skiptranslate" style=""><iframe id=":0.container" class="goog-te-banner-frame skiptranslate" frameborder="0" src="javascript:&#39;&#39;" style="visibility:visible" src="./pugixml 1.10手册_files/saved_resource.html"></iframe></div>
<div id="header">
<h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml 1.10手册</font></font></h1>
<div class="details">
<span id="author" class="author"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网站</font></font></span><br>
<span id="email" class="email"><a href="https://pugixml.org/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://pugixml.org</font></font></a></span><br>
<span id="author2" class="author"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">存储库</font></font></span><br>
<span id="email2" class="email"><a href="https://github.com/zeux/pugixml" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/zeux/pugixml</font></font></a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录</font></font></div>
<ul class="sectlevel1">
<li><a href="https://pugixml.org/docs/manual.html#overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.概述</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#overview.introduction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1。</font><font style="vertical-align: inherit;">介绍</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#overview.feedback"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2。</font><font style="vertical-align: inherit;">反馈</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#overview.thanks"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3。</font><font style="vertical-align: inherit;">致谢</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#overview.license"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.4。</font><font style="vertical-align: inherit;">执照</font></font></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#install"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.安装</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#install.getting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1。</font><font style="vertical-align: inherit;">获取pugixml</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#install.building"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2。</font><font style="vertical-align: inherit;">构建pugixml</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#install.portability"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3。</font><font style="vertical-align: inherit;">可移植性</font></font></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#dom"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.文档对象模型</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#dom.tree"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1。</font><font style="vertical-align: inherit;">树状结构</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#dom.cpp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2。</font><font style="vertical-align: inherit;">C ++接口</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#dom.unicode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3。</font><font style="vertical-align: inherit;">Unicode界面</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#dom.thread"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4。</font><font style="vertical-align: inherit;">线程安全保证</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#dom.exception"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.5。</font><font style="vertical-align: inherit;">例外保证</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#dom.memory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6。</font><font style="vertical-align: inherit;">内存管理</font></font></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#loading"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.载入文件</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#loading.file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1。</font><font style="vertical-align: inherit;">从文件加载文档</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#loading.memory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2。</font><font style="vertical-align: inherit;">从内存加载文档</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#loading.stream"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.3。</font><font style="vertical-align: inherit;">从C ++ IOstreams加载文档</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#loading.errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4。</font><font style="vertical-align: inherit;">处理解析错误</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#loading.options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5。</font><font style="vertical-align: inherit;">解析选项</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#loading.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.6。</font><font style="vertical-align: inherit;">编码方式</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#loading.w3c"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.7。</font><font style="vertical-align: inherit;">符合W3C规范</font></font></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#access"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.访问文档数据</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#access.basic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本遍历功能</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.nodedata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1。</font><font style="vertical-align: inherit;">获取节点数据</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.attrdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2。</font><font style="vertical-align: inherit;">获取属性数据</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.contents"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3。</font><font style="vertical-align: inherit;">基于内容的遍历功能</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.rangefor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4。</font><font style="vertical-align: inherit;">基于范围的for循环支持</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.iterators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5。</font><font style="vertical-align: inherit;">通过迭代器遍历节点/属性列表</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.walker"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.6。</font><font style="vertical-align: inherit;">使用xml_tree_walker进行递归遍历</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.predicate"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7。</font><font style="vertical-align: inherit;">搜索带有谓词的节点/属性</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.8。</font><font style="vertical-align: inherit;">处理文本内容</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#access.misc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.9。</font><font style="vertical-align: inherit;">杂项功能</font></font></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#modify"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.修改文档数据</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#modify.nodedata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置节点数据</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#modify.attrdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1。</font><font style="vertical-align: inherit;">设置属性数据</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#modify.add"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.2。</font><font style="vertical-align: inherit;">添加节点/属性</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#modify.remove"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3。</font><font style="vertical-align: inherit;">删除节点/属性</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#modify.text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4。</font><font style="vertical-align: inherit;">处理文本内容</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#modify.clone"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5。</font><font style="vertical-align: inherit;">克隆节点/属性</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#modify.move"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.6。</font><font style="vertical-align: inherit;">移动节点</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#modify.fragments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7。</font><font style="vertical-align: inherit;">从片段组装文档</font></font></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#saving"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.保存文件</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#saving.file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.1。</font><font style="vertical-align: inherit;">将文件保存到文件</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#saving.stream"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.2。</font><font style="vertical-align: inherit;">将文档保存到C ++ IOstreams</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#saving.writer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.3。</font><font style="vertical-align: inherit;">通过编写者界面保存文档</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#saving.subtree"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.4。</font><font style="vertical-align: inherit;">保存单个子树</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#saving.options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5。</font><font style="vertical-align: inherit;">输出选项</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#saving.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6。</font><font style="vertical-align: inherit;">编码方式</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#saving.declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.7。</font><font style="vertical-align: inherit;">自定义文件声明</font></font></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#xpath"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. XPath</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#xpath.types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1。</font><font style="vertical-align: inherit;">XPath类型</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#xpath.select"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2。</font><font style="vertical-align: inherit;">通过XPath表达式选择节点</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#xpath.query"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.3。</font><font style="vertical-align: inherit;">使用查询对象</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#xpath.variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4。</font><font style="vertical-align: inherit;">使用变量</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#xpath.errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5。</font><font style="vertical-align: inherit;">错误处理</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#xpath.w3c"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.6。</font><font style="vertical-align: inherit;">符合W3C规范</font></font></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#changes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.变更日志</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#v1.10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.10 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019-09-15</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v1.9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1.9 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018年4月4日</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v1.8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.8 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016-11-24</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v1.7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.7 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015-10-19</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v1.6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.6 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015-04-10</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v1.5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.5 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014-11-27</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v1.4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.4 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014-02-27</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v1.2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2012-05-01</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v1.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.0 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2010-11-01</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.9 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2010-07-01</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.5 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009-11-08</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.42"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.42 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009-09-17</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.41"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.41 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009-02-08</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.4 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009-01-18</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.34 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2007-10-31</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.3 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2007-02-21</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2006-11-06</font></font></sup></a></li>
<li><a href="https://pugixml.org/docs/manual.html#v0.1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.1 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2006-07-15</font></font></sup></a></li>
</ul>
</li>
<li><a href="https://pugixml.org/docs/manual.html#apiref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10. API参考</font></font></a>
<ul class="sectlevel2">
<li><a href="https://pugixml.org/docs/manual.html#apiref.macros"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.1。</font><font style="vertical-align: inherit;">巨集</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#apiref.types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.2。</font><font style="vertical-align: inherit;">种类</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#apiref.enums"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.3。</font><font style="vertical-align: inherit;">枚举</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#apiref.constants"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.4。</font><font style="vertical-align: inherit;">常数</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#apiref.classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5。</font><font style="vertical-align: inherit;">班级</font></font></a></li>
<li><a href="https://pugixml.org/docs/manual.html#apiref.functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.6。</font><font style="vertical-align: inherit;">功能</font></font></a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="overview"><a class="anchor" href="https://pugixml.org/docs/manual.html#overview"></a><a class="link" href="https://pugixml.org/docs/manual.html#overview"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.概述</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="overview.introduction"><a class="anchor" href="https://pugixml.org/docs/manual.html#overview.introduction"></a><a class="link" href="https://pugixml.org/docs/manual.html#overview.introduction"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.1。</font><font style="vertical-align: inherit;">介绍</font></font></a></h3>
<div class="paragraph">
<p><a href="https://pugixml.org/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个轻量级的C ++ XML处理库。</font><font style="vertical-align: inherit;">它由具有丰富遍历/修改功能的类DOM接口，非常快的XML解析器（从XML文件/缓冲区构造DOM树）以及</font><font style="vertical-align: inherit;">用于复杂数据驱动的树查询</font><font style="vertical-align: inherit;">的</font></font><a href="https://pugixml.org/docs/manual.html#xpath"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath 1.0实现组成</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">还提供完全的Unicode支持，具有</font></font><a href="https://pugixml.org/docs/manual.html#dom.unicode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两种Unicode接口变体</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及不同Unicode编码之间的转换（在解析/保存期间自动发生）。</font><font style="vertical-align: inherit;">该库具有</font></font><a href="https://pugixml.org/docs/manual.html#install.portability"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">极高的可移植性</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，易于集成和使用。</font><font style="vertical-align: inherit;">pugixml从2006年开始开发和维护，拥有许多用户。</font><font style="vertical-align: inherit;">所有代码均根据</font><a href="https://pugixml.org/docs/manual.html#overview.license"><font style="vertical-align: inherit;">MIT许可证</font></a><font style="vertical-align: inherit;">分发</font></font><a href="https://pugixml.org/docs/manual.html#overview.license"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，从而使其完全免费地在开源和专有应用程序中使用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml支持非常快速，便捷和内存有效的XML文档处理。</font><font class="" style="vertical-align: inherit;">但是，由于pugixml具有DOM解析器，因此它无法处理内存中不适合的XML文档。</font><font style="vertical-align: inherit;">解析器也是非验证器，因此，如果您需要DTD或XML Schema验证，则该库不适合您。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是pugixml的完整手册，详细描述了库的所有功能。</font><font style="vertical-align: inherit;">如果要尽快开始编写代码，建议您首先</font></font><a href="https://pugixml.org/docs/quickstart.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">阅读快速入门指南</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
没有文档是完美的；</font><font style="vertical-align: inherit;">这也不是。</font><font style="vertical-align: inherit;">如果发现错误或遗漏，请随时</font></font><a href="https://github.com/zeux/pugixml/issues/new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提出问题或打开</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有修复程序的</font><a href="https://github.com/zeux/pugixml/issues/new"><font style="vertical-align: inherit;">请求请求</font></a><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="overview.feedback"><a class="anchor" href="https://pugixml.org/docs/manual.html#overview.feedback"></a><a class="link" href="https://pugixml.org/docs/manual.html#overview.feedback"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.2。</font><font style="vertical-align: inherit;">反馈</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您认为自己在pugixml中发现了一个错误（错误包括编译问题（错误/警告），崩溃，性能下降和错误行为），请通过</font></font><a href="https://github.com/zeux/pugixml/issues/new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">问题提交表单提交问题</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">确保包括相关信息，以便可以重现该错误：pugixml的版本，编译器版本和目标体系结构，使用pugixml并显示该错误的代码等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以用与错误相同的方式报告功能请求，因此，如果您缺少pugixml中的某些功能，或者如果API在某些地方比较粗糙，并且可以提出改进建议，请提出</font></font><a href="https://github.com/zeux/pugixml/issues/new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">问题</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，请注意，在考虑更改API时会有很多因素（与先前版本的兼容性，API冗余等），因此通常不接受可以通过小功能实现而无需修改pugixml的功能。</font><font style="vertical-align: inherit;">但是，所有规则都有例外。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您对pugixml有所帮助，例如某些构建系统/ IDE的构建脚本，或一组精心设计的辅助函数，或绑定到某些非C ++语言，请</font></font><a href="https://github.com/zeux/pugixml/issues/new"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提出问题或打开请求请求</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您的贡献必须根据与pugixml许可证兼容的许可证条款进行分配；</font><font style="vertical-align: inherit;">即不接受GPL / LGPL许可代码。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果由于隐私或其他问题而无法提交问题，可以直接通过电子邮件与pugixml作者联系：</font></font><a href="mailto:arseny.kapoulkine@gmail.com"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">arseny.kapoulkine@gmail.com</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="overview.thanks"><a class="anchor" href="https://pugixml.org/docs/manual.html#overview.thanks"></a><a class="link" href="https://pugixml.org/docs/manual.html#overview.thanks"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.3。</font><font style="vertical-align: inherit;">致谢</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有许多人的帮助，就无法开发pugixml。</font><font style="vertical-align: inherit;">本节中列出了其中一些。</font><font style="vertical-align: inherit;">如果您参与了pugixml开发，但在清单中找不到自己，我真的很抱歉；</font><font style="vertical-align: inherit;">请</font></font><a href="https://pugixml.org/docs/manual.html#email"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给我发送电子邮件，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以便我解决此问题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感谢</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Kristen Wegner</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提供的pugxml解析器，该解析器用作pugixml的基础。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感谢</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Neville Franks</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对pugxml解析器的贡献。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感谢</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Artyom Palvelev</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">建议使用惰性间隙收缩方法。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">感谢</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Vyacheslav Egorov</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行文档校对和模糊测试。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="overview.license"><a class="anchor" href="https://pugixml.org/docs/manual.html#overview.license"></a><a class="link" href="https://pugixml.org/docs/manual.html#overview.license"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1.4。</font><font style="vertical-align: inherit;">执照</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml库是根据MIT许可证分发的：</font></font></p>
</div>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版权所有（c）2006-2019 Arseny Kapoulkine</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
特此授予任何人免费的许可</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
获取此软件和相关文档的副本</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文件（以下简称“软件”），无需</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
限制，包括但不限于使用权，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
复制，修改，合并，发布，分发，再许可和/或出售</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
软件的副本，并允许</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
配备软件的目的在于遵守以下规定</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
条件：</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以上版权声明和本许可声明应为</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
包含在本软件的所有副本或实质性部分中。</font></font><font></font>
<font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
该软件按“原样”提供，没有任何形式的保证，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
明示或暗示，包括但不限于保修</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
适销性，特定用途的适用性和</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
非侵权。</font><font style="vertical-align: inherit;">在任何情况下，作者或版权概不</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
持有人对任何索赔，损坏或其他责任负责，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
无论是在合同，侵权或其他情况下引起的诉讼</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
来自，与软件或使用或有关的使用，</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
软件中的其他处理。</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着您可以在开源和专有应用程序中自由使用pugixml。</font><font style="vertical-align: inherit;">如果您在产品中使用pugixml，则向产品分发中添加这样的确认就足够了：</font></font></p>
</div>
<div class="literalblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该软件基于pugixml库（https://pugixml.org）。</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
pugixml是Arseny Kapoulkine版权所有（C）2006-2019。</font></font></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install"><a class="anchor" href="https://pugixml.org/docs/manual.html#install"></a><a class="link" href="https://pugixml.org/docs/manual.html#install"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.安装</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="install.getting"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.getting"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.getting"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1。</font><font style="vertical-align: inherit;">获取pugixml</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml以源代码形式分发。</font><font style="vertical-align: inherit;">您可以下载源代码发行版或克隆Git存储库。</font></font></p>
</div>
<div class="sect3">
<h4 id="install.getting.source"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.getting.source"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.getting.source"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1.1。</font><font style="vertical-align: inherit;">来源分布</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以下载最新的源分发作为存档：</font></font></p>
</div>
<div class="paragraph">
<p><a href="https://github.com/zeux/pugixml/releases/download/v1.10/pugixml-1.10.zip"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml-1.10.zip</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Windows行尾）/
 </font></font><a href="https://github.com/zeux/pugixml/releases/download/v1.10/pugixml-1.10.tar.gz"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml-1.10.tar.gz</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（Unix行尾）</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该发行版包含库源代码，文档（您正在阅读的手册和快速入门指南）以及一些代码示例。</font><font style="vertical-align: inherit;">下载发行版后，通过从压缩档案中提取所有文件来安装pugixml。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果需要较旧的版本，可以从</font></font><a href="https://github.com/zeux/pugixml/releases"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">版本档案中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下载</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="install.getting.git"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.getting.git"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.getting.git"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1.2。</font><font style="vertical-align: inherit;">Git仓库</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Git存储库位于</font></font><a href="https://github.com/zeux/pugixml/" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/zeux/pugixml/</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每个版本都有一个Git标签“ v {version}”；</font><font style="vertical-align: inherit;">还有“最新”标签，该标签始终指向最新的稳定版本。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">例如，要签出当前版本，可以使用以下命令：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">git clone https://github.com/zeux/pugixml<font></font>
cd pugixml<font></font>
git checkout v1.10</code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该存储库包含库源代码，文档，代码示例和完整的单元测试套件。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>latest</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果要自动获取新版本，</font><font style="vertical-align: inherit;">请使用</font><font style="vertical-align: inherit;">标签。</font><font style="vertical-align: inherit;">如果您只想明确切换到新版本，请使用其他标签。</font><font style="vertical-align: inherit;">还请注意，master分支包含该代码的进行中版本。</font><font style="vertical-align: inherit;">虽然这意味着您可以从母版获得新功能和错误修复，而无需等待新版本，但这也意味着有时在某些配置中该代码可能会被破坏。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="install.getting.subversion"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.getting.subversion"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.getting.subversion"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1.3。</font><font style="vertical-align: inherit;">Subversion版本库</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用</font></font><a href="https://github.com/zeux/pugixml" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">https://github.com/zeux/pugixml</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> URL </font><font style="vertical-align: inherit;">通过Subversion访问Git存储库</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">例如，要签出当前版本，可以使用以下命令：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">svn checkout https://github.com/zeux/pugixml/tags/v1.10 pugixml</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="install.getting.packages"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.getting.packages"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.getting.packages"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.1.4。</font><font style="vertical-align: inherit;">配套</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml可通过各种软件包管理器作为软件包使用。</font><font style="vertical-align: inherit;">请注意，大多数软件包与主存储库分开维护，因此它们不一定包含最新版本。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是各种系统中pugixml软件包的不完整列表：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Linux（</font></font><a href="http://packages.ubuntu.com/search?keywords=pugixml"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://tracker.debian.org/pkg/pugixml"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Debian</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://apps.fedoraproject.org/packages/pugixml"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Fedora</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://aur.archlinux.org/packages/pugixml/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Arch Linux</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和其他</font></font><a href="http://pkgs.org/search/pugixml"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">发行版</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><a href="http://fbsdmon.org/ports/textproc/pugixml"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">FreeBSD</font></font></a></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">OSX，通过</font></font><a href="http://brewformulas.org/Pugixml"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Homebrew</font></font></a></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Windows，通过</font></font><a href="https://www.nuget.org/packages/pugixml/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">NuGet</font></font></a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="install.building"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.building"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.building"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2。</font><font style="vertical-align: inherit;">构建pugixml</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml以源代码形式分发，没有任何预构建的二进制文件；</font><font style="vertical-align: inherit;">您必须自己构建它们。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">完整的pugixml源代码包含三个文件-一个源文件</font></font><code>pugixml.cpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和两个头文件</font></font><code>pugixml.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>pugixml.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是要使用pugixml类/函数需要包括的主要标头；</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个补充配置文件（请参阅</font></font><a href="https://pugixml.org/docs/manual.html#install.building.config"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他配置选项</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">本指南的其余部分假定该文件</font></font><code>pugixml.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">位于项目的当前目录中或项目的包含目录之一中，以便</font></font><code>#include "pugixml.hpp"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以找到标头。</font><font style="vertical-align: inherit;">但是，您也可以使用相对路径（即</font></font><code>#include "../libs/pugixml/src/pugixml.hpp"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或包含目录相对路径（即</font></font><code>#include &lt;xml/thirdparty/pugixml/src/pugixml.hpp&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="sect3">
<h4 id="install.building.embed"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.building.embed"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.building.embed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.1。</font><font style="vertical-align: inherit;">将pugixml构建为另一个静态库/可执行文件的一部分</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">生成pugixml的最简单方法是编译源文件</font></font><code>pugixml.cpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以及现有的库/可执行文件。</font><font style="vertical-align: inherit;">此过程取决于构建应用程序的方法。</font><font style="vertical-align: inherit;">例如，如果您使用的是Microsoft Visual Studio </font></font><sup class="footnote"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">[ </font></font><a id="_footnoteref_1" class="footnote" href="https://pugixml.org/docs/manual.html#_footnotedef_1" title="查看脚注。"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ]</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，Apple Xcode，Code :: Blocks或任何其他IDE，则只需</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将其添加</font></font><code>pugixml.cpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">到您的项目中</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您使用的是Microsoft Visual Studio，并且项目已打开了预编译的标头，则会看到以下错误消息：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml.cpp（3477）：致命错误C1010：寻找预编译头时文件意外结束。</font><font style="vertical-align: inherit;">您是否忘记在源中添加“ #include“ stdafx.h””？</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决此问题的正确方法是禁用</font></font><code>pugixml.cpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;的</font><font style="vertical-align: inherit;">预编译头</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您必须将“创建/使用预编译头”选项（“属性”对话框→C / C ++→预编译头→创建/使用预编译头）设置为“不使用预编译头”。</font><font style="vertical-align: inherit;">您必须为所有项目配置/平台执行此操作（在编辑选项之前，可以选择“配置”“所有配置”和“平台”“所有平台”）：</font></font></p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/vs2005_pch1.png"><img src="./pugixml 1.10手册_files/vs2005_pch1.png" alt="vs2005 pch1"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/vs2005_pch2.png"><img src="./pugixml 1.10手册_files/vs2005_pch2.png" alt="vs2005 pch2"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/vs2005_pch3.png"><img src="./pugixml 1.10手册_files/vs2005_pch3.png" alt="vs2005 pch3"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/vs2005_pch4.png"><img src="./pugixml 1.10手册_files/vs2005_pch4.png" alt="vs2005 pch4"></a>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="install.building.static"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.building.static"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.building.static"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.2。</font><font style="vertical-align: inherit;">将pugixml构建为独立的静态库</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以将pugixml编译为独立的静态库。</font><font style="vertical-align: inherit;">此过程取决于构建应用程序的方法。</font><font style="vertical-align: inherit;">pugixml发行版附带了一些流行的IDE /构建系统的项目文件。</font><font style="vertical-align: inherit;">有Apple XCode，Code :: Blocks，Codelite，Microsoft Visual Studio 2005、2008、2010+的项目文件，以及CMake和premake4的配置脚本。</font><font style="vertical-align: inherit;">欢迎您提交其他软件的项目文件/构建脚本；</font><font style="vertical-align: inherit;">请参阅</font></font><a href="https://pugixml.org/docs/manual.html#overview.feedback"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">反馈</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">每个版本的Microsoft Visual Studio都有两个项目：一个用于动态链接的CRT，名称为</font></font><code>pugixml_vs2008.vcproj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，另一个用于静态链接的CRT，名称为</font></font><code>pugixml_vs2008_static.vcproj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您应该选择与您的应用程序中使用的CRT匹配的版本。</font><font style="vertical-align: inherit;">Microsoft Visual Studio创建的新项目的默认选项是动态链接CRT，因此，除非更改默认值，否则应使用带有动态CRT的版本（例如，</font></font><code>pugixml_vs2008.vcproj</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于Microsoft Visual Studio 2008）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了将pugixml项目添加到工作区之外，还必须确保您的应用程序与pugixml库链接。</font><font style="vertical-align: inherit;">如果您使用的是Microsoft Visual Studio 2005/2008，则可以从应用程序项目向pugixml一个添加依赖项。</font><font style="vertical-align: inherit;">如果您使用的是Microsoft Visual Studio 2010+，则必须添加对应用程序项目的引用。</font><font style="vertical-align: inherit;">对于其他IDE /系统，请查阅相关文档。</font></font></p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top" colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Visual Studio 2005/2008年</font></font></th>
<th class="tableblock halign-left valign-top" colspan="2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Microsoft Visual Studio 2010+</font></font></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/vs2005_link1.png"><img src="./pugixml 1.10手册_files/vs2005_link1.png" alt="vs2005链接1"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/vs2005_link2.png"><img src="./pugixml 1.10手册_files/vs2005_link2.png" alt="vs2005 link2"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/vs2010_link1.png"><img src="./pugixml 1.10手册_files/vs2010_link1.png" alt="vs2010链接1"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/vs2010_link2.png"><img src="./pugixml 1.10手册_files/vs2010_link2.png" alt="vs2010 link2"></a>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="install.building.shared"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.building.shared"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.building.shared"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.3。</font><font style="vertical-align: inherit;">将pugixml构建为独立的共享库</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以将pugixml编译为独立的共享库。</font><font style="vertical-align: inherit;">该过程通常类似于静态库方法。</font><font style="vertical-align: inherit;">但是，pugixml发行版中未包含任何预配置的项目/脚本，因此您必须自己做。</font><font style="vertical-align: inherit;">通常，如果您使用的是基于GCC的工具链，则此过程与将任何其他库构建为DLL一样（将-shared添加到编译标志中就足够了）。</font><font style="vertical-align: inherit;">如果您使用的是基于MSVC的工具链，则必须使用declspec属性显式标记导出的符号。</font><font style="vertical-align: inherit;">您可以通过定义</font></font><a href="https://pugixml.org/docs/manual.html#PUGIXML_API"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUGIXML_API</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宏</font><font style="vertical-align: inherit;">来做到这</font><a href="https://pugixml.org/docs/manual.html#PUGIXML_API"><font style="vertical-align: inherit;">一点</font></a><font style="vertical-align: inherit;">，即通过</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#ifdef _DLL</span>
    <span class="tok-cp">#define PUGIXML_API __declspec(dllexport)</span>
<span class="tok-cp">#else</span>
    <span class="tok-cp">#define PUGIXML_API __declspec(dllimport)</span>
<span class="tok-cp">#endif</span></code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font class="" style="vertical-align: inherit;">
如果您使用的是与STL相关的功能，则应使用共享的运行时库，以确保在应用程序和pugixml中为STL分配使用单个堆。</font><font style="vertical-align: inherit;">在MSVC中，这意味着将“多线程DLL”或“多线程调试DLL”选择为“运行时库”属性（</font></font><code>/MD</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>/MDd</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">链接器开关）。</font><font style="vertical-align: inherit;">您还应确保不同项目之间的运行库选择是一致的。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect3">
<h4 id="install.building.header"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.building.header"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.building.header"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.4。</font><font style="vertical-align: inherit;">在仅标头模式下使用pugixml</font></font></a></h4>
<div id="PUGIXML_HEADER_ONLY" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以在仅标头模式下使用pugixml。</font><font style="vertical-align: inherit;">这意味着pugixml的所有源代码将包含在每个包含的翻译单元中</font></font><code>pugixml.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这就是大多数Boost和STL库的工作方式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，此方法有优缺点。</font><font style="vertical-align: inherit;">如果您的编译器工具链不支持链接时间优化，或者您将其关闭（使用链接时间优化，性能应类似于），标头模式可以提高树的遍历/修改性能（因为将嵌入许多简单函数）。非标题模式）。</font><font style="vertical-align: inherit;">但是，由于编译器现在必须为包含它的每个翻译单元编译一次pugixml源，因此编译时间可能会明显增加。</font><font style="vertical-align: inherit;">如果要在标头模式下使用pugixml但不需要XPath支持，则可以考虑使用</font></font><a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_XPATH"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUGIXML_NO_XPATH</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> define </font><font style="vertical-align: inherit;">禁用它，以</font><a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_XPATH"><font style="vertical-align: inherit;">缩短</font></a><font style="vertical-align: inherit;">编译时间。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要启用仅标头模式，您必须定义</font></font><code>PUGIXML_HEADER_ONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以在中进行操作</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，也可以通过编译器命令行提供它们。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，</font></font><code>pugixml.cpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code>PUGIXML_HEADER_ONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已定义，则</font><font style="vertical-align: inherit;">编译是安全的</font><font style="vertical-align: inherit;">-因此，如果仅在Release配置中仅使用标头模式，则可以在项目中包含pugixml.cpp（请参阅将</font></font><a href="https://pugixml.org/docs/manual.html#install.building.embed"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml作为另一个静态库/可执行文件的一部分构建</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">） ，并有条件地启用仅标头模式，</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#ifndef _DEBUG</span>
    <span class="tok-cp">#define PUGIXML_HEADER_ONLY</span>
<span class="tok-cp">#endif</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="install.building.config"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.building.config"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.building.config"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.2.5。</font><font style="vertical-align: inherit;">其他配置选项</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml使用多个定义来控制编译过程。</font><font style="vertical-align: inherit;">定义它们的方法有两种：要么将所需的定义放入</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（其中已注释掉一些示例），要么通过编译器命令行提供它们。</font><font class="" style="vertical-align: inherit;">一致性很重要：</font></font><code>pugixml.hpp</code><font style="vertical-align: inherit;"><font class="" style="vertical-align: inherit;">整个应用程序</font><font class="" style="vertical-align: inherit;">中包括</font><font class="" style="vertical-align: inherit;">（包括pugixml源）的</font><font class="" style="vertical-align: inherit;">所有源文件中的定义都应匹配</font><font class="" style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">添加定义</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以确保这一点，除非您的宏定义包装在预处理器</font></font><code>#if</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>#ifdef</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指令中并且该指令不一致。</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了注释之外，将不会包含任何内容，这意味着升级到新版本时，您可以安全地保留修改后的版本。</font></font></p>
</div>
<div class="paragraph">
<p><a id="PUGIXML_WCHAR_MODE"></a><code>PUGIXML_WCHAR_MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义在UTF-8样式界面（假定内存中的文本编码为UTF-8，大多数功能</font></font><code>char</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用作字符类型）和UTF-16 / 32样式界面（假定内存中的文本编码为UTF）之间切换-16/32，取决于</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">大小，大多数功能都</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用作字符类型）。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">更多详细信息，</font><font style="vertical-align: inherit;">请参见</font></font><a href="https://pugixml.org/docs/manual.html#dom.unicode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unicode接口</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><a id="PUGIXML_COMPACT"></a><code>PUGIXML_COMPACT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define激活了文档存储的另一种内部表示形式，对于具有大量标记（即节点和属性）的文档，内存的使用效率更高，但解析和访问速度稍慢。</font><font style="vertical-align: inherit;">有关详细信息，请参见</font></font><a href="https://pugixml.org/docs/manual.html#dom.memory.compact"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">紧凑模式</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><a id="PUGIXML_NO_XPATH"></a><code>PUGIXML_NO_XPATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define禁用XPath。</font><font style="vertical-align: inherit;">XPath接口和XPath实现都从编译中排除。</font><font class="" style="vertical-align: inherit;">如果您不需要XPath功能并且需要节省代码空间，则提供此选项。</font></font></p>
</div>
<div class="paragraph">
<p><a id="PUGIXML_NO_STL"></a><code>PUGIXML_NO_STL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define禁止在pugixml中使用STL。</font><font style="vertical-align: inherit;">如果定义了此宏，则不再存在用于STL类型的函数（即，通过iostream加载/保存）。</font><font style="vertical-align: inherit;">如果您的目标平台没有符合标准的STL实现，则提供此选项。</font></font></p>
</div>
<div class="paragraph">
<p><a id="PUGIXML_NO_EXCEPTIONS"></a><code>PUGIXML_NO_EXCEPTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define禁止在pugixml中使用异常。</font><font style="vertical-align: inherit;">如果您的目标平台不具有异常处理功能，则提供此选项。</font></font></p>
</div>
<div class="paragraph">
<p><a id="PUGIXML_API"></a><code>PUGIXML_API</code>, <a id="PUGIXML_CLASS"></a><code>PUGIXML_CLASS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 和 </font></font><a id="PUGIXML_FUNCTION"></a><code>PUGIXML_FUNCTION</code><font style="vertical-align: inherit;"><font class="" style="vertical-align: inherit;">定义可让您为pugixml类和非成员函数指定自定义属性（即declspec或调用约定）。</font><font style="vertical-align: inherit;">在没有</font></font><code>PUGIXML_CLASS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>PUGIXML_FUNCTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义的</font><font style="vertical-align: inherit;">情况下，</font></font><code>PUGIXML_API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用定义代替。</font><font style="vertical-align: inherit;">例如，要指定固定的调用约定，可以定义</font></font><code>PUGIXML_FUNCTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为ie </font></font><code>__fastcall</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">另一个示例是MSVC中的DLL导入/导出属性（请参阅将</font></font><a href="https://pugixml.org/docs/manual.html#install.building.shared"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml构建为独立的共享库</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在那个例子</font></font><code>PUGIXML_API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中，几个源文件之间是不一致的。</font><font style="vertical-align: inherit;">这是一致性规则的例外。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><a id="PUGIXML_MEMORY_PAGE_SIZE"></a><code>PUGIXML_MEMORY_PAGE_SIZE</code>, <a id="PUGIXML_MEMORY_OUTPUT_STACK"></a><code>PUGIXML_MEMORY_OUTPUT_STACK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 和 </font></font><a id="PUGIXML_MEMORY_XPATH_PAGE_SIZE"></a><code>PUGIXML_MEMORY_XPATH_PAGE_SIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用于自定义某些重要大小，以优化特定于应用程序模式的内存使用量。</font><font style="vertical-align: inherit;">有关详细信息，请参阅</font></font><a href="https://pugixml.org/docs/manual.html#dom.memory.tuning"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">内存消耗调整</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><a id="PUGIXML_HAS_LONG_LONG"></a><code>PUGIXML_HAS_LONG_LONG</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define启用对</font></font><code>long long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml中类型的支持。</font><font style="vertical-align: inherit;">如果您的平台已知具有</font></font><code>long long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持（即，具有C ++ 11支持或使用相当现代的已知编译器版本），</font><font style="vertical-align: inherit;">则会自动启用此定义</font><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">如果pugixml不能识别出您的平台支持，</font></font><code>long long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">但实际上可以，则可以手动启用定义。</font></font></p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="install.portability"><a class="anchor" href="https://pugixml.org/docs/manual.html#install.portability"></a><a class="link" href="https://pugixml.org/docs/manual.html#install.portability"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2.3。</font><font style="vertical-align: inherit;">可移植性</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml是用符合标准的C ++编写的，并在适当的情况下提供了一些特定于编译器的解决方法。</font><font class="" style="vertical-align: inherit;">pugixml与C ++ 11标准兼容，但不需要C ++ 11支持。</font><font style="vertical-align: inherit;">每个版本都使用单元测试套件进行了测试，其代码覆盖率超过99％。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml在各种桌面平台（包括Microsoft Windows，Linux，FreeBSD，Apple MacOSX和Sun Solaris），游戏机（包括Microsoft Xbox 360，Microsoft Xbox One，Nintendo Wii，Sony Playstation Portable和Sony Playstation 3）上运行（包括Android，iOS，BlackBerry，三星bada和Microsoft Windows CE）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml支持各种体系结构，例如x86 / x86-64，PowerPC，ARM，MIPS和SPARC。</font><font style="vertical-align: inherit;">通常，它应在任何体系结构上运行，因为它不使用体系结构特定的代码，并且不依赖于未对齐的内存访问等功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用任何C ++编译器来编译pugixml。</font><font style="vertical-align: inherit;">已使用6.0至2015年的所有Microsoft Visual C ++版本，从3.4至5.2的GCC，从3.2至3.7的Clang以及各种其他编译器（例如Borland C ++，Digital Mars C ++，Intel C ++， Metrowerks CodeWarrior和PathScale）。</font><font style="vertical-align: inherit;">编写该代码是为了即使在相当高的警告级别下也可以避免编译警告。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，某些平台可能具有对C ++的非常准系统的支持。</font><font style="vertical-align: inherit;">在某些情况下，您将必须使用</font></font><code>PUGIXML_NO_STL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和/或</font></font><code>PUGIXML_NO_EXCEPTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译而不会出现问题。</font><font style="vertical-align: inherit;">这主要适用于旧游戏机和嵌入式系统。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dom"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.文档对象模型</font></font></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml以类似于DOM的方式存储XML数据：整个XML文档（文档结构和元素数据）都以树的形式存储在内存中。</font><font style="vertical-align: inherit;">可以从字符流（文件，字符串，C ++ I / O流）加载树，然后使用特殊的API或XPath表达式遍历。</font><font class="" style="vertical-align: inherit;">整个树是可变的：节点结构和节点/属性数据都可以随时更改。</font><font style="vertical-align: inherit;">最后，文档转换的结果可以保存到字符流（文件，C ++ I / O流或自定义传输）中。</font></font></p>
</div>
<div class="sect2">
<h3 id="dom.tree"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.tree"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.tree"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.1。</font><font style="vertical-align: inherit;">树状结构</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML文档用树数据结构表示。</font><font style="vertical-align: inherit;">树的根是文档本身，它对应于C ++类型</font></font><a href="https://pugixml.org/docs/manual.html#xml_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">文档具有一个或多个子节点，对应于C ++类型</font></font><a href="https://pugixml.org/docs/manual.html#xml_node"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_node</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">节点具有不同的类型；</font><font style="vertical-align: inherit;">根据类型的不同，节点可以具有子节点的集合，与C ++类型</font></font><a href="https://pugixml.org/docs/manual.html#xml_attribute"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_attribute</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应的属性的集合</font><font style="vertical-align: inherit;">以及一些其他数据（即名称）。</font></font></p>
</div>
<div id="xml_node_type" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">树节点可以是以下类型之一（它们一起构成枚举</font></font><code>xml_node_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档节点（</font></font><a id="node_document"></a><code>node_document</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）-这是树的根，由几个子节点组成。</font><font style="vertical-align: inherit;">该节点对应于</font></font><a href="https://pugixml.org/docs/manual.html#xml_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类；</font><font style="vertical-align: inherit;">注意，</font></font><a href="https://pugixml.org/docs/manual.html#xml_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个子类的</font></font><a href="https://pugixml.org/docs/manual.html#xml_node"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_node</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，所以整个节点接口也同样有效。</font><font style="vertical-align: inherit;">但是，文档节点在以下几种方面很特殊。</font><font style="vertical-align: inherit;">树中只能有一个文档节点。</font><font style="vertical-align: inherit;">文档节点没有任何XML表示形式。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素/标签节点（</font></font><a id="node_element"></a><code>node_element</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）-这是最常见的节点类型，代表XML元素。</font><font style="vertical-align: inherit;">元素节点具有名称，属性的集合和子节点的集合（两者均可以为空）。</font><font style="vertical-align: inherit;">该属性是一个简单的名称/值对。</font><font style="vertical-align: inherit;">元素节点的示例XML表示如下：</font></font></p>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;node attr =“ value”&gt; &lt;child /&gt; &lt;/ node&gt;</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里有两个元素节点：一个具有name </font></font><code>"node"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，单个属性</font></font><code>"attr"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和单个子</font><font style="vertical-align: inherit;">节点</font></font><code>"child"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，另一个具有name </font></font><code>"child"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">且不具有任何属性或子节点。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">纯字符数据节点（</font></font><a id="node_pcdata"></a><code>node_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）表示XML中的纯文本。</font><font style="vertical-align: inherit;">PCDATA节点具有一个值，但没有名称或子代/属性。</font><font style="vertical-align: inherit;">请注意，</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">普通字符数据不是元素节点的一部分，而是有其自己的节点</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">一个元素节点可以有几个子PCDATA节点。</font><font style="vertical-align: inherit;">文本节点的示例XML表示如下：</font></font></p>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;node&gt; text1 &lt;child /&gt; text2 &lt;/ node&gt;</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这里</font></font><code>"node"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">element具有三个子元素，其中两个是具有值</font></font><code>" text1 "</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和的</font><font style="vertical-align: inherit;">PCDATA节点</font></font><code>" text2 "</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">角色数据节点（</font></font><a id="node_cdata"></a><code>node_cdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）表示以特殊方式引用的XML文本。</font><font style="vertical-align: inherit;">除了XML表示形式外，CDATA节点与PCDATA节点没有区别-上面的文本示例与CDATA相似：</font></font></p>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;node&gt; &lt;！[CDATA [text1]]&gt; &lt;child /&gt; &lt;！[CDATA [text2]]&gt; &lt;/ node&gt;</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CDATA节点可以很容易地包括非逃脱</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以纯文本字符。</font><font style="vertical-align: inherit;">CDATA值不能包含字符序列</font></font><code>]]&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因为它用于确定节点内容的结尾。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评论节点（</font></font><a id="node_comment"></a><code>node_comment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）表示XML中的注释。</font><font style="vertical-align: inherit;">注释节点具有一个值，但是没有名称或子级/属性。</font><font style="vertical-align: inherit;">注释节点的示例XML表示如下：</font></font></p>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;！-评论文本-&gt;</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，注释节点具有值</font></font><code>"comment text"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，注释节点被视为XML标记的非必要部分，并且在XML解析期间不会加载。</font><font style="vertical-align: inherit;">您可以使用</font></font><a href="https://pugixml.org/docs/manual.html#parse_comments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_comments</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">覆盖此行为</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理指令节点（</font></font><a id="node_pi"></a><code>node_pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）表示XML中的处理指令（PI）。</font><font style="vertical-align: inherit;">PI节点具有名称和可选值，但没有子代/属性。</font><font style="vertical-align: inherit;">PI节点的示例XML表示如下：</font></font></p>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;？名称值？&gt;</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处的名称（也称为PI目标）为</font></font><code>"name"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，值为</font></font><code>"value"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，PI节点被视为XML标记的非必要部分，并且在XML解析期间不会加载。</font><font style="vertical-align: inherit;">您可以使用</font></font><a href="https://pugixml.org/docs/manual.html#parse_pi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_pi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">覆盖此行为</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明节点（</font></font><a id="node_declaration"></a><code>node_declaration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）表示XML中的文档声明。</font><font style="vertical-align: inherit;">声明节点具有名称（</font></font><code>"xml"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和可选的属性集合，但没有值或子级。</font><font style="vertical-align: inherit;">一个文档中只能有一个声明节点。</font><font style="vertical-align: inherit;">此外，它应该是最顶层的节点（其父节点应该是文档）。</font><font style="vertical-align: inherit;">声明节点的示例XML表示如下：</font></font></p>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;？xml version =“ 1.0”？&gt;</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在这里，节点具有名称</font></font><code>"xml"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及具有名称</font></font><code>"version"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和值</font><font style="vertical-align: inherit;">的单个属性</font></font><code>"1.0"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，声明节点被视为XML标记的非必要部分，并且在XML解析期间不会加载。</font><font style="vertical-align: inherit;">您可以使用</font></font><a href="https://pugixml.org/docs/manual.html#parse_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_declaration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">覆盖此行为</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">另外，默认情况下，保存XML文档时会输出一个伪声明，除非文档中已经没有声明；否则，默认为false。</font><font style="vertical-align: inherit;">您可以使用</font></font><a href="https://pugixml.org/docs/manual.html#format_no_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format_no_declaration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">将其禁用</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档类型声明节点（</font></font><a id="node_doctype"></a><code>node_doctype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）表示XML中的文档类型声明。</font><font style="vertical-align: inherit;">文档类型声明节点具有一个值，该值对应于整个文档类型内容；</font><font style="vertical-align: inherit;">没有为内部元素（如）创建其他节点</font></font><code>&lt;!ENTITY&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">一个文档中只能有一个文档类型声明节点。</font><font style="vertical-align: inherit;">此外，它应该是最顶层的节点（其父节点应该是文档）。</font><font style="vertical-align: inherit;">文档类型声明节点的示例XML表示如下：</font></font></p>
<div class="listingblock">
<div class="content">
<pre><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">&lt;！DOCTYPE问候[&lt;！ELEMENT问候（#PCDATA）&gt;]&gt;</font></font></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此处节点具有值</font></font><code>"greeting [ &lt;!ELEMENT greeting (#PCDATA)&gt; ]"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，文档类型声明节点被视为XML标记的非必要部分，并且在XML解析期间不会加载。</font><font style="vertical-align: inherit;">您可以使用</font></font><a href="https://pugixml.org/docs/manual.html#parse_doctype"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_doctype</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">覆盖此行为</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，这是XML文档和相应的树表示形式的完整示例（</font></font><a href="https://pugixml.org/docs/samples/tree.xml" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / tree.xml</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-cp">&lt;?xml version="1.0"?&gt;</span>
<span class="tok-nt">&lt;mesh</span> <span class="tok-na">name=</span><span class="tok-s">"mesh_root"</span><span class="tok-nt">&gt;</span>
    <span class="tok-c">&lt;!-- here is a mesh node --&gt;</span><font></font>
    some text<font></font>
    <span class="tok-cp">&lt;![CDATA[someothertext]]&gt;</span><font></font>
    some more text<font></font>
    <span class="tok-nt">&lt;node</span> <span class="tok-na">attr1=</span><span class="tok-s">"value1"</span> <span class="tok-na">attr2=</span><span class="tok-s">"value2"</span> <span class="tok-nt">/&gt;</span>
    <span class="tok-nt">&lt;node</span> <span class="tok-na">attr1=</span><span class="tok-s">"value2"</span><span class="tok-nt">&gt;</span>
        <span class="tok-nt">&lt;innernode/&gt;</span>
    <span class="tok-nt">&lt;/node&gt;</span>
<span class="tok-nt">&lt;/mesh&gt;</span>
<span class="tok-cp">&lt;?include somedata?&gt;</span></code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock">
<div class="content">
<a class="image" href="./pugixml 1.10手册_files/dom_tree.png"><img src="./pugixml 1.10手册_files/dom_tree.png" alt="dom树"></a>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="dom.cpp"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.cpp"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.cpp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.2。</font><font style="vertical-align: inherit;">C ++接口</font></font></a></h3>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有的pugixml类和函数都位于</font></font><code>pugi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称空间中。</font><font style="vertical-align: inherit;">您必须使用显式名称限定（即</font></font><code>pugi::xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），或通过</font></font><code>using</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指令（即</font></font><code>using pugi::xml_node;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>using namespace pugi;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">获得对相关符号的访问权限</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此后，此文档中的所有声明都将省略名称空间；</font><font style="vertical-align: inherit;">所有代码示例都将使用完全限定的名称。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管有几种类型的节点，有表示树只有三个C ++类（</font></font><code>xml_document</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）; </font><font style="vertical-align: inherit;">某些操作</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅对某些节点类型有效。</font><font style="vertical-align: inherit;">这些类如下所述。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_document"></a><a id="xml_document::document_element"></a>
<code>xml_document</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是整个文档结构的所有者；</font><font style="vertical-align: inherit;">它是不可复制的类。</font><font style="vertical-align: inherit;">的界面</font></font><code>xml_document</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包括加载功能（请参阅</font></font><a href="https://pugixml.org/docs/manual.html#loading"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），保存功能（请参见</font></font><a href="https://pugixml.org/docs/manual.html#saving"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保存文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和的整个界面</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，该</font><font style="vertical-align: inherit;">界面</font><font style="vertical-align: inherit;">允许检查和/或修改文档。</font><font style="vertical-align: inherit;">请注意，虽然</font></font><code>xml_document</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是的子类</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是多态类型。</font><font style="vertical-align: inherit;">存在继承只是为了简化用法。</font><font style="vertical-align: inherit;">或者，您可以使用</font></font><code>document_element</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数获取元素节点，该元素节点是文档的直接子元素。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_document::ctor"></a><a id="xml_document::dtor"></a><a id="xml_document::reset"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认的构造</font></font><code>xml_document</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数将文档初始化为只有一个根节点（文档节点）的树。</font><font style="vertical-align: inherit;">然后，您可以使用树修改功能或加载功能为其填充数据；</font><font style="vertical-align: inherit;">所有加载函数都会破坏所有占用内存的前一棵树，从而使该文档的现有节点/属性句柄处于无效状态。</font><font style="vertical-align: inherit;">如果要销毁前一棵树，则可以使用该</font></font><code>xml_document::reset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。</font><font style="vertical-align: inherit;">它会销毁该树并将其替换为空的树或指定文档的副本。</font><font style="vertical-align: inherit;">析构</font></font><code>xml_document</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数还会破坏树，因此文档对象的生存期应该超过指向该树的任何节点/属性句柄的生存期。</font></font></p>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
从技术上讲，当它们所引用的树被销毁时，节点/属性句柄可以保留，但调用这些句柄的任何成员函数都会导致未定义的行为。</font><font style="vertical-align: inherit;">因此，建议确保仅在销毁对其节点/属性的所有引用之后，销毁文档。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><a id="xml_node"></a><a id="xml_node::type"></a>
<code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是文档节点的句柄；</font><font style="vertical-align: inherit;">它可以指向文档中的任何节点，包括文档节点本身。</font><font style="vertical-align: inherit;">所有类型的节点都有一个公共接口。</font><font style="vertical-align: inherit;">实际的</font></font><a href="https://pugixml.org/docs/manual.html#xml_node_type"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点类型</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过该</font></font><code>xml_node::type()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">方法</font><font style="vertical-align: inherit;">查询</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，这</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅是实际节点的句柄，而不是节点本身-您可以有多个</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指向同一基础对象的句柄。</font><font style="vertical-align: inherit;">销毁</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手柄不会破坏该节点，也不会将其从树中删除。</font><font style="vertical-align: inherit;">的大小</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于指针</font><font style="vertical-align: inherit;">的大小</font><font style="vertical-align: inherit;">，因此无非就是指针周围的轻量级包装；</font><font style="vertical-align: inherit;">您可以安全地</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按值</font><font style="vertical-align: inherit;">传递或返回</font><font style="vertical-align: inherit;">对象，而无需额外的开销。</font></font></p>
</div>
<div id="node_null" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个特殊的</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">值</font><font style="vertical-align: inherit;">，称为空节点或空节点（此类节点的类型为</font></font><code>node_null</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">它不对应于任何文档中的任何节点，因此类似于空指针。</font><font style="vertical-align: inherit;">但是，所有操作都在空节点上定义。</font><font style="vertical-align: inherit;">通常，这些操作不执行任何操作，并且返回空节点/属性或空字符串作为其结果（有关更多详细信息，请参见特定功能的文档）。</font><font style="vertical-align: inherit;">这对于链接呼叫很有用；</font><font style="vertical-align: inherit;">也就是说，你可以得到像这样一个节点的祖父母：</font></font><code>node.parent().parent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">如果节点是空节点或没有父节点，则第一次</font></font><code>parent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用返回空节点；</font></font><code>parent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后</font><font style="vertical-align: inherit;">，第二个</font><font style="vertical-align: inherit;">调用还返回空节点，这使错误处理更加容易。</font></font></p>
</div>
<div id="xml_attribute" class="paragraph">
<p><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是XML属性的句柄；</font><font style="vertical-align: inherit;">它具有与相同的语义</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，即可以有多个</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指向同一基础对象的句柄，并且有一个特殊的null属性值，该值传播到函数结果。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_attribute::ctor"></a><a id="xml_node::ctor"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
双方</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有它们初始化为null对象的默认构造函数。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_attribute::comparison"></a><a id="xml_node::comparison"></a>
<code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尝试表现得像指针一样，也就是说，可以将它们与相同类型的其他对象进行比较，从而可以将它们用作关联容器中的键。</font><font style="vertical-align: inherit;">同一基础对象的所有句柄都相等，并且不同基础对象的任何两个句柄都不相等。</font><font style="vertical-align: inherit;">空句柄只比较等于空句柄。</font><font style="vertical-align: inherit;">无法根据文件中节点的顺序或以任何其他方式可靠地确定关系比较的结果。</font><font style="vertical-align: inherit;">除搜索优化（即关联容器关键字）外，请勿使用关系比较运算符。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_attribute::hash_value"></a><a id="xml_node::hash_value"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果要</font><font style="vertical-align: inherit;">在基于散列的关联容器中</font><font style="vertical-align: inherit;">使用</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象作为键，则可以使用</font></font><code>hash_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员函数。</font><font style="vertical-align: inherit;">它们返回的哈希值对于同一基础对象的所有句柄均保证相同。</font><font style="vertical-align: inherit;">空句柄的哈希值是0。请注意，哈希值不取决于节点的内容，而仅取决于基础结构在内存中的位置-这意味着两次加载相同的文档可能会产生不同的哈希值，并且复制节点将不会保留哈希。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_attribute::unspecified_bool_type"></a><a id="xml_node::unspecified_bool_type"></a><a id="xml_attribute::empty"></a><a id="xml_node::empty"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后手柄可以隐式转换为布尔状物体，这样就可以测试是否节点/属性是空的，下面的代码：</font></font><code>if (node) { …​ }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>if (!node) { …​ } else { …​ }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">或者，您可以</font><font style="vertical-align: inherit;">通过调用以下方法</font><font style="vertical-align: inherit;">来检查给定的</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">句柄是否为空：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">empty</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">empty</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有文档树就没有节点和属性，因此如果不将它们添加到某些文档中就无法创建它们。</font><font style="vertical-align: inherit;">一旦基础节点/属性对象被销毁，这些对象的句柄就变得无效。</font><font style="vertical-align: inherit;">虽然这意味着破坏整个树会使所有节点/属性句柄无效，但也意味着破坏子树（通过调用</font></font><a href="https://pugixml.org/docs/manual.html#xml_node::remove_child"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_node :: remove_child</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或删除属性会使相应的句柄无效。</font><font style="vertical-align: inherit;">无法检查句柄的有效性。</font><font style="vertical-align: inherit;">您必须通过外部机制来确保正确性。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="dom.unicode"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.unicode"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.unicode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.3。</font><font style="vertical-align: inherit;">Unicode界面</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置pugixml时，接口和内部表示形式有两种选择：您可以选择UTF-8（也称为char）接口或UTF-16 / 32（也称为wchar_t）接口。</font><font style="vertical-align: inherit;">该选择通过</font></font><a href="https://pugixml.org/docs/manual.html#PUGIXML_WCHAR_MODE"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUGIXML_WCHAR_MODE</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">控制</font><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">您可以通过</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或通过预处理器选项进行设置，如</font></font><a href="https://pugixml.org/docs/manual.html#install.building.config"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他配置选项中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果设置了这个定义，则使用wchar_t接口。</font><font style="vertical-align: inherit;">否则（默认情况下）使用char接口。</font><font style="vertical-align: inherit;">假定确切的宽字符编码为UTF-16或UTF-32，并根据</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">的大小确定</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果大小</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为2，则pugixml假定使用UTF-16编码而不是UCS-2编码，这意味着某些字符表示为两个代码点。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有与字符串一起使用的树函数都可以与C样式的以null终止的字符串或所选字符类型的STL字符串一起使用。</font><font style="vertical-align: inherit;">例如，在char模式下，节点名称访问器如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">set_name</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">value</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并在wchar_t模式下是这样的：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-kt">wchar_t</span><span class="tok-o">*</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">set_name</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">wchar_t</span><span class="tok-o">*</span> <span class="tok-n">value</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="char_t"></a><a id="string_t"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有一个特殊的类型，，</font></font><code>pugi::char_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它被定义为字符类型，并取决于库的配置。</font><font style="vertical-align: inherit;">此后还将在文档中使用它。</font><font style="vertical-align: inherit;">还有一个type </font></font><code>pugi::string_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，它定义为字符类型的STL字符串。</font><font style="vertical-align: inherit;">它对应</font></font><code>std::string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">于char模式和</font></font><code>std::wstring</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">wchar_t模式。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了接口之外，内部实现更改为将XML数据存储为</font></font><code>pugi::char_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">这意味着这两种模式具有不同的内存使用特性-通常，UTF-8模式具有更高的内存和性能效率，尤其是如果</font></font><code>sizeof(wchar_t)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为4。则</font><font style="vertical-align: inherit;">自动进行</font><font style="vertical-align: inherit;">到</font></font><code>pugi::char_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载</font></font><code>pugi::char_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档时</font><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">保存文档时</font><font style="vertical-align: inherit;">的转换</font><font style="vertical-align: inherit;">，这也会带来较小的性能损失。</font><font style="vertical-align: inherit;">但是，一般建议是根据使用情况选择字符模式，即，如果UTF-8不方便处理，并且您的大多数XML数据为非ASCII，则wchar_t模式可能是一个更好的选择。</font></font></p>
</div>
<div class="paragraph">
<p><a id="as_utf8"></a><a id="as_wide"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在某些情况下，您必须在UTF-8和wchar_t编码之间转换字符串数据。</font><font style="vertical-align: inherit;">为此提供了以下辅助功能：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">as_utf8</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">wchar_t</span><span class="tok-o">*</span> <span class="tok-n">str</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wstring</span> <span class="tok-n">as_wide</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">str</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个函数都接受以null结尾的字符串作为参数</font></font><code>str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并返回转换后的字符串。</font></font><code>as_utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行从UTF-16 / 32到UTF-8的转换；</font></font><code>as_wide</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行从UTF-8到UTF-16 / 32的转换。</font><font style="vertical-align: inherit;">无效的UTF序列在转换时会被静默丢弃。</font></font><code>str</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">必须是有效的字符串；</font><font style="vertical-align: inherit;">传递空指针会导致未定义的行为。</font><font style="vertical-align: inherit;">还有两个具有相同语义的重载，它们接受一个字符串作为参数：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">as_utf8</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wstring</span><span class="tok-o">&amp;</span> <span class="tok-n">str</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wstring</span> <span class="tok-n">as_wide</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span><span class="tok-o">&amp;</span> <span class="tok-n">str</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本文档中的大多数示例均采用char接口，因此无法使用</font></font><a href="https://pugixml.org/docs/manual.html#PUGIXML_WCHAR_MODE"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUGIXML_WCHAR_MODE进行</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这样做是为了简化文档。</font><font style="vertical-align: inherit;">通常，您唯一需要做的更改就是传递</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串文字，即</font></font></p>
</div>
<div class="paragraph">
<p><code>xml_node node = doc.child("bookstore").find_child_by_attribute("book", "id", "12345");</code></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">你必须使用</font></font></p>
</div>
<div class="paragraph">
<p><code>xml_node node = doc.child(L"bookstore").find_child_by_attribute(L"book", L"id", L"12345");</code></p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="dom.thread"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.thread"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.thread"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.4。</font><font style="vertical-align: inherit;">线程安全保证</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml中几乎所有函数都具有以下线程安全保证：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从多个线程调用免费（非成员）函数是安全的</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对同一棵树执行并发只读访问是安全的（所有常量成员函数都不会修改该树）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果一次仅对单个树进行一次读或写访问，则执行并发读/写访问是安全的</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单个树的并发修改和遍历需要同步，例如通过读写器锁。</font><font style="vertical-align: inherit;">修改包括更改文档结构和更改单个节点/属性数据，即更改名称/值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">唯一的例外是</font></font><a href="https://pugixml.org/docs/manual.html#set_memory_management_functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">set_memory_management_functions</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">它修改全局变量，因此不是线程安全的。</font><font style="vertical-align: inherit;">其使用策略有更多限制，请参阅</font></font><a href="https://pugixml.org/docs/manual.html#dom.memory.custom"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自定义内存分配/取消分配功能</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="dom.exception"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.exception"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.exception"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.5。</font><font style="vertical-align: inherit;">例外保证</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了XPath之外，pugixml本身不会引发任何异常。</font><font style="vertical-align: inherit;">此外，大多数pugixml函数都具有不抛出异常的保证。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这不适用于对STL字符串或IOstream进行操作的函数；</font><font style="vertical-align: inherit;">此类函数具有强保证（对字​​符串进行操作的功能）或基本保证（对流进行操作的功能）。</font><font style="vertical-align: inherit;">调用用户定义的回调（即</font></font><a href="https://pugixml.org/docs/manual.html#xml_node::traverse"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_node :: traverse</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://pugixml.org/docs/manual.html#xml_node::find_node"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_node :: find_node</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><a href="https://pugixml.org/docs/manual.html#xml_node::find_node"><font style="vertical-align: inherit;">函数</font></a><font style="vertical-align: inherit;">也不会提供任何超出回调提供的异常保证。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果未使用</font></font><a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_EXCEPTIONS"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUGIXML_NO_EXCEPTIONS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">禁用异常处理</font><font style="vertical-align: inherit;">，则XPath函数可能会</font><font style="vertical-align: inherit;">在解析错误时</font><font style="vertical-align: inherit;">引发</font></font><a href="https://pugixml.org/docs/manual.html#xpath_exception"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xpath_exception</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font><a href="https://pugixml.org/docs/manual.html#xpath_exception"><font style="vertical-align: inherit;">否则</font></a><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">可能会抛出</font><a href="https://pugixml.org/docs/manual.html#xpath_exception"><font style="vertical-align: inherit;">xpath_exception</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同样，XPath函数可能会</font></font><code>std::bad_alloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在内存不足的情况下</font><font style="vertical-align: inherit;">抛出</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，XPath函数提供了强大的异常保证。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="dom.memory"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.memory"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.memory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6。</font><font style="vertical-align: inherit;">内存管理</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml请求大块文档存储所需的内存，并在这些大块内分配文档数据。</font><font style="vertical-align: inherit;">本节讨论用于块分配和内部内存管理实现的替换功能。</font></font></p>
</div>
<div class="sect3">
<h4 id="dom.memory.custom"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.memory.custom"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.memory.custom"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.1。</font><font style="vertical-align: inherit;">自定义内存分配/取消分配功能</font></font></a></h4>
<div class="paragraph">
<p><a id="allocation_function"></a><a id="deallocation_function"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过全局指定的函数分配树结构，树数据和XPath对象的所有内存，这些函数默认为malloc / free。</font><font style="vertical-align: inherit;">您可以使用set_memory_management函数来设置自己的分配函数。</font><font style="vertical-align: inherit;">函数接口与malloc / free的接口相同：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">typedef</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">allocation_function</span><span class="tok-p">)(</span><span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">);</span>
<span class="tok-k">typedef</span> <span class="tok-nf">void</span> <span class="tok-p">(</span><span class="tok-o">*</span><span class="tok-n">deallocation_function</span><span class="tok-p">)(</span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">ptr</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="set_memory_management_functions"></a><a id="get_memory_allocation_function"></a><a id="get_memory_deallocation_function"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以使用以下访问器功能来更改或获取当前的内存管理功能：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">void</span> <span class="tok-nf">set_memory_management_functions</span><span class="tok-p">(</span><span class="tok-n">allocation_function</span> <span class="tok-n">allocate</span><span class="tok-p">,</span> <span class="tok-n">deallocation_function</span> <span class="tok-n">deallocate</span><span class="tok-p">);</span>
<span class="tok-n">allocation_function</span> <span class="tok-nf">get_memory_allocation_function</span><span class="tok-p">();</span>
<span class="tok-n">deallocation_function</span> <span class="tok-nf">get_memory_deallocation_function</span><span class="tok-p">();</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用分配函数时，以大小（以字节为单位）作为参数，并且应返回一个指针，该指针指向具有适合原始类型存储的内存块（通常，最大数量为</font></font><code>void*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>double</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型对齐就足够了），且大小大于或等于要求的值。</font><font style="vertical-align: inherit;">如果分配失败，则该函数必须返回空指针或引发异常。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用一些分配函数调用返回的指针来调用释放函数。</font><font style="vertical-align: inherit;">永远不要使用空指针来调用它。</font><font style="vertical-align: inherit;">如果内存管理功能不是线程安全的，则不能保证库线程安全。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是自定义内存管理的简单示例（</font></font><a href="https://pugixml.org/docs/samples/custom_memory_management.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample / custom_memory_management.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-nf">custom_allocate</span><span class="tok-p">(</span><span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-k">new</span> <span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">nothrow</span><span class="tok-p">)</span> <span class="tok-kt">char</span><span class="tok-p">[</span><span class="tok-n">size</span><span class="tok-p">];</span>
<span class="tok-p">}</span><font></font>
<font></font>
<span class="tok-kt">void</span> <span class="tok-nf">custom_deallocate</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">ptr</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">delete</span><span class="tok-p">[]</span> <span class="tok-k">static_cast</span><span class="tok-o">&lt;</span><span class="tok-kt">char</span><span class="tok-o">*&gt;</span><span class="tok-p">(</span><span class="tok-n">ptr</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">set_memory_management_functions</span><span class="tok-p">(</span><span class="tok-n">custom_allocate</span><span class="tok-p">,</span> <span class="tok-n">custom_deallocate</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置新的内存管理功能时，必须注意确保没有活动的pugixml对象。</font><font style="vertical-align: inherit;">否则，当对象被销毁时，将使用由旧分配函数获得的内存调用新的释放函数，从而导致未定义的行为。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="dom.memory.tuning"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.memory.tuning"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.memory.tuning"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.2。</font><font style="vertical-align: inherit;">内存消耗调整</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml中有几个重要的缓冲优化都依赖于预定义的常量。</font><font style="vertical-align: inherit;">这些常量具有针对常用用法模式进行了调整的默认值。</font><font style="vertical-align: inherit;">对于某些应用程序，更改这些常量可能会改善内存消耗或提高性能。</font><font style="vertical-align: inherit;">不建议更改这些常量，除非它们的默认值导致明显的问题。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以通过配置定义来调整这些常量，如</font></font><a href="https://pugixml.org/docs/manual.html#install.building.config"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他配置选项中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">建议将它们设置为</font></font><code>pugiconfig.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>PUGIXML_MEMORY_PAGE_SIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制用于文档内存分配的页面大小。</font><font style="vertical-align: inherit;">节点/属性对象的内存以指定大小的页面分配。</font><font style="vertical-align: inherit;">默认大小为32 Kb。</font><font style="vertical-align: inherit;">对于某些应用程序，其大小太大（例如，堆空间很小的嵌入式系统或在内存中保留大量XML文档的应用程序）。</font><font style="vertical-align: inherit;">建议最小尺寸为1 Kb。</font></font></p>
</li>
<li>
<p><code>PUGIXML_MEMORY_OUTPUT_STACK</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制输出节点所需的累积堆栈空间。</font><font style="vertical-align: inherit;">出于性能原因，任何输出操作（即，将子树保存到文件）都使用内部缓冲方案。</font><font style="vertical-align: inherit;">默认大小为10 Kb。</font><font style="vertical-align: inherit;">如果使用堆栈空间很小的线程的节点输出，减小此值可以防止堆栈溢出。</font><font style="vertical-align: inherit;">建议最小尺寸为1 Kb。</font></font></p>
</li>
<li>
<p><code>PUGIXML_MEMORY_XPATH_PAGE_SIZE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">控制XPath内存分配的页面大小。</font><font style="vertical-align: inherit;">XPath查询对象的内存以及XPath评估的内部内存在指定大小的页面中分配。</font><font style="vertical-align: inherit;">默认大小为4 Kb。</font><font style="vertical-align: inherit;">如果您有很多常驻XPath查询对象，则可能需要减小大小以提高内存消耗。</font><font style="vertical-align: inherit;">建议最小大小为256个字节。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="dom.memory.internals"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.memory.internals"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.memory.internals"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.3。</font><font style="vertical-align: inherit;">文档内存管理内部</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用默认构造函数构造文档对象不会导致任何分配；</font><font style="vertical-align: inherit;">文档节点存储在</font></font><a href="https://pugixml.org/docs/manual.html#xml_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象中。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从文件/缓冲区加载文档时，除非使用就地加载功能（请参阅</font></font><a href="https://pugixml.org/docs/manual.html#loading.memory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从内存加载文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font><font style="vertical-align: inherit;">否则</font><font style="vertical-align: inherit;">将生成字符流的完整副本；</font><font style="vertical-align: inherit;">否则</font><font style="vertical-align: inherit;">，将生成完整的字符流副本。</font><font style="vertical-align: inherit;">节点和属性的所有名称/值都分配在此缓冲区中。</font><font style="vertical-align: inherit;">该缓冲区是通过单个较大的分配分配的，并且仅在回收文档内存时（即，如果</font></font><a href="https://pugixml.org/docs/manual.html#xml_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象被破坏或在同一对象中加载了另一个文档）</font><font style="vertical-align: inherit;">才释放该缓冲区</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">同样，从文件或流加载时，如果需要编码转换，则可能会执行额外的大分配。</font><font style="vertical-align: inherit;">分配了一个临时缓冲区，并在装入函数返回之前将其释放。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有其他内存，例如用于文档结构（节点/属性对象）的内存和用于节点/属性名称/值的内存，均以32 Kb的顺序在页面中分配；</font><font style="vertical-align: inherit;">使用针对许多小对象的快速分配/取消分配而优化的内存管理方案，可以在页面内部分配实际对象。</font><font style="vertical-align: inherit;">由于方案的特定性，仅当页面中的所有对象都被破坏时，页面才会被破坏；</font><font style="vertical-align: inherit;">同样，通常销毁一个对象并不意味着随后的对象创建将重用相同的内存。</font><font style="vertical-align: inherit;">这意味着可以设计一种使用方案，这将导致内存使用率超出预期；</font><font style="vertical-align: inherit;">一个例子是添加很多节点，然后删除所有偶数节点。</font><font style="vertical-align: inherit;">在此过程中不会回收单个页面。</font><font style="vertical-align: inherit;">但是，这是专门制作出令人不满意的行为的示例。</font></font></p>
</div>
</div>
<div class="sect3">
<h4 id="dom.memory.compact"><a class="anchor" href="https://pugixml.org/docs/manual.html#dom.memory.compact"></a><a class="link" href="https://pugixml.org/docs/manual.html#dom.memory.compact"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3.6.4。</font><font style="vertical-align: inherit;">紧凑模式</font></font></a></h4>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下，节点和属性针对访问效率进行了优化。</font><font style="vertical-align: inherit;">这可能导致它们占用大量内存-对于具有很多节点但内容不多的文档（较短的属性值/节点文本），根据指针大小，文档结构可能比文档本身（例如，在UTF-8模式的64位平台上，文件大小为2.1 Mb的重标记文档可以将2.1 Mb用于文档缓冲区，将8.3 Mb用于文档结构）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果您正在处理大型文档，或者平台受内存限制，并且愿意牺牲内存性能，则可以使用</font></font><code>PUGIXML_COMPACT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define </font><font style="vertical-align: inherit;">编译pugixml </font><font style="vertical-align: inherit;">来激活紧凑模式。</font><font style="vertical-align: inherit;">精简模式使用文档结构的另一种表示形式，该表示形式假定节点和属性之间的引用局部性以优化内存使用。</font><font style="vertical-align: inherit;">结果，您得到的节点/属性对象要小得多。</font><font style="vertical-align: inherit;">通常，大多数文档中的大多数对象不需要额外的存储，但是在最坏的情况下-如果关于引用位置的假设不成立-则会分配额外的内存来存储所需的额外数据。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">紧凑型存储以相同的摊销复杂性支持所有现有操作（包括树修改）（也就是说，所有基本文档操作平均仍为O（1））。</font><font style="vertical-align: inherit;">操作稍微慢一些；</font><font style="vertical-align: inherit;">您通常可以预期处理时间会降低10-50％，除非您的处理受内存限制。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在32位体系结构上，紧凑模式下的文档结构通常减少约2.5倍；</font><font style="vertical-align: inherit;">在64位架构上，该比率约为5倍。</font><font style="vertical-align: inherit;">因此，对于标记量大的文档，紧凑模式可以使完全从RAM运行的多千兆位文档的处理与需要交换到磁盘之间产生区别。</font><font style="vertical-align: inherit;">即使文档适合内存，紧凑型存储也可以占用更少的空间并减少缓存/ TLB丢失，从而更有效地使用CPU缓存。</font></font></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="loading"><a class="anchor" href="https://pugixml.org/docs/manual.html#loading"></a><a class="link" href="https://pugixml.org/docs/manual.html#loading"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.载入文件</font></font></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml提供了几种从不同位置加载XML数据的功能-文件，C ++ iostream，内存缓冲区。</font><font style="vertical-align: inherit;">所有函数都使用非常快速的非验证解析器。</font><font style="vertical-align: inherit;">此解析器不完全符合W3C规范-它可以加载任何有效的XML文档，但不执行某些格式正确的检查。</font><font style="vertical-align: inherit;">尽管已做出很大的努力来拒绝无效的XML文档，但出于性能原因，并未执行某些验证。</font><font style="vertical-align: inherit;">另外，某些XML转换（即EOL处理或属性值规范化）也会影响解析速度，因此可以禁用。</font><font style="vertical-align: inherit;">但是，对于大多数XML文档而言，不同的解析选项之间没有性能差异。</font><font style="vertical-align: inherit;">解析选项还控制是否解析某些XML节点。</font><font style="vertical-align: inherit;">有关更多信息，</font><font style="vertical-align: inherit;">请参见</font></font><a href="https://pugixml.org/docs/manual.html#loading.options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析选项</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析之前，</font><font style="vertical-align: inherit;">XML数据始终会转换为内部字符格式（请参见</font></font><a href="https://pugixml.org/docs/manual.html#dom.unicode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unicode接口</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">pugixml支持所有流行的Unicode编码（UTF-8，UTF-16（大和小尾数），UTF-32（大和小尾数）；自然支持UCS-2，因为它是UTF-16的严格子集）以及某些非Unicode编码（Latin-1），并自动处理所有编码转换。</font><font style="vertical-align: inherit;">除非指定了显式编码，否则加载功能将基于源XML数据执行自动编码检测，因此在大多数情况下，您不必指定文档编码。</font><font style="vertical-align: inherit;">编码转换在</font></font><a href="https://pugixml.org/docs/manual.html#loading.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中有更详细的描述</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect2">
<h3 id="loading.file"><a class="anchor" href="https://pugixml.org/docs/manual.html#loading.file"></a><a class="link" href="https://pugixml.org/docs/manual.html#loading.file"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.1。</font><font style="vertical-align: inherit;">从文件加载文档</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_document::load_file"></a><a id="xml_document::load_file_wide"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
XML数据最常见的来源是文件。</font><font style="vertical-align: inherit;">pugixml提供了用于从文件加载XML文档的专用功能：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">load_file</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span>
<span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">load_file</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">wchar_t</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些函数接受文件路径作为其第一个参数，以及两个可选参数，它们指定解析选项（请参阅</font></font><a href="https://pugixml.org/docs/manual.html#loading.options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析选项</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和输入数据编码（请参阅</font></font><a href="https://pugixml.org/docs/manual.html#loading.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encodings</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">该路径具有目标操作系统格式，因此它可以是相对格式或绝对格式，它应具有目标系统的定界符，如果目标文件系统区分大小写，则应具有正确的大小写，等等。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与第一个函数（接受</font></font><code>const char* path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）一样，</font><font style="vertical-align: inherit;">文件路径传递给系统文件打开函数</font><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">如果运行库提供了第二个功能，则第二个功能将使用特殊的文件打开功能，或者将路径转换为UTF-8并使用系统文件打开功能。</font></font></p>
</div>
<div class="paragraph">
<p><code>load_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">销毁现有文档树，然后尝试从指定文件加载新树。</font><font style="vertical-align: inherit;">操作结果在</font></font><a href="https://pugixml.org/docs/manual.html#xml_parse_result"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_parse_result</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象中</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">该对象包含操作状态和相关信息（即，如果解析失败，则在输入文件中最后成功解析的位置）。</font><font style="vertical-align: inherit;">有关</font><font style="vertical-align: inherit;">错误处理的详细信息，</font><font style="vertical-align: inherit;">请参见</font></font><a href="https://pugixml.org/docs/manual.html#loading.errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理解析错误</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个从文件（</font></font><a href="https://pugixml.org/docs/samples/load_file.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / load_file.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">加载XML文档的</font><a href="https://pugixml.org/docs/samples/load_file.cpp" class="bare"><font style="vertical-align: inherit;">示例</font></a><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span> <span class="tok-n">doc</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_parse_result</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_file</span><span class="tok-p">(</span><span class="tok-s">"tree.xml"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Load result: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">description</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", mesh name: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"mesh"</span><span class="tok-p">).</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"name"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="loading.memory"><a class="anchor" href="https://pugixml.org/docs/manual.html#loading.memory"></a><a class="link" href="https://pugixml.org/docs/manual.html#loading.memory"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.2。</font><font style="vertical-align: inherit;">从内存加载文档</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_document::load_buffer"></a><a id="xml_document::load_buffer_inplace"></a><a id="xml_document::load_buffer_inplace_own"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有时应该从文件以外的其他来源加载XML数据，例如HTTP URL。</font><font style="vertical-align: inherit;">您也可能希望使用非标准功能从文件加载XML数据，即使用虚拟文件系统工具或从GZip压缩文件加载XML。</font><font style="vertical-align: inherit;">所有这些情况都需要从内存中加载文档。</font><font style="vertical-align: inherit;">首先，您应该准备一个包含所有XML数据的连续内存块；</font><font style="vertical-align: inherit;">那么您必须调用缓冲区加载功能之一。</font><font style="vertical-align: inherit;">这些函数将处理必要的编码转换（如果有），然后将数据解析到相应的XML树中。</font><font style="vertical-align: inherit;">有几种缓冲区加载功能，它们的行为不同，因此在性能/内存使用方面也不同：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">load_buffer</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span>
<span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">load_buffer_inplace</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span>
<span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">load_buffer_inplace_own</span><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有函数都接受该缓冲区，该缓冲区由指向XML数据的指针</font></font><code>contents</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和数据大小（以字节为单位）表示。</font><font style="vertical-align: inherit;">另外，还有两个可选参数，它们指定解析选项（请参阅</font></font><a href="https://pugixml.org/docs/manual.html#loading.options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析选项</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和输入数据编码（请参阅</font></font><a href="https://pugixml.org/docs/manual.html#loading.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encodings</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">缓冲区不必为零终止。</font></font></p>
</div>
<div class="paragraph">
<p><code>load_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数与不可变缓冲区一起使用-永远不会修改缓冲区。</font><font style="vertical-align: inherit;">由于此限制，它必须创建一个专用缓冲区并在解析之前将XML数据复制到该缓冲区（如有必要，应用编码转换）。</font><font style="vertical-align: inherit;">此复制操作会降低性能，因此提供了inplace功能- </font></font><code>load_buffer_inplace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并将</font></font><code>load_buffer_inplace_own</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档数据存储在缓冲区中，并在此过程中对其进行了修改。</font><font style="vertical-align: inherit;">为了使文档保持有效，如果使用Inplace函数，则必须确保缓冲区的生存期超过树的生存期。</font><font style="vertical-align: inherit;">除此之外，</font></font><code>load_buffer_inplace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">它不承担缓冲区的所有权，因此您必须自己销毁它；</font></font><code>load_buffer_inplace_own</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">承担缓冲区的所有权，并在不需要缓冲区时将其销毁。</font><font style="vertical-align: inherit;">这意味着如果您正在使用</font></font><code>load_buffer_inplace_own</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，您必须使用pugixml分配函数分配内存（您可以通过</font></font><a href="https://pugixml.org/docs/manual.html#get_memory_allocation_function"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">get_memory_allocation_function</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获得它</font><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从性能/内存的角度来看，最好的方法是使用</font></font><code>load_buffer_inplace_own</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">加载文档</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此功能最大程度地控制了XML数据缓冲区，因此能够避免冗余副本并减少解析时的峰值内存使用量。</font><font style="vertical-align: inherit;">如果您必须从内存中加载文档并且性能至关重要，则建议使用此功能。</font></font></p>
</div>
<div id="xml_document::load_string" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还有一个简单的帮助器函数，用于当您要从以null终止的字符串加载XML文档时的情况：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据字符类型的不同，</font><font style="vertical-align: inherit;">它等效于</font></font><code>load_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>size</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或者</font></font><code>strlen(contents)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">进行调用</font></font><code>wcslen(contents) * sizeof(wchar_t)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">此函数假定输入数据为本地编码，因此不执行任何编码转换。</font><font style="vertical-align: inherit;">通常，此功能适合从字符串文字中加载小文档，但与缓冲区加载功能相比，具有更多的开销和更少的功能。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是使用不同功能（</font></font><a href="https://pugixml.org/docs/samples/load_memory.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / load_memory.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">从内存中加载XML文档的示例</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-kt">char</span> <span class="tok-n">source</span><span class="tok-p">[]</span> <span class="tok-o">=</span> <span class="tok-s">"&lt;mesh name='sphere'&gt;&lt;bounds&gt;0 0 1 1&lt;/bounds&gt;&lt;/mesh&gt;"</span><span class="tok-p">;</span>
<span class="tok-kt">size_t</span> <span class="tok-n">size</span> <span class="tok-o">=</span> <span class="tok-k">sizeof</span><span class="tok-p">(</span><span class="tok-n">source</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// You can use load_buffer to load document from immutable memory block:</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_parse_result</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_buffer</span><span class="tok-p">(</span><span class="tok-n">source</span><span class="tok-p">,</span> <span class="tok-n">size</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// You can use load_buffer_inplace to load document from mutable memory block; the block's lifetime must exceed that of document</span>
<span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">buffer</span> <span class="tok-o">=</span> <span class="tok-k">new</span> <span class="tok-kt">char</span><span class="tok-p">[</span><span class="tok-n">size</span><span class="tok-p">];</span>
<span class="tok-n">memcpy</span><span class="tok-p">(</span><span class="tok-n">buffer</span><span class="tok-p">,</span> <span class="tok-n">source</span><span class="tok-p">,</span> <span class="tok-n">size</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// The block can be allocated by any method; the block is modified during parsing</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_parse_result</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_buffer_inplace</span><span class="tok-p">(</span><span class="tok-n">buffer</span><span class="tok-p">,</span> <span class="tok-n">size</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// You have to destroy the block yourself after the document is no longer used</span>
<span class="tok-k">delete</span><span class="tok-p">[]</span> <span class="tok-n">buffer</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// You can use load_buffer_inplace_own to load document from mutable memory block and to pass the ownership of this block</span>
<span class="tok-c1">// The block has to be allocated via pugixml allocation function - using i.e. operator new here is incorrect</span>
<span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">buffer</span> <span class="tok-o">=</span> <span class="tok-k">static_cast</span><span class="tok-o">&lt;</span><span class="tok-kt">char</span><span class="tok-o">*&gt;</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">get_memory_allocation_function</span><span class="tok-p">()(</span><span class="tok-n">size</span><span class="tok-p">));</span>
<span class="tok-n">memcpy</span><span class="tok-p">(</span><span class="tok-n">buffer</span><span class="tok-p">,</span> <span class="tok-n">source</span><span class="tok-p">,</span> <span class="tok-n">size</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// The block will be deleted by the document</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_parse_result</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_buffer_inplace_own</span><span class="tok-p">(</span><span class="tok-n">buffer</span><span class="tok-p">,</span> <span class="tok-n">size</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// You can use load to load document from null-terminated strings, for example literals:</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_parse_result</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-s">"&lt;mesh name='sphere'&gt;&lt;bounds&gt;0 0 1 1&lt;/bounds&gt;&lt;/mesh&gt;"</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="loading.stream"><a class="anchor" href="https://pugixml.org/docs/manual.html#loading.stream"></a><a class="link" href="https://pugixml.org/docs/manual.html#loading.stream"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.3。</font><font style="vertical-align: inherit;">从C ++ IOstreams加载文档</font></font></a></h3>
<div id="xml_document::load_stream" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了增强互操作性，pugixml提供了用于从实现C ++ </font></font><code>std::istream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口的</font><font style="vertical-align: inherit;">任何对象中加载文档的功能</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这使您可以从任何标准C ++流（即文件流）或任何第三方兼容的实现（即Boost Iostreams）中加载文档。</font><font style="vertical-align: inherit;">有两种功能，一种用于窄字符流，另一种用于宽字符流：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">load</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">istream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span>
<span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">load</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wistream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with </font></font><code>std::istream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数将文档从当前读取位置的数据流加载到数据流的末尾，并将数据流内容视为指定编码的字节流（必要时进行编码自动检测）。</font><font style="vertical-align: inherit;">因此</font></font><code>xml_document::load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在打开的</font></font><code>std::ifstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象上调用等效于</font></font><code>xml_document::load_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><code>load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with </font></font><code>std::wstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数将流内容视为宽字符流（编码始终为</font></font><a href="https://pugixml.org/docs/manual.html#encoding_wchar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encoding_wchar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">因此，要使用</font></font><code>load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宽字符流，需要进行仔细的（通常是特定于平台的）流设置（即使用</font></font><code>imbue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能）。</font><font style="vertical-align: inherit;">通常不建议使用宽流，但是它提供了从非Unicode编码加载文档的功能，即，如果设置了正确的语言环境，则可以加载Shift-JIS编码的数据。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个使用流（</font></font><a href="https://pugixml.org/docs/samples/load_stream.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / load_stream.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">从文件中加载XML文档的简单示例</font><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">阅读示例代码以获取涉及广泛流和语言环境的更复杂示例：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">ifstream</span> <span class="tok-n">stream</span><span class="tok-p">(</span><span class="tok-s">"weekly-utf-8.xml"</span><span class="tok-p">);</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_parse_result</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load</span><span class="tok-p">(</span><span class="tok-n">stream</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="loading.errors"><a class="anchor" href="https://pugixml.org/docs/manual.html#loading.errors"></a><a class="link" href="https://pugixml.org/docs/manual.html#loading.errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.4。</font><font style="vertical-align: inherit;">处理解析错误</font></font></a></h3>
<div id="xml_parse_result" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有文档加载功能都通过</font></font><code>xml_parse_result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">返回解析结果</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它包含解析状态，上次成功解析的字符与源流开头之间的偏移量以及源流的编码：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">struct</span> <span class="tok-n">xml_parse_result</span>
<span class="tok-p">{</span>
    <span class="tok-n">xml_parse_status</span> <span class="tok-n">status</span><span class="tok-p">;</span>
    <span class="tok-kt">ptrdiff_t</span> <span class="tok-n">offset</span><span class="tok-p">;</span>
    <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">operator</span> <span class="tok-nf">bool</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-nf">description</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-p">};</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="xml_parse_status"></a><a id="xml_parse_result::status"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
解析状态表示为</font></font><code>xml_parse_status</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举，可以是以下之一：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="status_ok"></a><code>status_ok</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示在解析过程中没有遇到错误；</font><font style="vertical-align: inherit;">源流表示已完全解析并转换为树的有效XML文档。</font></font></p>
</li>
<li>
<p><a id="status_file_not_found"></a><code>status_file_not_found</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅由</font></font><code>load_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">，表示无法打开文件。</font></font></p>
</li>
<li>
<p><a id="status_io_error"></a><code>status_io_error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由</font></font><code>load_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数和</font></font><code>load</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有</font></font><code>std::istream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>std::wstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">这意味着在读取文件/流期间发生了一些I / O错误。</font></font></p>
</li>
<li>
<p><a id="status_out_of_memory"></a><code>status_out_of_memory</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着在分配过程中没有足够的内存；</font><font style="vertical-align: inherit;">解析过程中任何分配失败都会导致此错误。</font></font></p>
</li>
<li>
<p><a id="status_internal_error"></a><code>status_internal_error</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着出了什么问题了；</font><font style="vertical-align: inherit;">目前不会发生此错误</font></font></p>
</li>
<li>
<p><a id="status_unrecognized_tag"></a><code>status_unrecognized_tag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示由于标签名称为空或以不正确的字符开头的名称而导致解析停止</font></font><code>#</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><a id="status_bad_pi"></a><code>status_bad_pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 表示由于文档声明/处理指令不正确而导致解析停止</font></font></p>
</li>
<li>
<p><a id="status_bad_comment"></a><code>status_bad_comment</code>, <a id="status_bad_cdata"></a><code>status_bad_cdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">, </font></font><a id="status_bad_doctype"></a><code>status_bad_doctype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 和 </font></font><a id="status_bad_pcdata"></a><code>status_bad_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 表示由于相应类型的无效构造而停止了解析</font></font></p>
</li>
<li>
<p><a id="status_bad_start_element"></a><code>status_bad_start_element</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示由于起始标签没有结束</font></font><code>&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符号或包含一些不正确的符号</font><font style="vertical-align: inherit;">，所以分析停止了</font></font></p>
</li>
<li>
<p><a id="status_bad_attribute"></a><code>status_bad_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示由于存在不正确的属性而停止了解析，例如，属性不带值或值未加引号（请注意，</font></font><code>&lt;node attr=1&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在XML中不正确）</font></font></p>
</li>
<li>
<p><a id="status_bad_end_element"></a><code>status_bad_end_element</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示由于结尾标记的语法不正确（例如，标记名和之间的多余的非空白符号</font></font><code>&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">，分析已停止</font></font></p>
</li>
<li>
<p><a id="status_end_element_mismatch"></a><code>status_end_element_mismatch</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示分析停止是因为结束标记与开始标记不匹配（即</font></font><code>&lt;node&gt;&lt;/nedo&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），或者因为某些标记根本没有关闭</font></font></p>
</li>
<li>
<p><a id="status_no_document_element"></a><code>status_no_document_element</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示在解析过程中未发现任何元素节点；</font><font style="vertical-align: inherit;">这通常表示文件为空或无效</font></font></p>
</li>
</ul>
</div>
<div id="xml_parse_result::description" class="paragraph">
<p><code>description()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员函数可用于将解析状态转换为字符串；</font><font style="vertical-align: inherit;">返回的消息始终为英文，因此如果需要本地化的字符串，则必须编写自己的函数。</font><font style="vertical-align: inherit;">但是，请注意，</font></font><code>description()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">返回的确切消息</font><font style="vertical-align: inherit;">可能因版本而异，因此任何复杂的状态处理都应基于</font></font><code>status</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">请注意，</font><font style="vertical-align: inherit;">即使在</font><font style="vertical-align: inherit;">;中</font><font style="vertical-align: inherit;">也</font></font><code>description()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个</font></font><code>char</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font></font><code>PUGIXML_WCHAR_MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您必须调用</font></font><a href="https://pugixml.org/docs/manual.html#as_wide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as_wide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来获取</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果由于源数据不是有效的XML而导致解析失败，则不会破坏生成的树-尽管加载函数返回错误，您仍可以使用树中已成功解析的部分。</font><font style="vertical-align: inherit;">显然，最后一个元素可能具有意外的名称/值；</font><font style="vertical-align: inherit;">例如，如果属性值不具有必要的引号结束，像在</font></font><code>&lt;node attr="value&gt;some data&lt;/node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实例中，属性的值</font></font><code>attr</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将包含字符串</font></font><code>value&gt;some data&lt;/node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div id="xml_parse_result::offset" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了状态码之外，解析结果还</font></font><code>offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font><font style="vertical-align: inherit;">一个</font><font style="vertical-align: inherit;">成员，该成员包含由于源数据错误而导致解析失败时最后成功解析的字符的偏移量。</font></font><code>offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出于解析效率的考虑，pugixml在解析过程中不跟踪当前行；</font><font style="vertical-align: inherit;">否则</font><font style="vertical-align: inherit;">，返回0。</font><font style="vertical-align: inherit;">此偏移量以</font></font><a href="https://pugixml.org/docs/manual.html#char_t"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugi :: char_t</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为单位</font><font style="vertical-align: inherit;">（字符模式为字节，宽字符模式为宽字符）。</font><font style="vertical-align: inherit;">许多文本编辑器支持“转到位置”功能-您可以使用它来定位确切的错误位置。</font><font style="vertical-align: inherit;">另外，如果要从内存中加载文档，则可以显示错误块以及错误描述（请参见下面的示例代码）。</font></font></p>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
偏移量以本机编码在XML缓冲区中计算；</font><font style="vertical-align: inherit;">如果在解析过程中执行了编码转换，则偏移不能用于可靠地跟踪错误位置。
</font></font></td>
</tr>
</tbody></table>
</div>
<div id="xml_parse_result::encoding" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析结果还具有一个</font></font><code>encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员，该成员可用于检查是否正确猜测了源数据编码。</font><font style="vertical-align: inherit;">它等于解析期间使用的精确编码（即具有精确的字节序）；</font><font style="vertical-align: inherit;">有关更多信息，</font><font style="vertical-align: inherit;">请参见</font></font><a href="https://pugixml.org/docs/manual.html#loading.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div id="xml_parse_result::bool" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析结果对象可以隐式转换为</font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">如果你不想处理彻底解析错误，你可以检查负载函数的返回值，如果它是一个</font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>if (doc.load_file("file.xml")) { …​ } else { …​ }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是处理加载错误的示例（</font></font><a href="https://pugixml.org/docs/samples/load_error_handling.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / load_error_handling.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span> <span class="tok-n">doc</span><span class="tok-p">;</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_parse_result</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-n">source</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">result</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"XML ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">source</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"] parsed without errors, attr value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">).</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"attr"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"]</span><span class="tok-se">\n\n</span><span class="tok-s">"</span><span class="tok-p">;</span>
<span class="tok-p">}</span>
<span class="tok-k">else</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"XML ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">source</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"] parsed with errors, attr value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">).</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"attr"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"]</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Error description: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">description</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Error offset: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">offset</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">" (error at [..."</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-p">(</span><span class="tok-n">source</span> <span class="tok-o">+</span> <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">offset</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"]</span><span class="tok-se">\n\n</span><span class="tok-s">"</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="loading.options"><a class="anchor" href="https://pugixml.org/docs/manual.html#loading.options"></a><a class="link" href="https://pugixml.org/docs/manual.html#loading.options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.5。</font><font style="vertical-align: inherit;">解析选项</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有文档加载功能均接受可选参数</font></font><code>options</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是一个自定义解析过程的位掩码：您可以选择要解析的节点类型以及使用XML文本执行的各种转换。</font><font style="vertical-align: inherit;">禁用某些转换可以提高某些文档的解析性能。</font><font style="vertical-align: inherit;">但是，所有转换的代码都得到了很好的优化，因此大多数文档都不会获得任何性能上的好处。</font><font style="vertical-align: inherit;">根据经验，仅当您要获取默认情况下不包含在文档中的某些节点（即声明或注释节点）时，才修改解析标志。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您应该使用通常的按位算术来操作位掩码：要启用标志，请使用</font></font><code>mask | flag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">要禁用标志，请使用</font></font><code>mask &amp; ~flag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些标志控制结果树的内容：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="parse_declaration"></a><code>parse_declaration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否将XML文档声明（类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_declaration的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点</font><font style="vertical-align: inherit;">）放入DOM树。</font><font style="vertical-align: inherit;">如果关闭此标志，则不会将其放入树中，但仍会对其进行分析并检查其正确性。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_doctype"></a><code>parse_doctype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否将XML文档类型声明（类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_doctype"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_doctype的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点</font><font style="vertical-align: inherit;">）放入DOM树。</font><font style="vertical-align: inherit;">如果关闭此标志，则不会将其放入树中，但仍会对其进行分析并检查其正确性。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_pi"></a><code>parse_pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否将处理指令（类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_pi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pi的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点</font><font style="vertical-align: inherit;">）放入DOM树。</font><font style="vertical-align: inherit;">如果关闭此标志，则不会将其放入树中，但仍会对其进行分析并检查其正确性。</font><font style="vertical-align: inherit;">请注意，</font></font><code>&lt;?xml …​?&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（文档声明）不被视为PI。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_comments"></a><code>parse_comments</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否将注释（类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_comment的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点</font><font style="vertical-align: inherit;">）放入DOM树。</font><font style="vertical-align: inherit;">如果关闭此标志，则不会将其放入树中，但仍会对其进行分析并检查其正确性。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_cdata"></a><code>parse_cdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否将CDATA节（类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_cdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_cdata的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点</font><font style="vertical-align: inherit;">）放入DOM树。</font><font style="vertical-align: inherit;">如果关闭此标志，则不会将其放入树中，但仍会对其进行分析并检查其正确性。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_trim_pcdata"></a><code>parse_trim_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否要从PCDATA节点中删除前导和尾随空格字符。</font><font style="vertical-align: inherit;">尽管对于某些应用程序而言，前导/尾随空格很重要，但通常应用程序只关心非空格内容，因此在解析过程中更容易从文本中裁剪空格。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_ws_pcdata"></a><code>parse_ws_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否</font><font style="vertical-align: inherit;">仅将由空格字符组成的</font><font style="vertical-align: inherit;">PCDATA节点（类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pcdata的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点</font><font style="vertical-align: inherit;">）放置在DOM树中。</font><font style="vertical-align: inherit;">通常，仅空格数据对于应用程序而言并不重要，并且分配和存储此类节点（包括内存和速度方面）的成本可能很高。</font><font style="vertical-align: inherit;">例如，在解析XML字符串之后</font></font><code>&lt;node&gt; &lt;a/&gt; &lt;/node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&lt;node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font><code>parse_ws_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">元素时</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">element将具有三个子元素</font><font style="vertical-align: inherit;">（具有</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pcdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和value </font><font style="vertical-align: inherit;">类型的子</font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;">元素</font></a></font><code>" "</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，具有</font></font><a href="https://pugixml.org/docs/manual.html#node_element"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_element</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和name </font></font><code>"a"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型的子</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">元素</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font><font style="vertical-align: inherit;">具有</font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;">node_pcdata</font></a><font style="vertical-align: inherit;">和value </font><font style="vertical-align: inherit;">类型的另一个子</font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;">元素</font></a></font><code>" "</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font></font><code>parse_ws_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而未设置</font><font style="vertical-align: inherit;">时只有一个子</font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;">元素</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_ws_pcdata_single"></a><code>parse_ws_pcdata_single</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否将没有兄弟节点的纯空白PCDATA节点放置在DOM树中。</font><font style="vertical-align: inherit;">在某些情况下，应用程序需要解析节点的纯空白内容，即</font></font><code>&lt;node&gt;  &lt;/node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，但对其他地方的空白标记不感兴趣。</font><font style="vertical-align: inherit;">在这种情况下</font><font style="vertical-align: inherit;">可以使用</font></font><a href="https://pugixml.org/docs/manual.html#parse_ws_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_ws_pcdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志，但这会导致过多的分配并使文档处理变得复杂；</font><font style="vertical-align: inherit;">这个标志可以用来避免这种情况。</font><font style="vertical-align: inherit;">例如，解析</font></font><code>&lt;node&gt; &lt;a&gt;  &lt;/a&gt; &lt;/node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有</font></font><code>parse_ws_pcdata_single</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志集的</font><font style="vertical-align: inherit;">XML字符串后</font><font style="vertical-align: inherit;">，</font></font><code>&lt;node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">element将有一个子代</font></font><code>&lt;a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&lt;a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">element将有一个子</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">其类型为</font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;">node_pcdata</font></a><font style="vertical-align: inherit;">和value </font></font><code>"  "</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font><font style="vertical-align: inherit;">启用</font></font><a href="https://pugixml.org/docs/manual.html#parse_ws_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_ws_pcdata，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">此标志无效</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_embed_pcdata"></a><code>parse_embed_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否将PCDATA内容保存为元素值。</font><font style="vertical-align: inherit;">通常，元素节点具有名称，但没有值。</font><font style="vertical-align: inherit;">如果PCDATA是元素节点的第一个子节点，则此标志将强制解析器将内容存储为值（否则将照常创建PCDATA节点）。</font><font style="vertical-align: inherit;">这可以大大减少具有许多PCDATA节点的文档所需的内存。</font><font style="vertical-align: inherit;">要检索数据，可以</font></font><code>xml_node::value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在元素节点或任何更高级别的函数（例如</font></font><code>child_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或）上使用</font></font><code>text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font><font style="vertical-align: inherit;">由于此标志会显着更改DOM结构，因此仅建议在内存受限的环境中分析具有许多PCDATA节点的文档。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_fragment"></a><code>parse_fragment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否应将文档视为有效XML的片段。</font><font style="vertical-align: inherit;">将文档作为片段进行解析会导致将顶级PCDATA内容（即，不在节点内部的文本）添加到树中，并且还会将没有元素节点的文档视为有效。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果缓冲区是PCDATA的一部分，则</font><font style="vertical-align: inherit;">使用带有</font><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">
的就地解析（</font></font><a href="https://pugixml.org/docs/manual.html#xml_document::load_buffer_inplace"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">load_buffer_inplace</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font><code>parse_fragment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可能会导致缓冲区的最后一个字符丢失。</font><font style="vertical-align: inherit;">由于PCDATA值是空终止字符串，来解决这个问题的唯一方法是提供一个空终止缓冲作为输入</font></font><code>load_buffer_inplace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-即</font></font><code>doc.load_buffer_inplace("test\0", 5, pugi::parse_default | pugi::parse_fragment)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些标志控制树元素内容的转换：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="parse_escapes"></a><code>parse_escapes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定在解析过程中是否要扩展字符和实体引用。</font><font style="vertical-align: inherit;">字符引用的形式为</font></font><code>&amp;#…​;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>&amp;#x…​;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code>…​</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在用十进制字符的Unicode数字表示（</font></font><code>&amp;#…​;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或十六进制（</font></font><code>&amp;#x…​;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的形式），实体引用</font></font><code>&amp;lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&amp;gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&amp;amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&amp;apos;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>&amp;quot;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（注意，由于pugixml不处理DTD，只允许实体预定义的） 。</font><font style="vertical-align: inherit;">如果无法扩展字符/实体引用，则将其保留不变，因此您以后可以进行其他处理。</font><font style="vertical-align: inherit;">对属性值和PCDATA内容执行参考扩展。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_eol"></a><code>parse_eol</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否</font><font style="vertical-align: inherit;">要对输入数据（即注释内容，PCDATA / CDATA内容和属性值）执行</font><font style="vertical-align: inherit;">EOL处理（即，用</font></font><code>\r\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单个</font></font><code>\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font><font style="vertical-align: inherit;">替换序列</font><font style="vertical-align: inherit;">，并用替换所有独立</font></font><code>\r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符</font></font><code>\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_wconv_attribute"></a><code>parse_wconv_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否应对所有属性执行属性值规范化。</font><font style="vertical-align: inherit;">这意味着，空白字符（换行符，制表符和空格）将替换为空格（</font></font><code>' '</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">始终将</font></font><a href="https://pugixml.org/docs/manual.html#parse_eol"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">换行符视为</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已设置</font><a href="https://pugixml.org/docs/manual.html#parse_eol"><font style="vertical-align: inherit;">parse_eol</font></a><font style="vertical-align: inherit;">，</font></font><code>\r\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即将其转换为单个空格。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="parse_wnorm_attribute"></a><code>parse_wnorm_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否应对所有属性执行扩展属性值规范化。</font><font style="vertical-align: inherit;">这意味着，在将属性值标准化之后，</font></font><a href="https://pugixml.org/docs/manual.html#parse_wconv_attribute"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">就像</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">设置</font><a href="https://pugixml.org/docs/manual.html#parse_wconv_attribute"><font style="vertical-align: inherit;">parse_wconv_attribute一样</font></a><font style="vertical-align: inherit;">，将删除前导和尾随空格字符，并将所有空格字符序列替换为单个空格字符。</font><font style="vertical-align: inherit;">如果打开此标志，则</font></font><a href="https://pugixml.org/docs/manual.html#parse_wconv_attribute"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_wconv_attribute</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无效。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content">
<code>parse_wconv_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该选项执行W3C规范要求的声明为CDATA的属性的转换；</font></font><a href="https://pugixml.org/docs/manual.html#parse_wnorm_attribute"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_wnorm_attribute</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">执行NMTOKENS属性所需的转换。</font><font style="vertical-align: inherit;">在没有文档类型声明的情况下，所有属性的行为都应像声明为CDATA一样，因此</font></font><a href="https://pugixml.org/docs/manual.html#parse_wconv_attribute"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_wconv_attribute</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是默认选项。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，还有三个预定义的选项掩码：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="parse_minimal"></a><code>parse_minimal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭了所有选项。</font><font style="vertical-align: inherit;">此选项掩码表示pugixml不会在结果树中添加声明节点，文档类型声明节点，PI节点，CDATA节和注释，也不会对输入数据执行任何转换，因此从理论上讲，这是最快的模式。</font><font style="vertical-align: inherit;">但是，如上所述，实际上</font></font><a href="https://pugixml.org/docs/manual.html#parse_default"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_default</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常同样快。</font></font></p>
</li>
<li>
<p><a id="parse_default"></a><code>parse_default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是默认的标志集，即它具有将所有选项设置为其默认值的功能。</font><font style="vertical-align: inherit;">它包括解析CDATA节（不解析注释/ PI），执行字符和实体引用扩展，用属性值中的空格替换空白字符以及执行EOL处理。</font><font style="vertical-align: inherit;">请注意，出于性能原因，不会解析（默认情况下）仅由空格字符组成的PCDATA节。</font></font></p>
</li>
<li>
<p><a id="parse_full"></a><code>parse_full</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一组标志，它将所有类型的节点添加到结果树中，并执行输入数据的默认转换。</font><font style="vertical-align: inherit;">它包括解析CDATA节，注释，PI节点，文档声明节点和文档类型声明节点，执行字符和实体引用扩展，用属性值中的空格替换空白字符以及执行EOL处理。</font><font style="vertical-align: inherit;">注意，在此模式下不会解析仅由空格字符组成的PCDATA节。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个使用不同的解析选项（</font></font><a href="https://pugixml.org/docs/samples/load_options.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample / load_options.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><a href="https://pugixml.org/docs/samples/load_options.cpp" class="bare"><font style="vertical-align: inherit;">示例</font></a><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">source</span> <span class="tok-o">=</span> <span class="tok-s">"&lt;!--comment--&gt;&lt;node&gt;&amp;lt;&lt;/node&gt;"</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// Parsing with default options; note that comment node is not added to the tree, and entity reference &amp;lt; is expanded</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-n">source</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"First node value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">().</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"], node child value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child_value</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"]</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// Parsing with additional parse_comments option; comment node is now added to the tree</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-n">source</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">parse_default</span> <span class="tok-o">|</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">parse_comments</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"First node value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">().</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"], node child value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child_value</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"]</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// Parsing with additional parse_comments option and without the (default) parse_escapes option; &amp;lt; is not expanded</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-n">source</span><span class="tok-p">,</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">parse_default</span> <span class="tok-o">|</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">parse_comments</span><span class="tok-p">)</span> <span class="tok-o">&amp;</span> <span class="tok-o">~</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">parse_escapes</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"First node value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">().</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"], node child value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child_value</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"]</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// Parsing with minimal option mask; comment node is not added to the tree, and &amp;lt; is not expanded</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-n">source</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">parse_minimal</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"First node value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">().</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"], node child value: ["</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child_value</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"]</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="loading.encoding"><a class="anchor" href="https://pugixml.org/docs/manual.html#loading.encoding"></a><a class="link" href="https://pugixml.org/docs/manual.html#loading.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.6。</font><font style="vertical-align: inherit;">编码方式</font></font></a></h3>
<div id="xml_encoding" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml支持所有流行的Unicode编码（UTF-8，UTF-16（大和小尾数），UTF-32（大和小尾数）；自然支持UCS-2，因为它是UTF-16的严格子集）以及一些非Unicode编码（Latin-1），并处理所有编码转换。</font><font style="vertical-align: inherit;">大多数加载函数接受可选参数</font></font><code>encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是枚举类型的值</font></font><code>xml_encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，可以具有以下值：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="encoding_auto"></a><code>encoding_auto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着pugixml将尝试基于源XML数据猜测编码。</font><font style="vertical-align: inherit;">该算法是</font></font><a href="http://www.w3.org/TR/REC-xml/#sec-guessing"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML建议附录F中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提出的算法的修改版本</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它首先尝试找到一种受支持的编码的字节顺序标记。</font><font style="vertical-align: inherit;">如果失败，它将检查输入数据的前几个字节是否看起来像</font><font style="vertical-align: inherit;">UTF-16或UTF-32变体</font><font style="vertical-align: inherit;">的表示形式</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>&lt;?</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其中之一；</font><font style="vertical-align: inherit;">如果同样失败，则假定编码为UTF-8或非Unicode编码之一-为了做出最终决定，算法尝试解析</font></font><code>encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XML文档声明</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">属性，如果文档声明不存在或未指定受支持的编码。</font></font></p>
</li>
<li>
<p><a id="encoding_utf8"></a><code>encoding_utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于Unicode标准中定义的UTF-8编码；</font><font style="vertical-align: inherit;">长度等于5或6的UTF-8序列不是标准的，将被拒绝。</font></font></p>
</li>
<li>
<p><a id="encoding_utf16_le"></a><code>encoding_utf16_le</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于Unicode标准中定义的小尾数UTF-16编码；</font><font style="vertical-align: inherit;">支持代理对。</font></font></p>
</li>
<li>
<p><a id="encoding_utf16_be"></a><code>encoding_utf16_be</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于Unicode标准中定义的big-endian UTF-16编码；</font><font style="vertical-align: inherit;">支持代理对。</font></font></p>
</li>
<li>
<p><a id="encoding_utf16"></a><code>encoding_utf16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于Unicode标准中定义的UTF-16编码；</font><font style="vertical-align: inherit;">字节序被假定为目标平台的字节序。</font></font></p>
</li>
<li>
<p><a id="encoding_utf32_le"></a><code>encoding_utf32_le</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 对应于Unicode标准中定义的小尾数UTF-32编码。</font></font></p>
</li>
<li>
<p><a id="encoding_utf32_be"></a><code>encoding_utf32_be</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 对应于Unicode标准中定义的big-endian UTF-32编码。</font></font></p>
</li>
<li>
<p><a id="encoding_utf32"></a><code>encoding_utf32</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于Unicode标准中定义的UTF-32编码；</font><font style="vertical-align: inherit;">字节序被假定为目标平台的字节序。</font></font></p>
</li>
<li>
<p><a id="encoding_wchar"></a><code>encoding_wchar</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对应于</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">的编码</font><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">根据</font><font style="vertical-align: inherit;">大小</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">它的含义与</font></font><code>encoding_utf16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">相同</font><font style="vertical-align: inherit;">。</font></font><code>encoding_utf32</code><font style="vertical-align: inherit;"></font><code>wchar_t</code><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><a id="encoding_latin1"></a><code>encoding_latin1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 对应于ISO-8859-1编码（也称为Latin-1）。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于</font></font><code>encoding_auto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">正确检测所有格式良好的XML文档（因为它们以文档声明开头）和以开头的所有其他XML文档所支持的Unicode编码</font><font style="vertical-align: inherit;">的算法</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果您的XML文档不是以</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTF-8 </font><font style="vertical-align: inherit;">开头</font><font style="vertical-align: inherit;">并且编码与UTF-8不同，请使用特定的编码。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unicode转换的当前行为是在转换过程中跳过所有无效的UTF序列。</font><font style="vertical-align: inherit;">不应依赖此行为；</font><font style="vertical-align: inherit;">此外，如果不执行编码转换，则不会删除无效序列，因此您将在节点/属性内容中按原样获得它们。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="loading.w3c"><a class="anchor" href="https://pugixml.org/docs/manual.html#loading.w3c"></a><a class="link" href="https://pugixml.org/docs/manual.html#loading.w3c"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">4.7。</font><font style="vertical-align: inherit;">符合W3C规范</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml并不完全符合W3C规范-它可以加载任何有效的XML文档，但不执行某些格式正确的检查。</font><font style="vertical-align: inherit;">尽管已做出很大的努力来拒绝无效的XML文档，但是由于性能原因，未执行某些验证。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理有效的XML文档时，只有一种不一致的行为：pugixml不会使用文档类型声明中提供的信息进行解析。</font><font style="vertical-align: inherit;">这意味着不会扩展在DOCTYPE中声明的实体，并且所有属性/ PCDATA值始终以统一的方式处理，该方式仅取决于解析选项。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关于拒绝无效的XML文档，与W3C规范存在许多不兼容之处，包括：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">同一节点的多个属性可以具有相同的名称。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标签和属性名称未完全验证是否包含允许的字符，因此不会拒绝某些无效的标签</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含的属性值</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不会被拒绝。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无效的实体/字符引用不会被拒绝，而是保留原样。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注释值可以包含</font></font><code>--</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从文档声明开始，不需要XML数据；</font><font style="vertical-align: inherit;">此外，文档声明可以出现在注释和其他节点之后。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些情况下，无效的文档类型声明会被静默忽略。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不执行Unicode验证，因此不会拒绝无效的UTF序列。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="access"><a class="anchor" href="https://pugixml.org/docs/manual.html#access"></a><a class="link" href="https://pugixml.org/docs/manual.html#access"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.访问文档数据</font></font></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml具有广泛的接口，可从文档中获取各种类型的数据并遍历文档。</font><font style="vertical-align: inherit;">本节提供有关所有此类功能的文档，除了与XPath相关的功能外，这些功能不会修改树。</font><font style="vertical-align: inherit;">有关XPath参考，</font><font style="vertical-align: inherit;">请参见</font></font><a href="https://pugixml.org/docs/manual.html#xpath"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如在</font></font><a href="https://pugixml.org/docs/manual.html#dom.cpp"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">C ++接口中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所讨论的，</font><font style="vertical-align: inherit;">树数据有两种类型的句柄</font></font><a href="https://pugixml.org/docs/manual.html#xml_node"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-xml_node</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://pugixml.org/docs/manual.html#xml_attribute"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_attribute</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">句柄具有特殊的null（空）值，这些值会通过各种函数传播，因此对于编写更简洁的代码很有用。</font><font style="vertical-align: inherit;">有关详细信息，</font><font style="vertical-align: inherit;">请参见此</font></font><a href="https://pugixml.org/docs/manual.html#node_null"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">描述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在输入为空的情况下，本节中的文档将明确声明所有函数的结果。</font></font></p>
</div>
<div class="sect2">
<h3 id="access.basic"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.basic"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.basic"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基本遍历功能</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::parent"></a><a id="xml_node::first_child"></a><a id="xml_node::last_child"></a><a id="xml_node::next_sibling"></a><a id="xml_node::previous_sibling"></a><a id="xml_node::first_attribute"></a><a id="xml_node::last_attribute"></a><a id="xml_attribute::next_attribute"></a><a id="xml_attribute::previous_attribute"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
文档的内部表示形式是一棵树，其中每个节点都有一个子节点列表（子节点的顺序对应于XML表示形式中的子节点的顺序），另外，元素节点还具有一个属性列表，该列表也有序。</font><font style="vertical-align: inherit;">提供了几种功能，以使您从树中的一个节点到达另一个节点。</font><font style="vertical-align: inherit;">这些函数大致对应于内部表示，因此通常是其他遍历方法的构建块（即XPath遍历基于这些函数）。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">parent</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">first_child</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">last_child</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">next_sibling</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">previous_sibling</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">first_attribute</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">last_attribute</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">next_attribute</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">previous_attribute</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>parent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回节点的父级；</font><font style="vertical-align: inherit;">除文档外，所有非空节点都具有非空父级。</font></font><code>first_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并分别</font></font><code>last_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回节点的第一个孩子和最后一个孩子；</font><font style="vertical-align: inherit;">请注意，只有文档节点和元素节点可以具有非空子节点列表。</font><font style="vertical-align: inherit;">如果node没有子节点，则两个函数均返回空节点。</font></font><code>next_sibling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并分别</font></font><code>previous_sibling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回子节点列表中该节点右/左的节点-例如，在中</font></font><code>&lt;a/&gt;&lt;b/&gt;&lt;c/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，调用</font><font style="vertical-align: inherit;">指向的句柄</font></font><code>next_sibling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>&lt;b/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致指向的句柄</font></font><code>&lt;c/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并</font></font><code>previous_sibling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在指向的句柄中</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">结果</font></font><code>&lt;a/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果节点没有下一个/上一个同级（分别是列表中的最后一个/第一个节点，则会发生这种情况），这些函数将返回空节点。</font></font><code>first_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>last_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>next_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>previous_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数的行为类似于相应的子节点的功能，并允许迭代通过相同的方式属性列表。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于内存消耗的原因，属性没有指向其父节点的链接。</font><font style="vertical-align: inherit;">因此没有</font></font><code>xml_attribute::parent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在null句柄上调用以上任何函数都将导致null句柄-即</font></font><code>node.first_child().next_sibling()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回的第二</font><font style="vertical-align: inherit;">个子节点；</font></font><code>node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code>node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">null为null，根本没有任何子节点或只有一个子节点，则</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">null句柄</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用这些功能，您可以遍历所有子节点并显示所有这样的属性（</font></font><a href="https://pugixml.org/docs/samples/traverse_base.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / traverse_base.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">();</span> <span class="tok-n">tool</span><span class="tok-p">;</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">())</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Tool:"</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_attribute</span> <span class="tok-n">attr</span> <span class="tok-o">=</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">first_attribute</span><span class="tok-p">();</span> <span class="tok-n">attr</span><span class="tok-p">;</span> <span class="tok-n">attr</span> <span class="tok-o">=</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">next_attribute</span><span class="tok-p">())</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">" "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"="</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">value</span><span class="tok-p">();</span>
    <span class="tok-p">}</span><font></font>
<font></font>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access.nodedata"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.nodedata"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.nodedata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.1。</font><font style="vertical-align: inherit;">获取节点数据</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::name"></a><a id="xml_node::value"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
除了结构信息（父，子节点，属性）之外，节点还可以具有名称和值，它们都是字符串。</font><font style="vertical-align: inherit;">根据节点类型，名称或值可能不存在。</font></font><a href="https://pugixml.org/docs/manual.html#node_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点没有名称或值，</font></font><a href="https://pugixml.org/docs/manual.html#node_element"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_element</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://pugixml.org/docs/manual.html#node_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_declaration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点始终具有名称，但从未具有值；</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pcdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://pugixml.org/docs/manual.html#node_cdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_cdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="https://pugixml.org/docs/manual.html#node_comment"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_comment</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://pugixml.org/docs/manual.html#node_doctype"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_doctype</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点，从未具有名称，但始终具有值（尽管可能为空），</font></font><a href="https://pugixml.org/docs/manual.html#node_pi"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pi</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点始终具有名称和值（同样，值可能为空）。</font><font style="vertical-align: inherit;">为了获取节点的名称或值，可以使用以下功能：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果节点没有名称或值，或者节点句柄为空，则两个函数都返回空字符串-它们从不返回空指针。</font></font></p>
</div>
<div id="xml_node::child_value" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常将数据存储为某个节点的文本内容，即</font></font><code>&lt;node&gt;&lt;description&gt;This is a node&lt;/description&gt;&lt;/node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在这种情况下，</font></font><code>&lt;description&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node没有值，而是具有</font><font style="vertical-align: inherit;">带有value的</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pcdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型的子</font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;">级</font></a></font><code>"This is a node"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">pugixml提供了一些辅助函数来解析此类数据：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">child_value</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">child_value</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_text</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">text</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>child_value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pcdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://pugixml.org/docs/manual.html#node_cdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_cdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的第一个孩子的值</font><font style="vertical-align: inherit;">；</font></font><code>child_value(name)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是的简单包装器</font></font><code>child(name).child_value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于上面的示例，调用</font></font><code>node.child_value("description")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>description.child_value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">都将产生string </font></font><code>"This is a node"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果没有子对象具有相关类型，或者句柄为null，则</font></font><code>child_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回空字符串。</font></font></p>
</div>
<div class="paragraph">
<p><code>text()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个特殊对象，该对象可用于在比获取值更复杂的情况下处理PCDATA内容；</font><font style="vertical-align: inherit;">在</font></font><a href="https://pugixml.org/docs/manual.html#access.text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">处理文本内容</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">部分中</font><font style="vertical-align: inherit;">对此进行了描述</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><a href="https://pugixml.org/docs/manual.html#code_traverse_base_data"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一节末尾</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有一个使用其中一些功能的示例</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="access.attrdata"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.attrdata"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.attrdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.2。</font><font style="vertical-align: inherit;">获取属性数据</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_attribute::name"></a><a id="xml_attribute::value"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有属性都有名称和值，它们都是字符串（值可以为空）。</font><font style="vertical-align: inherit;">有两个对应的访问器，例如</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果属性句柄为null，则两个函数都返回空字符串-它们从不返回null指针。</font></font></p>
</div>
<div id="xml_attribute::as_string" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果在属性handle为null时需要非空字符串（例如，需要从XML属性获取选项值，但是如果未指定，则需要将其默认设置为</font></font><code>"sorted"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是</font></font><code>""</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），则可以使用</font></font><code>as_string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accessor ：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">as_string</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-s">""</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>def</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果属性句柄为null </font><font style="vertical-align: inherit;">，则返回</font><font style="vertical-align: inherit;">参数。</font><font style="vertical-align: inherit;">如果不指定参数，则该函数等效于</font></font><code>value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_attribute::as_int"></a><a id="xml_attribute::as_uint"></a><a id="xml_attribute::as_double"></a><a id="xml_attribute::as_float"></a><a id="xml_attribute::as_bool"></a><a id="xml_attribute::as_llong"></a><a id="xml_attribute::as_ullong"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
在许多情况下，属性值的类型不是字符串-即，尽管属性值在XML中表示为字符串，但属性可能始终包含应视为整数的值。</font><font style="vertical-align: inherit;">pugixml提供了几种将属性值转换为其他类型的访问器：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">int</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">as_int</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">as_uint</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">double</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">as_double</span><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">float</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">as_float</span><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">as_bool</span><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">as_llong</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">as_ullong</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>as_int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>as_uint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>as_llong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>as_ullong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>as_double</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>as_float</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换属性值的数字。</font><font style="vertical-align: inherit;">如果属性handle为null，</font></font><code>def</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则返回参数（默认为0）。</font><font style="vertical-align: inherit;">否则，所有的前导空白字符被截断，并且剩余的字符串被解析为在十进制或十六进制形式（适用于的整数</font></font><code>as_int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>as_uint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>as_llong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>as_ullong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;用于十六进制格式，如果数目有</font></font><code>0x</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>0X</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">前缀）或作为一个浮点数十进制或科学形式（</font></font><code>as_double</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>as_float</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果输入字符串包含非数字字符序列或超出目标数字范围的数字，则结果不确定。</font></font></p>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
数字转换函数取决于设置的当前C语言环境</font></font><code>setlocale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，因此如果语言环境不同于，可能会返回意外结果</font></font><code>"C"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><code>as_bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将属性值转换为布尔值，如下所示：如果属性handle为null，</font></font><code>def</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则返回参数（</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下）。</font><font style="vertical-align: inherit;">如果属性值为空，</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则返回。</font><font style="vertical-align: inherit;">否则，</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果第一个字符是中的一个</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">则返回</font></font><code>'1', 't', 'T', 'y', 'Y'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这意味着字符串像</font></font><code>"true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>"yes"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被识别为</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，而字符串像</font></font><code>"false"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>"no"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被识别为</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于更复杂的匹配，您必须编写自己的函数。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content">
<code>as_llong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code>as_ullong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅在您的平台对</font></font><code>long long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">有可靠的支持</font><font style="vertical-align: inherit;">（包括字符串转换）</font><font style="vertical-align: inherit;">时才可用</font><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div id="code_traverse_base_data" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是使用这些功能以及节点数据检索功能（</font></font><a href="https://pugixml.org/docs/samples/traverse_base.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample / traverse_base.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><a href="https://pugixml.org/docs/samples/traverse_base.cpp" class="bare"><font style="vertical-align: inherit;">示例</font></a><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"Tool"</span><span class="tok-p">);</span> <span class="tok-n">tool</span><span class="tok-p">;</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">(</span><span class="tok-s">"Tool"</span><span class="tok-p">))</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Tool "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Filename"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">();</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">": AllowRemote "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"AllowRemote"</span><span class="tok-p">).</span><span class="tok-n">as_bool</span><span class="tok-p">();</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", Timeout "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Timeout"</span><span class="tok-p">).</span><span class="tok-n">as_int</span><span class="tok-p">();</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", Description '"</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">child_value</span><span class="tok-p">(</span><span class="tok-s">"Description"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"'</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access.contents"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.contents"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.contents"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.3。</font><font style="vertical-align: inherit;">基于内容的遍历功能</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::child"></a><a id="xml_node::attribute"></a><a id="xml_node::next_sibling_name"></a><a id="xml_node::previous_sibling_name"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于许多文档遍历都是通过查找具有正确名称的节点/属性组成的，因此有一些特殊的功能：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">next_sibling</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">previous_sibling</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回具有指定名称的第一个子代/属性；</font></font><code>next_sibling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>previous_sibling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回具有指定名称的相应方向上的第一个兄弟姐妹。</font><font style="vertical-align: inherit;">所有字符串比较均区分大小写。</font><font style="vertical-align: inherit;">如果节点句柄为空或没有具有指定名称的节点/属性，则返回空句柄。</font></font></p>
</div>
<div class="paragraph">
<p><code>child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>next_sibling</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数可以一起使用以遍历所有具有所需名称的子节点，如下所示：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"Tool"</span><span class="tok-p">);</span> <span class="tok-n">tool</span><span class="tok-p">;</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">(</span><span class="tok-s">"Tool"</span><span class="tok-p">))</span></code></pre>
</div>
</div>
<div id="xml_node::find_child_by_attribute" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有时，所需的节点不是由唯一名称指定的，而是由某些属性的值指定的；</font><font style="vertical-align: inherit;">例如，常见的是具有节点集合与具有一个唯一的ID的每个节点：</font></font><code>&lt;group&gt;&lt;item id="1"/&gt; &lt;item id="2"/&gt;&lt;/group&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有两个用于基于属性值查找子节点的功能：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">find_child_by_attribute</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">attr_name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">attr_value</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">find_child_by_attribute</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">attr_name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">attr_value</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">三参数函数返回具有指定名称的第一个子节点，该子节点具有具有指定名称/值的属性；</font><font style="vertical-align: inherit;">两个参数的函数将跳过该节点的名称测试，这对于在异构集合中进行搜索非常有用。</font><font style="vertical-align: inherit;">如果节点句柄为空或找不到节点，则返回空句柄。</font><font style="vertical-align: inherit;">所有字符串比较均区分大小写。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在上述所有函数中，所有参数都必须是有效的字符串；</font><font style="vertical-align: inherit;">传递空指针会导致未定义的行为。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是使用这些功能的示例（</font></font><a href="https://pugixml.org/docs/samples/traverse_base.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">sample / traverse_base.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Tool for *.dae generation: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">find_child_by_attribute</span><span class="tok-p">(</span><span class="tok-s">"Tool"</span><span class="tok-p">,</span> <span class="tok-s">"OutputFileMasks"</span><span class="tok-p">,</span> <span class="tok-s">"*.dae"</span><span class="tok-p">).</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Filename"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"Tool"</span><span class="tok-p">);</span> <span class="tok-n">tool</span><span class="tok-p">;</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">(</span><span class="tok-s">"Tool"</span><span class="tok-p">))</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Tool "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Filename"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access.rangefor"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.rangefor"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.rangefor"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.4。</font><font style="vertical-align: inherit;">基于范围的for循环支持</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::children"></a><a id="xml_node::attributes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您的C ++编译器支持基于范围的for循环（这是C ++ 11功能，在编写本文时，Microsoft Visual Studio 2012 +，GCC 4.6+和Clang 3.0+均支持），则可以使用它来枚举节点/属性。</font><font style="vertical-align: inherit;">提供了额外的帮助者来支持这一点；</font><font style="vertical-align: inherit;">请注意，它们还与</font></font><a href="http://www.boost.org/libs/foreach/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Boost Foreach</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及其他C ++ 11之前的foreach功能</font><font style="vertical-align: inherit;">兼容</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n"><em>implementation</em></span><span class="tok-o">-</span><span class="tok-n"><em>defined</em></span><span class="tok-o">-</span><span class="tok-n"><em>type</em></span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">children</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n"><em>implementation</em></span><span class="tok-o">-</span><span class="tok-n"><em>defined</em></span><span class="tok-o">-</span><span class="tok-n"><em>type</em></span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">children</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n"><em>implementation</em></span><span class="tok-o">-</span><span class="tok-n"><em>defined</em></span><span class="tok-o">-</span><span class="tok-n"><em>type</em></span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">attributes</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>children</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数允许您枚举所有子节点；</font></font><code>children</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带</font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数的函数允许您枚举具有特定名称的所有子节点；</font></font><code>attributes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数允许您枚举节点的所有属性。</font><font style="vertical-align: inherit;">请注意，您还可以在基于范围的构造中使用节点对象本身，等效于使用</font></font><code>children()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是使用这些功能的示例（</font></font><a href="https://pugixml.org/docs/samples/traverse_rangefor.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / traverse_rangefor.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-nl">tool</span><span class="tok-p">:</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">children</span><span class="tok-p">(</span><span class="tok-s">"Tool"</span><span class="tok-p">))</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Tool:"</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_attribute</span> <span class="tok-nl">attr</span><span class="tok-p">:</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">attributes</span><span class="tok-p">())</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">" "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"="</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">value</span><span class="tok-p">();</span>
    <span class="tok-p">}</span><font></font>
<font></font>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-nl">child</span><span class="tok-p">:</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">children</span><span class="tok-p">())</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", child "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">child</span><span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">();</span>
    <span class="tok-p">}</span><font></font>
<font></font>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>children()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">时，代码的意图很明确，请注意，每个节点都可以视为子节点的容器，因为它提供</font><font style="vertical-align: inherit;">了下一部分中介绍的</font></font><code>begin()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>end()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员函数。</font><font style="vertical-align: inherit;">因此，您可以简单地通过使用节点本身来遍历节点的子代：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-nl">child</span><span class="tok-p">:</span> <span class="tok-n">tool</span><span class="tok-p">)</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access.iterators"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.iterators"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.iterators"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.5。</font><font style="vertical-align: inherit;">通过迭代器遍历节点/属性列表</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node_iterator"></a><a id="xml_attribute_iterator"></a><a id="xml_node::begin"></a><a id="xml_node::end"></a><a id="xml_node::attributes_begin"></a><a id="xml_node::attributes_end"></a>
Child node lists and attribute lists are simply double-linked lists; while you can use <code>previous_sibling</code>/<code>next_sibling</code> and other such functions for iteration, pugixml additionally provides node and attribute iterators, so that you can treat nodes as containers of other nodes or attributes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">class</span> <span class="tok-nc">xml_node_iterator</span><span class="tok-p">;</span>
<span class="tok-k">class</span> <span class="tok-nc">xml_attribute_iterator</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">typedef</span> <span class="tok-n">xml_node_iterator</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">iterator</span><span class="tok-p">;</span>
<span class="tok-n">iterator</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">begin</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">iterator</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">end</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">typedef</span> <span class="tok-n">xml_attribute_iterator</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">attribute_iterator</span><span class="tok-p">;</span>
<span class="tok-n">attribute_iterator</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">attributes_begin</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">attribute_iterator</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">attributes_end</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>begin</code> and <code>attributes_begin</code> return iterators that point to the first node/attribute, respectively; <code>end</code> and <code>attributes_end</code> return past-the-end iterator for node/attribute list, respectively - this iterator can’t be dereferenced, but decrementing it results in an iterator pointing to the last element in the list (except for empty lists, where decrementing past-the-end iterator results in undefined behavior). Past-the-end iterator is commonly used as a termination value for iteration loops (see sample below). If you want to get an iterator that points to an existing handle, you can construct the iterator with the handle as a single constructor argument, like so: <code>xml_node_iterator(node)</code>. For <code>xml_attribute_iterator</code>, you’ll have to provide both an attribute and its parent node.</p>
</div>
<div class="paragraph">
<p><code>begin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回，如果称为空节点上等于迭代器; </font><font style="vertical-align: inherit;">这样的迭代器不能被取消引用。</font></font><code>attributes_begin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>attributes_end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以相同的方式表现。</font><font style="vertical-align: inherit;">对于正确的迭代器用法，这意味着空节点的子节点/属性集合似乎为空。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">两种类型的迭代器都具有双向迭代器语义（即，可以递增和递减，但不支持有效的随机访问），并且支持所有常规的迭代器操作-比较，解除引用等。如果节点/属性对象是迭代器，则迭代器将无效重新指向被从树中删除；</font><font style="vertical-align: inherit;">添加节点/属性不会使任何迭代器无效。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是使用迭代器进行文档遍历的</font></font><a href="https://pugixml.org/docs/samples/traverse_iter.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><a href="https://pugixml.org/docs/samples/traverse_iter.cpp" class="bare"><font style="vertical-align: inherit;">samples / traverse_iter.cpp</font></a><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node_iterator</span> <span class="tok-n">it</span> <span class="tok-o">=</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">begin</span><span class="tok-p">();</span> <span class="tok-n">it</span> <span class="tok-o">!=</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">end</span><span class="tok-p">();</span> <span class="tok-o">++</span><span class="tok-n">it</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Tool:"</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_attribute_iterator</span> <span class="tok-n">ait</span> <span class="tok-o">=</span> <span class="tok-n">it</span><span class="tok-o">-&gt;</span><span class="tok-n">attributes_begin</span><span class="tok-p">();</span> <span class="tok-n">ait</span> <span class="tok-o">!=</span> <span class="tok-n">it</span><span class="tok-o">-&gt;</span><span class="tok-n">attributes_end</span><span class="tok-p">();</span> <span class="tok-o">++</span><span class="tok-n">ait</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">" "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">ait</span><span class="tok-o">-&gt;</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"="</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">ait</span><span class="tok-o">-&gt;</span><span class="tok-n">value</span><span class="tok-p">();</span>
    <span class="tok-p">}</span><font></font>
<font></font>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
节点和属性迭代器位于const和非const迭代器之间的中间位置。</font><font style="vertical-align: inherit;">虽然解除引用操作会产生对该对象的非恒定引用，但您可以将其用于树修改操作，但使用赋值修改该引用（即，将迭代器传递给类似的函数</font></font><code>std::sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）将不会获得预期的结果，因为赋值会修改存储在迭代器中。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="access.walker"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.walker"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.walker"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.6。</font><font style="vertical-align: inherit;">使用xml_tree_walker进行递归遍历</font></font></a></h3>
<div id="xml_tree_walker" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上述方法允许遍历某个节点的直接子代；</font><font style="vertical-align: inherit;">如果要进行深度树遍历，则必须通过递归函数或某些等效方法进行。</font><font style="vertical-align: inherit;">但是，pugixml为子树的深度优先遍历提供了一个帮助器。</font><font style="vertical-align: inherit;">为了使用它，您必须实现</font></font><code>xml_tree_walker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口并调用</font></font><code>traverse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">class</span> <span class="tok-nc">xml_tree_walker</span>
<span class="tok-p">{</span>
<span class="tok-k">public</span><span class="tok-o">:</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">bool</span> <span class="tok-n">begin</span><span class="tok-p">(</span><span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">bool</span> <span class="tok-nf">for_each</span><span class="tok-p">(</span><span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">bool</span> <span class="tok-nf">end</span><span class="tok-p">(</span><span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-kt">int</span> <span class="tok-nf">depth</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-p">};</span><font></font>
<font></font>
<span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">traverse</span><span class="tok-p">(</span><span class="tok-n">xml_tree_walker</span><span class="tok-o">&amp;</span> <span class="tok-n">walker</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="xml_tree_walker::begin"></a><a id="xml_tree_walker::for_each"></a><a id="xml_tree_walker::end"></a><a id="xml_node::traverse"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
通过调用</font></font><code>traverse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">遍历根上的函数来启动遍历，其过程如下：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先，</font></font><code>begin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以遍历根为参数调用函数。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">然后，</font></font><code>for_each</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对遍历子树中的所有节点按深度优先顺序调用函数，但遍历根除外。</font><font style="vertical-align: inherit;">节点作为参数传递。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">最后，</font></font><code>end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以遍历根为参数调用函数。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果</font></font><code>begin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或任何</font></font><code>for_each</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用返回</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，遍历被终止，并</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回为遍历结果; </font><font style="vertical-align: inherit;">否则，遍历结果为</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，您不必重写</font></font><code>begin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">起作用。</font><font style="vertical-align: inherit;">它们的默认实现返回</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div id="xml_tree_walker::depth" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以通过调用</font></font><code>depth</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">来获取节点相对于遍历根的深度</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它返回</font></font><code>-1</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果从所谓的</font></font><code>begin</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>end</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并返回0为基础的深度，如果从名为</font></font><code>for_each</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-深度为0，遍历根，1对所有孙子等的所有儿童。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个使用xml_tree_walker（</font></font><a href="https://pugixml.org/docs/samples/traverse_walker.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / traverse_walker.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">遍历树层次结构的</font><a href="https://pugixml.org/docs/samples/traverse_walker.cpp" class="bare"><font style="vertical-align: inherit;">示例</font></a><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">struct</span> <span class="tok-nl">simple_walker</span><span class="tok-p">:</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_tree_walker</span>
<span class="tok-p">{</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">bool</span> <span class="tok-n">for_each</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">i</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span> <span class="tok-n">i</span> <span class="tok-o">&lt;</span> <span class="tok-n">depth</span><span class="tok-p">();</span> <span class="tok-o">++</span><span class="tok-n">i</span><span class="tok-p">)</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"  "</span><span class="tok-p">;</span> <span class="tok-c1">// indentation</span><font></font>
<font></font>
        <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">node_types</span><span class="tok-p">[</span><span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">type</span><span class="tok-p">()]</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">": name='"</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"', value='"</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"'</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span><font></font>
<font></font>
        <span class="tok-k">return</span> <span class="tok-nb">true</span><span class="tok-p">;</span> <span class="tok-c1">// continue traversal</span>
    <span class="tok-p">}</span>
<span class="tok-p">};</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">simple_walker</span> <span class="tok-n">walker</span><span class="tok-p">;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">traverse</span><span class="tok-p">(</span><span class="tok-n">walker</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access.predicate"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.predicate"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.predicate"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.7。</font><font style="vertical-align: inherit;">搜索带有谓词的节点/属性</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::find_attribute"></a><a id="xml_node::find_child"></a><a id="xml_node::find_node"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管存在用于获取具有已知内容的节点/属性的现有功能，但对于简单查询而言，它们通常是不够的。</font><font style="vertical-align: inherit;">作为通过节点/属性进行手动迭代直到找到所需的替代方法，您可以制作谓词并调用以下</font></font><code>find_</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数之一：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Predicate</span><span class="tok-o">&gt;</span> <span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">find_attribute</span><span class="tok-p">(</span><span class="tok-n">Predicate</span> <span class="tok-n">pred</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Predicate</span><span class="tok-o">&gt;</span> <span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">find_child</span><span class="tok-p">(</span><span class="tok-n">Predicate</span> <span class="tok-n">pred</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Predicate</span><span class="tok-o">&gt;</span> <span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">find_node</span><span class="tok-p">(</span><span class="tok-n">Predicate</span> <span class="tok-n">pred</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">谓词应该是一个普通函数或一个函数对象，该函数对象接受一个</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（for </font></font><code>find_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）或</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（for </font></font><code>find_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>find_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">类型的参数</font><font style="vertical-align: inherit;">，然后返回</font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">永远不会以空句柄作为参数来调用谓词。</font></font></p>
</div>
<div class="paragraph">
<p><code>find_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数迭代指定节点的所有属性，并返回谓词返回的第一个属性</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为所有属性</font><font style="vertical-align: inherit;">返回谓词</font><font style="vertical-align: inherit;">，或者没有属性（包括节点为null的情况），则返回null属性。</font></font></p>
</div>
<div class="paragraph">
<p><code>find_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数遍历指定节点的所有子节点，并返回谓词返回的第一个节点</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为所有节点</font><font style="vertical-align: inherit;">返回谓词</font><font style="vertical-align: inherit;">，或者没有子节点（包括节点为null的情况），则返回null节点。</font></font></p>
</div>
<div class="paragraph">
<p><code>find_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数执行深度优先遍历指定节点（不包括节点本身）的子树，并返回谓词为其返回的第一个节点</font></font><code>true</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为所有节点</font><font style="vertical-align: inherit;">返回谓词</font><font style="vertical-align: inherit;">，或者子树为空，则返回空节点。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是使用基于谓词的函数的</font></font><a href="https://pugixml.org/docs/samples/traverse_predicate.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><a href="https://pugixml.org/docs/samples/traverse_predicate.cpp" class="bare"><font style="vertical-align: inherit;">samples / traverse_predicate.cpp</font></a><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-nf">small_timeout</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">node</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">return</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Timeout"</span><span class="tok-p">).</span><span class="tok-n">as_int</span><span class="tok-p">()</span> <span class="tok-o">&lt;</span> <span class="tok-mi">20</span><span class="tok-p">;</span>
<span class="tok-p">}</span><font></font>
<font></font>
<span class="tok-k">struct</span> <span class="tok-n">allow_remote_predicate</span>
<span class="tok-p">{</span>
    <span class="tok-kt">bool</span> <span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_attribute</span> <span class="tok-n">attr</span><span class="tok-p">)</span> <span class="tok-k">const</span>
    <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">strcmp</span><span class="tok-p">(</span><span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(),</span> <span class="tok-s">"AllowRemote"</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-p">}</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <span class="tok-k">operator</span><span class="tok-p">()(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">node</span><span class="tok-p">)</span> <span class="tok-k">const</span>
    <span class="tok-p">{</span>
        <span class="tok-k">return</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"AllowRemote"</span><span class="tok-p">).</span><span class="tok-n">as_bool</span><span class="tok-p">();</span>
    <span class="tok-p">}</span>
<span class="tok-p">};</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// Find child via predicate (looks for direct children only)</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">find_child</span><span class="tok-p">(</span><span class="tok-n">allow_remote_predicate</span><span class="tok-p">()).</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Filename"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// Find node via predicate (looks for all descendants in depth-first order)</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">find_node</span><span class="tok-p">(</span><span class="tok-n">allow_remote_predicate</span><span class="tok-p">()).</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Filename"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// Find attribute via predicate</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">last_child</span><span class="tok-p">().</span><span class="tok-n">find_attribute</span><span class="tok-p">(</span><span class="tok-n">allow_remote_predicate</span><span class="tok-p">()).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// We can use simple functions instead of function objects</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">find_child</span><span class="tok-p">(</span><span class="tok-n">small_timeout</span><span class="tok-p">).</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Filename"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access.text"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.text"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.8。</font><font style="vertical-align: inherit;">处理文本内容</font></font></a></h3>
<div id="xml_text" class="paragraph">
<p>It is common to store data as text contents of some node - i.e. <code>&lt;node&gt;&lt;description&gt;This is a node&lt;/description&gt;&lt;/node&gt;</code>. In this case, <code>&lt;description&gt;</code> node does not have a value, but instead has a child of type <a href="https://pugixml.org/docs/manual.html#node_pcdata">node_pcdata</a> with value <code>"This is a node"</code>. pugixml provides a special class, <code>xml_text</code>, to work with such data. Working with text objects to modify data is described in <a href="https://pugixml.org/docs/manual.html#modify.text">the documentation for modifying document data</a>; this section describes the access interface of <code>xml_text</code>.</p>
</div>
<div id="xml_node::text" class="paragraph">
<p>You can get the text object from a node by using <code>text()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_text</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">text</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If the node has a type <code>node_pcdata</code> or <code>node_cdata</code>, then the node itself is used to return data; otherwise, a first child node of type <code>node_pcdata</code> or <code>node_cdata</code> is used.</p>
</div>
<div class="paragraph">
<p><a id="xml_text::empty"></a><a id="xml_text::unspecified_bool_type"></a>
You can check if the text object is bound to a valid PCDATA/CDATA node by using it as a boolean value, i.e. <code>if (text) { …​ }</code> or <code>if (!text) { …​ }</code>. Alternatively you can check it by using the <code>empty()</code> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">empty</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div id="xml_text::get" class="paragraph">
<p>Given a text object, you can get the contents (i.e. the value of PCDATA/CDATA node) by using the following function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">get</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In case text object is empty, the function returns an empty string - it never returns a null pointer.</p>
</div>
<div class="paragraph">
<p><a id="xml_text::as_string"></a><a id="xml_text::as_int"></a><a id="xml_text::as_uint"></a><a id="xml_text::as_double"></a><a id="xml_text::as_float"></a><a id="xml_text::as_bool"></a><a id="xml_text::as_llong"></a><a id="xml_text::as_ullong"></a>
If you need a non-empty string if the text object is empty, or if the text contents is actually a number or a boolean that is stored as a string, you can use the following accessors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">as_string</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-s">""</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">int</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">as_int</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">as_uint</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">double</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">as_double</span><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">float</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">as_float</span><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">as_bool</span><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">as_llong</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">as_ullong</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以上所有函数的语义与相似</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员的</font><font style="vertical-align: inherit;">语义相同</font><font style="vertical-align: inherit;">：如果文本对象为空，则它们返回默认参数，并使用相同的规则和限制将文本内容转换为目标类型。</font><font style="vertical-align: inherit;">您可以</font></font><a href="https://pugixml.org/docs/manual.html#xml_attribute::as_int"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考属性函数的文档以</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取详细信息。</font></font></p>
</div>
<div id="xml_text::data" class="paragraph">
<p><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本质上是一个对</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值进行</font><font style="vertical-align: inherit;">操作的助手类</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它绑定到类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pcdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://pugixml.org/docs/manual.html#node_cdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_cdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的节点</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以使用以下函数来检索此节点：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_node</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">data</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本质上，假设</font></font><code>text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是一个</font></font><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，则调用</font></font><code>text.get()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等效于calling </font></font><code>text.data().value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个使用</font></font><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">的示例</font><font style="vertical-align: inherit;">（</font></font><a href="https://pugixml.org/docs/samples/text.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / text.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Project name: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">project</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"name"</span><span class="tok-p">).</span><span class="tok-n">text</span><span class="tok-p">().</span><span class="tok-n">get</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Project version: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">project</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"version"</span><span class="tok-p">).</span><span class="tok-n">text</span><span class="tok-p">().</span><span class="tok-n">as_double</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Project visibility: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-p">(</span><span class="tok-n">project</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"public"</span><span class="tok-p">).</span><span class="tok-n">text</span><span class="tok-p">().</span><span class="tok-n">as_bool</span><span class="tok-p">(</span><span class="tok-cm">/* def= */</span> <span class="tok-nb">true</span><span class="tok-p">)</span> <span class="tok-o">?</span> <span class="tok-s">"public"</span> <span class="tok-o">:</span> <span class="tok-s">"private"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Project description: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">project</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"description"</span><span class="tok-p">).</span><span class="tok-n">text</span><span class="tok-p">().</span><span class="tok-n">get</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="access.misc"><a class="anchor" href="https://pugixml.org/docs/manual.html#access.misc"></a><a class="link" href="https://pugixml.org/docs/manual.html#access.misc"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">5.9。</font><font style="vertical-align: inherit;">杂项功能</font></font></a></h3>
<div id="xml_node::root" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果需要获取某个节点的文档根目录，则可以使用以下功能：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">root</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此函数返回类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的节点</font><font style="vertical-align: inherit;">，该节点是该节点所属文档的根节点（除非该节点为null，在这种情况下将返回null节点）。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_node::path"></a><a id="xml_node::first_element_by_path"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管pugixml支持复杂的XPath表达式，但有时需要一种简单的路径处理工具。</font><font style="vertical-align: inherit;">有两个功能，用于获取节点路径和将路径转换为节点：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">string_t</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">path</span><span class="tok-p">(</span><span class="tok-n">char_t</span> <span class="tok-n">delimiter</span> <span class="tok-o">=</span> <span class="tok-sc">'/'</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">first_element_by_path</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-n">char_t</span> <span class="tok-n">delimiter</span> <span class="tok-o">=</span> <span class="tok-sc">'/'</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点路径由节点名称组成，用分隔符分隔（</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下）；</font><font style="vertical-align: inherit;">另外，路径可以包含self（</font></font><code>.</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和parent（</font></font><code>..</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）伪名称，因此这是有效路径：</font></font><code>"../../foo/./bar"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><code>path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从文档根目录返回到该节点的路径，</font></font><code>first_element_by_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查找由给定路径表示的节点；</font><font style="vertical-align: inherit;">路径可以是绝对路径（绝对路径以定界符开头），在这种情况下，路径的其余部分被视为相对于文档根目录以及相对于给定节点的文档根目录。</font><font style="vertical-align: inherit;">例如，在以下文档中：</font></font><code>&lt;a&gt;&lt;b&gt;&lt;c/&gt;&lt;/b&gt;&lt;/a&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，节点</font></font><code>&lt;c/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有path </font></font><code>"a/b/c"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">在节点中</font><font style="vertical-align: inherit;">调用</font></font><code>first_element_by_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有路径</font></font><code>"a/b"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果的</font><font style="vertical-align: inherit;">文档</font></font><code>&lt;b/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">用路径</font><font style="vertical-align: inherit;">调用</font></font><code>first_element_by_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结点</font><font style="vertical-align: inherit;">导致结点</font><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">呼唤</font></font><code>&lt;a/&gt;</code><font style="vertical-align: inherit;"></font><code>"../a/./b/../."</code><font style="vertical-align: inherit;"></font><code>&lt;a/&gt;</code><font style="vertical-align: inherit;"></font><code>first_element_by_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有路径会</font></font><code>"/a"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">导致</font></font><code>&lt;a/&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何节点</font><font style="vertical-align: inherit;">都有</font><font style="vertical-align: inherit;">节点。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果路径组件不明确（如果有两个具有给定名称的节点），则选择第一个；否则，选择第一个。</font><font style="vertical-align: inherit;">不能保证路径唯一地标识文档中的节点。</font><font style="vertical-align: inherit;">如果未找到路径的任何组成部分，则结果</font></font><code>first_element_by_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为null节点；</font><font style="vertical-align: inherit;">否则，结果</font><font style="vertical-align: inherit;">为null。</font><font style="vertical-align: inherit;">还</font></font><code>first_element_by_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为空节点返回空节点，在这种情况下，路径无关紧要。</font></font><code>path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为空节点返回一个空字符串。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content">
<code>path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数将结果作为STL字符串返回，因此如果</font><font style="vertical-align: inherit;">定义了</font></font><a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_STL"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUGIXML_NO_STL，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则该函数</font><font style="vertical-align: inherit;">不可用</font><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div id="xml_node::offset_debug" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出于效率考虑，pugixml在解析时不记录节点的行/列信息。</font><font style="vertical-align: inherit;">但是，如果自解析以来该节点没有发生重大变化（名称/值未更改，并且节点本身是原始节点，即未从树中删除并在以后重新添加），则可能从XML缓冲区的开头获取偏移量：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">ptrdiff_t</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">offset_debug</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果偏移量不可用（如果节点为null，最初不是从流中解析或已经进行了重大更改，则发生这种情况），该函数返回-1。</font><font style="vertical-align: inherit;">否则，它将以</font></font><a href="https://pugixml.org/docs/manual.html#char_t"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugi :: char_t</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">单位</font><font style="vertical-align: inherit;">从XML缓冲区的开头返回节点数据的偏移量</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关解析偏移量的更多信息，请参阅</font></font><a href="https://pugixml.org/docs/manual.html#xml_parse_result::offset"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析错误处理文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="modify"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.修改文档数据</font></font></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The document in pugixml is fully mutable: you can completely change the document structure and modify the data of nodes/attributes. This section provides documentation for the relevant functions. All functions take care of memory management and structural integrity themselves, so they always result in structurally valid tree - however, it is possible to create an invalid XML tree (for example, by adding two attributes with the same name or by setting attribute/node name to empty/invalid string). Tree modification is optimized for performance and for memory consumption, so if you have enough memory you can create documents from scratch with pugixml and later save them to file/stream instead of relying on error-prone manual text writing and without too much overhead.</p>
</div>
<div class="paragraph">
<p>All member functions that change node/attribute data or structure are non-constant and thus can not be called on constant handles. However, you can easily convert constant handle to non-constant one by simple assignment: <code>void foo(const pugi::xml_node&amp; n) { pugi::xml_node nc = n; }</code>, so const-correctness here mainly provides additional documentation.</p>
</div>
<div class="sect2">
<h3 id="modify.nodedata"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify.nodedata"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify.nodedata">Setting node data</a></h3>
<div class="paragraph">
<p><a id="xml_node::set_name"></a><a id="xml_node::set_value"></a>
As discussed before, nodes can have name and value, both of which are strings. Depending on node type, name or value may be absent. <a href="https://pugixml.org/docs/manual.html#node_document">node_document</a> nodes do not have a name or value, <a href="https://pugixml.org/docs/manual.html#node_element">node_element</a> and <a href="https://pugixml.org/docs/manual.html#node_declaration">node_declaration</a> nodes always have a name but never have a value, <a href="https://pugixml.org/docs/manual.html#node_pcdata">node_pcdata</a>, <a href="https://pugixml.org/docs/manual.html#node_cdata">node_cdata</a>, <a href="https://pugixml.org/docs/manual.html#node_comment">node_comment</a> and <a href="https://pugixml.org/docs/manual.html#node_doctype">node_doctype</a> nodes never have a name but always have a value (it may be empty though), <a href="https://pugixml.org/docs/manual.html#node_pi">node_pi</a> nodes always have a name and a value (again, value may be empty). In order to set node’s name or value, you can use the following functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">set_name</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个函数都尝试将名称/值设置为指定的字符串，并返回操作结果。</font><font style="vertical-align: inherit;">如果节点没有名称或值（例如，当尝试</font></font><code>set_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在</font></font><a href="https://pugixml.org/docs/manual.html#node_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_pcdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点</font><font style="vertical-align: inherit;">上</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">时</font><font style="vertical-align: inherit;">），节点句柄为null或没有足够的内存来处理请求，则</font><font style="vertical-align: inherit;">该操作将失败</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">提供的字符串被复制到文档托管的内存中，并且在函数返回后可以被销毁（例如，您可以安全地将堆栈分配的缓冲区传递给这些函数）。</font><font style="vertical-align: inherit;">名称/值内容未经验证，因此请注意仅使用有效的XML名称，否则文档可能格式错误。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是设置节点名称和值的</font></font><a href="https://pugixml.org/docs/samples/modify_base.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><a href="https://pugixml.org/docs/samples/modify_base.cpp" class="bare"><font style="vertical-align: inherit;">samples / modify_base.cpp</font></a><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">node</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// change node name</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">set_name</span><span class="tok-p">(</span><span class="tok-s">"notnode"</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", new node name: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// change comment text</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">last_child</span><span class="tok-p">().</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-s">"useless comment"</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", new comment text: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">last_child</span><span class="tok-p">().</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// we can't change value of the element or name of the comment</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-s">"1"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">last_child</span><span class="tok-p">().</span><span class="tok-n">set_name</span><span class="tok-p">(</span><span class="tok-s">"2"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modify.attrdata"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify.attrdata"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify.attrdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.1。</font><font style="vertical-align: inherit;">设置属性数据</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_attribute::set_name"></a><a id="xml_attribute::set_value"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
所有属性都有名称和值，它们都是字符串（值可以为空）。</font><font style="vertical-align: inherit;">您可以使用以下功能进行设置：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_name</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这两个函数都尝试将名称/值设置为指定的字符串，并返回操作结果。</font><font style="vertical-align: inherit;">如果属性句柄为空，或者没有足够的内存来处理请求，则该操作将失败。</font><font style="vertical-align: inherit;">提供的字符串被复制到文档托管的内存中，并且在函数返回后可以被销毁（例如，您可以安全地将堆栈分配的缓冲区传递给这些函数）。</font><font style="vertical-align: inherit;">名称/值内容未经验证，因此请注意仅使用有效的XML名称，否则文档可能格式错误。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了字符串函数，还提供了几个函数来处理以数字和布尔值作为值的属性：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的函数将参数转换为字符串，然后调用基本</font></font><code>set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数。</font><font style="vertical-align: inherit;">整数将转换为十进制形式，浮点数将转换为十进制或科学形式，具体取决于数字量，布尔值将转换为</font></font><code>"true"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>"false"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"></font><code>setlocale</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">数值</font><font style="vertical-align: inherit;">
转换函数取决于当前设置的C语言环境</font><font style="vertical-align: inherit;">，因此如果语言环境与的不同，可能会产生意外的结果</font></font><code>"C"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content">
<code>set_value</code><font style="vertical-align: inherit;"></font><code>long long</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">仅当平台对类型有可靠的支持（包括字符串转换）时</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">类型的</font><font style="vertical-align: inherit;">重载</font><font style="vertical-align: inherit;">才可用。
</font></font></td>
</tr>
</tbody></table>
</div>
<div id="xml_attribute::assign" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了方便起见，所有</font></font><code>set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数都有对应的赋值运算符：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_attribute</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些运算符只需调用正确的</font></font><code>set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数并返回被调用的属性即可。</font><font style="vertical-align: inherit;">的返回值将</font></font><code>set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被忽略，因此错误将被忽略。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是设置属性名称和值的</font></font><a href="https://pugixml.org/docs/samples/modify_base.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><a href="https://pugixml.org/docs/samples/modify_base.cpp" class="bare"><font style="vertical-align: inherit;">samples / modify_base.cpp</font></a><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_attribute</span> <span class="tok-n">attr</span> <span class="tok-o">=</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"id"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// change attribute name/value</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">set_name</span><span class="tok-p">(</span><span class="tok-s">"key"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-s">"345"</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">", new attribute: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"="</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// we can use numbers or booleans</span>
<span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-mf">1.234</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"new attribute value: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// we can also use assignment operators for more concise code</span>
<span class="tok-n">attr</span> <span class="tok-o">=</span> <span class="tok-nb">true</span><span class="tok-p">;</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"final attribute value: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">attr</span><span class="tok-p">.</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modify.add"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify.add"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify.add"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.2。</font><font style="vertical-align: inherit;">添加节点/属性</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::prepend_attribute"></a><a id="xml_node::append_attribute"></a><a id="xml_node::insert_attribute_after"></a><a id="xml_node::insert_attribute_before"></a><a id="xml_node::prepend_child"></a><a id="xml_node::append_child"></a><a id="xml_node::insert_child_after"></a><a id="xml_node::insert_child_before"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
没有文档树就没有节点和属性，因此如果不将它们添加到某些文档中就无法创建它们。</font><font style="vertical-align: inherit;">可以在节点/属性列表的末尾或其他某个节点之前/之后创建一个节点或属性：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">append_attribute</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">prepend_attribute</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_attribute_after</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attr</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_attribute_before</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attr</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">append_child</span><span class="tok-p">(</span><span class="tok-n">xml_node_type</span> <span class="tok-n">type</span> <span class="tok-o">=</span> <span class="tok-n">node_element</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">prepend_child</span><span class="tok-p">(</span><span class="tok-n">xml_node_type</span> <span class="tok-n">type</span> <span class="tok-o">=</span> <span class="tok-n">node_element</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_child_after</span><span class="tok-p">(</span><span class="tok-n">xml_node_type</span> <span class="tok-n">type</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_child_before</span><span class="tok-p">(</span><span class="tok-n">xml_node_type</span> <span class="tok-n">type</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">append_child</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">prepend_child</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_child_after</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_child_before</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>append_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>append_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在调用该方法的节点的相应列表的末尾创建一个新的节点/属性；</font></font><code>prepend_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>prepend_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在列表的开头创建一个新的节点/属性；</font></font><code>insert_attribute_after</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>insert_attribute_before</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>insert_child_after</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>insert_attribute_before</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">之前或指定的节点/属性后添加节点/属性。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性函数创建具有指定名称的属性；</font><font style="vertical-align: inherit;">您可以指定一个空名称，并在以后更改名称。</font><font style="vertical-align: inherit;">带有</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数的</font><font style="vertical-align: inherit;">节点函数</font><font style="vertical-align: inherit;">创建具有指定类型的节点；</font><font style="vertical-align: inherit;">由于节点类型无法更改，因此您必须事先知道所需的类型。</font><font style="vertical-align: inherit;">另请注意，并非所有类型都可以添加为子级；</font><font style="vertical-align: inherit;">请参阅下面的说明。</font><font style="vertical-align: inherit;">具有</font></font><code>name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数的</font><font style="vertical-align: inherit;">节点函数使用</font><font style="vertical-align: inherit;">指定的名称</font><font style="vertical-align: inherit;">创建元素节点（</font></font><a href="https://pugixml.org/docs/manual.html#node_element"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_element</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有函数在成功时都将句柄返回给创建的对象，而在失败时将空句柄返回。</font><font style="vertical-align: inherit;">失败的原因有几个：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果目标节点为null，则添加失败；否则，添加失败。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有</font></font><a href="https://pugixml.org/docs/manual.html#node_element"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_element</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点可以包含属性，因此，如果node不是元素，则属性添加将失败。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">只有</font></font><a href="https://pugixml.org/docs/manual.html#node_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://pugixml.org/docs/manual.html#node_element"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_element</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点可以包含子节点，因此，如果目标节点不是元素或文档，则子节点添加失败。</font></font></p>
</li>
<li>
<p><a href="https://pugixml.org/docs/manual.html#node_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><a href="https://pugixml.org/docs/manual.html#node_null"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_null</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点不能作为子节点插入，因此将</font></font><a href="https://pugixml.org/docs/manual.html#node_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><a href="https://pugixml.org/docs/manual.html#node_null"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_null</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值作为</font><font style="vertical-align: inherit;">传递</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结果会导致操作失败；</font></font></p>
</li>
<li>
<p><a href="https://pugixml.org/docs/manual.html#node_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_declaration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点只能作为文档节点的子级添加；</font><font style="vertical-align: inherit;">尝试将声明节点插入为元素节点的子节点失败；</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加节点/属性会导致内存分配，这可能会失败；</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果指定的节点或属性为null或不在目标节点的子代/属性列表中，则插入函数将失败。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">即使操作失败，文档也会保持一致状态，但是不会添加所请求的节点/属性。</font></font></p>
</div>
<div class="admonitionblock caution">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">警告</font></font></div>
</td>
<td class="content">
<code>attribute()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>child()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数不会在树上添加属性或节点，因此，如果代码</font></font><code>node.attribute("id") = 123;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有</font></font><code>node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">name属性，</font><font style="vertical-align: inherit;">像like这样的代码</font><font style="vertical-align: inherit;">将不会执行任何</font><font style="vertical-align: inherit;">操作</font></font><code>"id"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">通过添加必要的属性/节点来确保您正在使用它们。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是向文档中添加新属性/节点的示例（</font></font><a href="https://pugixml.org/docs/samples/modify_add.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / modify_add.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// add node with some name</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">node</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">append_child</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// add description node with text child</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">descr</span> <span class="tok-o">=</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">append_child</span><span class="tok-p">(</span><span class="tok-s">"description"</span><span class="tok-p">);</span>
<span class="tok-n">descr</span><span class="tok-p">.</span><span class="tok-n">append_child</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">node_pcdata</span><span class="tok-p">).</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-s">"Simple node"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// add param node before the description</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">param</span> <span class="tok-o">=</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">insert_child_before</span><span class="tok-p">(</span><span class="tok-s">"param"</span><span class="tok-p">,</span> <span class="tok-n">descr</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// add attributes to param node</span>
<span class="tok-n">param</span><span class="tok-p">.</span><span class="tok-n">append_attribute</span><span class="tok-p">(</span><span class="tok-s">"name"</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-s">"version"</span><span class="tok-p">;</span>
<span class="tok-n">param</span><span class="tok-p">.</span><span class="tok-n">append_attribute</span><span class="tok-p">(</span><span class="tok-s">"value"</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-mf">1.1</span><span class="tok-p">;</span>
<span class="tok-n">param</span><span class="tok-p">.</span><span class="tok-n">insert_attribute_after</span><span class="tok-p">(</span><span class="tok-s">"type"</span><span class="tok-p">,</span> <span class="tok-n">param</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"name"</span><span class="tok-p">))</span> <span class="tok-o">=</span> <span class="tok-s">"float"</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modify.remove"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify.remove"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify.remove"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.3。</font><font style="vertical-align: inherit;">删除节点/属性</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::remove_attribute"></a><a id="xml_node::remove_child"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果您不希望文档包含某些节点或属性，则可以使用以下功能之一将其删除：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">remove_attribute</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">a</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">remove_child</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>remove_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从节点的属性列表中删除该属性，并返回操作结果。</font></font><code>remove_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从文档中删除具有整个子树（包括所有后代节点和属性）的子节点，并返回操作结果。</font><font style="vertical-align: inherit;">如果满足下列条件之一，则删除失败：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用该函数的节点为null；否则为null。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要删除的属性/节点为空；</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">要删除的属性/节点不在节点的属性/子节点列表中。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除属性或节点会使指向同一基础对象的所有句柄无效，并使指向同一对象的所有迭代器也无效。</font><font style="vertical-align: inherit;">删除节点还会使所有其属性或子节点列表的后端迭代器无效。</font><font style="vertical-align: inherit;">小心确保删除属性/节点后不存在或不使用所有此类句柄和迭代器。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果要通过属性或子节点的名称删除它，则可以使用两个附加的辅助函数：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">remove_attribute</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">remove_child</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些函数查找具有指定名称的第一个属性或子级，然后将其删除，并返回结果。</font><font style="vertical-align: inherit;">如果没有具有该名称的属性或子代，则该函数返回</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">如果有两个具有给定名称的节点，则仅删除第一个节点。</font><font style="vertical-align: inherit;">如果要删除具有指定名称的所有节点，则可以使用如下代码：</font></font><code>while (node.remove_child("tool")) ;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是从文档（</font></font><a href="https://pugixml.org/docs/samples/modify_remove.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / modify_remove.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">中删除属性/节点的</font><a href="https://pugixml.org/docs/samples/modify_remove.cpp" class="bare"><font style="vertical-align: inherit;">示例</font></a><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// remove description node with the whole subtree</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">node</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"node"</span><span class="tok-p">);</span>
<span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">remove_child</span><span class="tok-p">(</span><span class="tok-s">"description"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// remove id attribute</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">param</span> <span class="tok-o">=</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"param"</span><span class="tok-p">);</span>
<span class="tok-n">param</span><span class="tok-p">.</span><span class="tok-n">remove_attribute</span><span class="tok-p">(</span><span class="tok-s">"value"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// we can also remove nodes/attributes by handles</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_attribute</span> <span class="tok-n">id</span> <span class="tok-o">=</span> <span class="tok-n">param</span><span class="tok-p">.</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"name"</span><span class="tok-p">);</span>
<span class="tok-n">param</span><span class="tok-p">.</span><span class="tok-n">remove_attribute</span><span class="tok-p">(</span><span class="tok-n">id</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modify.text"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify.text"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify.text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.4。</font><font style="vertical-align: inherit;">处理文本内容</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml提供了一个特殊的类，</font></font><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于处理作为某些节点（即）的值存储的文本内容</font></font><code>&lt;node&gt;&lt;description&gt;This is a node&lt;/description&gt;&lt;/node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><a href="https://pugixml.org/docs/manual.html#access.text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">介绍了使用文本对象检索数据的方法，</font><a href="https://pugixml.org/docs/manual.html#access.text"><font style="vertical-align: inherit;">该文档用于访问文档数据</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">本节介绍的修改界面</font></font><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div id="xml_text::set" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">一旦有了</font></font><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象，就可以使用以下功能设置文本内容：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This function tries to set the contents to the specified string, and returns the operation result. The operation fails if the text object was retrieved from a node that can not have a value and is not an element node (i.e. it is a <a href="https://pugixml.org/docs/manual.html#node_declaration">node_declaration</a> node), if the text object is empty, or if there is insufficient memory to handle the request. The provided string is copied into document managed memory and can be destroyed after the function returns (for example, you can safely pass stack-allocated buffers to this function). Note that if the text object was retrieved from an element node, this function creates the PCDATA child node if necessary (i.e. if the element node does not have a PCDATA/CDATA child already).</p>
</div>
<div id="xml_text::set_value" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除了字符串函数外，还提供了一些函数来处理以数字和布尔值作为内容的文本：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上面的函数将参数转换为字符串，然后调用基本</font></font><code>set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数。</font><font style="vertical-align: inherit;">这些功能与相似</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">具有相同的语义</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您可以</font></font><a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参考属性函数的文档以</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">获取详细信息。</font></font></p>
</div>
<div id="xml_text::assign" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了方便起见，所有</font></font><code>set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数都有对应的赋值运算符：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
<span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <span class="tok-n">xml_text</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-o">=</span><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些运算符只需调用正确的</font></font><code>set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数并返回被调用的属性即可。</font><font style="vertical-align: inherit;">的返回值将</font></font><code>set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被忽略，因此错误将被忽略。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个使用</font></font><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象修改文本内容的</font></font><a href="https://pugixml.org/docs/samples/text.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">示例</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><a href="https://pugixml.org/docs/samples/text.cpp" class="bare"><font style="vertical-align: inherit;">sample / text.cpp</font></a><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// change project version</span>
<span class="tok-n">project</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"version"</span><span class="tok-p">).</span><span class="tok-n">text</span><span class="tok-p">()</span> <span class="tok-o">=</span> <span class="tok-mf">1.2</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// add description element and set the contents</span>
<span class="tok-c1">// note that we do not have to explicitly add the node_pcdata child</span>
<span class="tok-n">project</span><span class="tok-p">.</span><span class="tok-n">append_child</span><span class="tok-p">(</span><span class="tok-s">"description"</span><span class="tok-p">).</span><span class="tok-n">text</span><span class="tok-p">().</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-s">"a test project"</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modify.clone"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify.clone"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify.clone"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.5。</font><font style="vertical-align: inherit;">克隆节点/属性</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::prepend_copy"></a><a id="xml_node::append_copy"></a><a id="xml_node::insert_copy_after"></a><a id="xml_node::insert_copy_before"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
借助先前描述的功能，可以创建具有任何内容和结构的树，包括克隆现有数据。</font><font style="vertical-align: inherit;">但是，由于这是经常需要的操作，因此pugixml提供了内置的节点/属性克隆工具。</font><font style="vertical-align: inherit;">由于没有文档树就不存在节点和属性，因此无法创建独立副本-您必须立即将其插入树中的某个位置。</font><font style="vertical-align: inherit;">为此，您可以使用以下功能之一：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">append_copy</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">prepend_copy</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_copy_after</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attr</span><span class="tok-p">);</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_copy_before</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attr</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">append_copy</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">prepend_copy</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_copy_after</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_copy_before</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些功能镜的结构</font></font><code>append_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>prepend_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>insert_child_before</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和相关函数-它们采取的句柄原型对象，这是被克隆，插入在适当的位置的新属性/节点，然后属性数据或整个节点子树复制新对象。</font><font style="vertical-align: inherit;">这些函数将句柄返回到生成的重复对象，或者在失败时返回空句柄。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该属性与名称和值一起复制；</font><font style="vertical-align: inherit;">复制节点及其类型，名称和值；</font><font style="vertical-align: inherit;">另外，属性列表和所有子级都以递归方式克隆，从而形成了较深的子树克隆。</font><font style="vertical-align: inherit;">原型对象可以是同一文档的一部分，也可以是任何其他文档的一部分。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">故障情况类似于</font><font style="vertical-align: inherit;">和相关功能</font><font style="vertical-align: inherit;">的故障情况</font></font><code>append_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>insert_child_before</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关</font></font><a href="https://pugixml.org/docs/manual.html#xml_node::append_child"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><a href="https://pugixml.org/docs/manual.html#xml_node::append_child"><font style="vertical-align: inherit;">请查阅其文档</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">还有一些针对克隆功能的警告：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">克隆空句柄会导致操作失败；</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点克隆从插入与原型类型相同的节点开始；</font><font style="vertical-align: inherit;">因此，克隆函数不能直接用于克隆整个文档，因为</font></font><a href="https://pugixml.org/docs/manual.html#node_document"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_document</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不是有效的插入类型。</font><font style="vertical-align: inherit;">下面的示例提供了一种解决方法。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以将子树复制为该子树内某个节点的子级，即</font></font><code>node.append_copy(node.parent().parent());</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是一个有效的操作，它导致子树的克隆处于克隆开始之前的状态，即没有无限递归发生。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是XML中包含标签的一种可能实现的示例（</font></font><a href="https://pugixml.org/docs/samples/include.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / include.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">它说明了节点克隆以及其他文档修改功能的用法：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-nf">load_preprocess</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span><span class="tok-o">&amp;</span> <span class="tok-n">doc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-kt">bool</span> <span class="tok-nf">preprocess</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">node</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">child</span> <span class="tok-o">=</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">();</span> <span class="tok-n">child</span><span class="tok-p">;</span> <span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">child</span><span class="tok-p">.</span><span class="tok-n">type</span><span class="tok-p">()</span> <span class="tok-o">==</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">node_pi</span> <span class="tok-o">&amp;&amp;</span> <span class="tok-n">strcmp</span><span class="tok-p">(</span><span class="tok-n">child</span><span class="tok-p">.</span><span class="tok-n">name</span><span class="tok-p">(),</span> <span class="tok-s">"include"</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-mi">0</span><span class="tok-p">)</span>
        <span class="tok-p">{</span>
            <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">include</span> <span class="tok-o">=</span> <span class="tok-n">child</span><span class="tok-p">;</span><font></font>
<font></font>
            <span class="tok-c1">// load new preprocessed document (note: ideally this should handle relative paths)</span>
            <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">path</span> <span class="tok-o">=</span> <span class="tok-n">include</span><span class="tok-p">.</span><span class="tok-n">value</span><span class="tok-p">();</span><font></font>
<font></font>
            <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span> <span class="tok-n">doc</span><span class="tok-p">;</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">load_preprocess</span><span class="tok-p">(</span><span class="tok-n">doc</span><span class="tok-p">,</span> <span class="tok-n">path</span><span class="tok-p">))</span> <span class="tok-k">return</span> <span class="tok-nb">false</span><span class="tok-p">;</span><font></font>
<font></font>
            <span class="tok-c1">// insert the comment marker above include directive</span>
            <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">insert_child_before</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">node_comment</span><span class="tok-p">,</span> <span class="tok-n">include</span><span class="tok-p">).</span><span class="tok-n">set_value</span><span class="tok-p">(</span><span class="tok-n">path</span><span class="tok-p">);</span><font></font>
<font></font>
            <span class="tok-c1">// copy the document above the include directive (this retains the original order!)</span>
            <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">ic</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">();</span> <span class="tok-n">ic</span><span class="tok-p">;</span> <span class="tok-n">ic</span> <span class="tok-o">=</span> <span class="tok-n">ic</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">())</span>
            <span class="tok-p">{</span>
                <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">insert_copy_before</span><span class="tok-p">(</span><span class="tok-n">ic</span><span class="tok-p">,</span> <span class="tok-n">include</span><span class="tok-p">);</span>
            <span class="tok-p">}</span><font></font>
<font></font>
            <span class="tok-c1">// remove the include node and move to the next child</span>
            <span class="tok-n">child</span> <span class="tok-o">=</span> <span class="tok-n">child</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">();</span><font></font>
<font></font>
            <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">remove_child</span><span class="tok-p">(</span><span class="tok-n">include</span><span class="tok-p">);</span>
        <span class="tok-p">}</span>
        <span class="tok-k">else</span>
        <span class="tok-p">{</span>
            <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">preprocess</span><span class="tok-p">(</span><span class="tok-n">child</span><span class="tok-p">))</span> <span class="tok-k">return</span> <span class="tok-nb">false</span><span class="tok-p">;</span><font></font>
<font></font>
            <span class="tok-n">child</span> <span class="tok-o">=</span> <span class="tok-n">child</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">();</span>
        <span class="tok-p">}</span>
    <span class="tok-p">}</span><font></font>
<font></font>
    <span class="tok-k">return</span> <span class="tok-nb">true</span><span class="tok-p">;</span>
<span class="tok-p">}</span><font></font>
<font></font>
<span class="tok-kt">bool</span> <span class="tok-nf">load_preprocess</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span><span class="tok-o">&amp;</span> <span class="tok-n">doc</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_parse_result</span> <span class="tok-n">result</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_file</span><span class="tok-p">(</span><span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">parse_default</span> <span class="tok-o">|</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">parse_pi</span><span class="tok-p">);</span> <span class="tok-c1">// for &lt;?include?&gt;</span><font></font>
<font></font>
    <span class="tok-k">return</span> <span class="tok-n">result</span> <span class="tok-o">?</span> <span class="tok-n">preprocess</span><span class="tok-p">(</span><span class="tok-n">doc</span><span class="tok-p">)</span> <span class="tok-o">:</span> <span class="tok-nb">false</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="modify.move"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify.move"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify.move"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.6。</font><font style="vertical-align: inherit;">移动节点</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::prepend_move"></a><a id="xml_node::append_move"></a><a id="xml_node::insert_move_after"></a><a id="xml_node::insert_move_before"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
有时，除了克隆节点外，您还需要将现有节点移动到树中的其他位置。</font><font style="vertical-align: inherit;">这可以通过复制节点并删除原始节点来完成。</font><font style="vertical-align: inherit;">但是，这很昂贵，因为它会导致很多额外的操作。</font><font style="vertical-align: inherit;">要在同一文档树中移动节点，可以改为使用以下功能：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">append_move</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">moved</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">prepend_move</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">moved</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_move_after</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">moved</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
<span class="tok-n">xml_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">insert_move_before</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">moved</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些函数反映</font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">的结构</font></font><code>append_copy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">它们将句柄带到移动的对象并将其移动到具有所有属性和/或子节点的适当位置。</font><font style="vertical-align: inherit;">这些函数将句柄返回到生成的对象（与移动的对象相同），或者在失败时返回空句柄。</font></font><code>prepend_copy</code><font style="vertical-align: inherit;"></font><code>insert_copy_before</code><font style="vertical-align: inherit;"></font><code>insert_copy_after</code><font style="vertical-align: inherit;"></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">故障情况类似于</font><font style="vertical-align: inherit;">和相关功能</font><font style="vertical-align: inherit;">的故障情况</font></font><code>append_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>insert_child_before</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关</font></font><a href="https://pugixml.org/docs/manual.html#xml_node::append_child"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更多信息</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font><a href="https://pugixml.org/docs/manual.html#xml_node::append_child"><font style="vertical-align: inherit;">请查阅其文档</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">还有一些针对移动功能的警告：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移动空句柄会导致操作失败；</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">移动仅适用于属于同一文档的节点。</font><font style="vertical-align: inherit;">尝试在文档之间移动节点将失败。</font></font></p>
</li>
<li>
<p><code>insert_move_after</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>insert_move_before</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能失败，如果移动后的节点相同的</font></font><code>node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数（该操作将是一个空操作以其他方式）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">无法将子树移动到该子树内某个节点的子节点，即</font></font><code>node.append_move(node.parent().parent());</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">会失败。</font></font></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="modify.fragments"><a class="anchor" href="https://pugixml.org/docs/manual.html#modify.fragments"></a><a class="link" href="https://pugixml.org/docs/manual.html#modify.fragments"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">6.7。</font><font style="vertical-align: inherit;">从片段组装文档</font></font></a></h3>
<div id="xml_node::append_buffer" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml提供了几种从其他XML文档组装XML文档的方法。</font><font style="vertical-align: inherit;">假设有一组文档片段，表示为内存中的缓冲区，则实现选择如下：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用临时文档从字符串中解析数据，然后将节点克隆到目标节点。</font><font style="vertical-align: inherit;">例如：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-nf">append_fragment</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">target</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">buffer</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span> <span class="tok-n">doc</span><span class="tok-p">;</span>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-o">!</span><span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_buffer</span><span class="tok-p">(</span><span class="tok-n">buffer</span><span class="tok-p">,</span> <span class="tok-n">size</span><span class="tok-p">))</span> <span class="tok-k">return</span> <span class="tok-nb">false</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">child</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">();</span> <span class="tok-n">child</span><span class="tok-p">;</span> <span class="tok-n">child</span> <span class="tok-o">=</span> <span class="tok-n">child</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">())</span>
        <span class="tok-n">target</span><span class="tok-p">.</span><span class="tok-n">append_copy</span><span class="tok-p">(</span><span class="tok-n">child</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">缓存解析步骤-保留已包含已解析片段的文档对象，而不是保留内存缓冲区：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-nf">append_fragment</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">target</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span><span class="tok-o">&amp;</span> <span class="tok-n">cached_fragment</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">child</span> <span class="tok-o">=</span> <span class="tok-n">cached_fragment</span><span class="tok-p">.</span><span class="tok-n">first_child</span><span class="tok-p">();</span> <span class="tok-n">child</span><span class="tok-p">;</span> <span class="tok-n">child</span> <span class="tok-o">=</span> <span class="tok-n">child</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">())</span>
        <span class="tok-n">target</span><span class="tok-p">.</span><span class="tok-n">append_copy</span><span class="tok-p">(</span><span class="tok-n">child</span><span class="tok-p">);</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>xml_node::append_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">直接</font><font style="vertical-align: inherit;">使用</font><font style="vertical-align: inherit;">：</font></font></p>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_parse_result</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">append_buffer</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">第一种方法更方便，但比其他两种方法慢。</font><font style="vertical-align: inherit;">的相对性能</font></font><code>append_copy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>append_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">依赖于缓冲格式-通常</font></font><code>append_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是更快，如果所述缓冲器处于本地编码（UTF-8或wchar_t的，这取决于</font></font><code>PUGIXML_WCHAR_MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">同时，它在内存使用方面可能效率较低-实现会复制提供的缓冲区，并且副本的寿命与文档相同-销毁副本后，该副本使用的内存将被回收，但不会很快。</font><font style="vertical-align: inherit;">即使删除文档中的所有节点，包括附加的节点，也不会回收内存。</font></font></p>
</div>
<div class="paragraph">
<p><code>append_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行为与</font></font><a href="https://pugixml.org/docs/manual.html#xml_document::load_buffer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xml_document :: load_buffer</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">相同</font><font style="vertical-align: inherit;">-输入缓冲区是一个字节缓冲区，大小以字节为单位；</font><font style="vertical-align: inherit;">缓冲区未修改，函数返回后可以释放。</font></font></p>
</div>
<div id="status_append_invalid_root" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于</font></font><code>append_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">需要将子节点附加到当前节点，因此仅当当前节点是文档或元素节点时它才有效。</font><font style="vertical-align: inherit;">调用</font></font><code>append_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">任何其他类型的节点都会导致</font></font><code>status_append_invalid_root</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">状态</font><font style="vertical-align: inherit;">错误</font><font style="vertical-align: inherit;">。</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="saving"><a class="anchor" href="https://pugixml.org/docs/manual.html#saving"></a><a class="link" href="https://pugixml.org/docs/manual.html#saving"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.保存文件</font></font></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Often after creating a new document or loading the existing one and processing it, it is necessary to save the result back to file. Also it is occasionally useful to output the whole document or a subtree to some stream; use cases include debug printing, serialization via network or other text-oriented medium, etc. pugixml provides several functions to output any subtree of the document to a file, stream or another generic transport interface; these functions allow to customize the output format (see <a href="https://pugixml.org/docs/manual.html#saving.options">Output options</a>), and also perform necessary encoding conversions (see <a href="https://pugixml.org/docs/manual.html#saving.encoding">Encodings</a>). This section documents the relevant functionality.</p>
</div>
<div class="paragraph">
<p>Before writing to the destination the node/attribute data is properly formatted according to the node type; all special XML symbols, such as <code>&lt;</code> and <code>&amp;</code>, are properly escaped (unless <a href="https://pugixml.org/docs/manual.html#format_no_escapes">format_no_escapes</a> flag is set). In order to guard against forgotten node/attribute names, empty node/attribute names are printed as <code>":anonymous"</code>. For well-formed output, make sure all node and attribute names are set to meaningful values.</p>
</div>
<div class="paragraph">
<p>CDATA sections with values that contain <code>"]]&gt;"</code> are split into several sections as follows: section with value <code>"pre]]&gt;post"</code> is written as <code>&lt;![CDATA[pre]]]]&gt;&lt;![CDATA[&gt;post]]&gt;</code>. While this alters the structure of the document (if you load the document after saving it, there will be two CDATA sections instead of one), this is the only way to escape CDATA contents.</p>
</div>
<div class="sect2">
<h3 id="saving.file"><a class="anchor" href="https://pugixml.org/docs/manual.html#saving.file"></a><a class="link" href="https://pugixml.org/docs/manual.html#saving.file">7.1. Saving document to a file</a></h3>
<div class="paragraph">
<p><a id="xml_document::save_file"></a><a id="xml_document::save_file_wide"></a>
If you want to save the whole document to a file, you can use one of the following functions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">save_file</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">bool</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">save_file</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">wchar_t</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These functions accept file path as its first argument, and also three optional arguments, which specify indentation and other output options (see <a href="https://pugixml.org/docs/manual.html#saving.options">Output options</a>) and output data encoding (see <a href="https://pugixml.org/docs/manual.html#saving.encoding">Encodings</a>). The path has the target operating system format, so it can be a relative or absolute one, it should have the delimiters of the target system, it should have the exact case if the target file system is case-sensitive, etc.</p>
</div>
<div class="paragraph">
<p>File path is passed to the system file opening function as is in case of the first function (which accepts <code>const char* path</code>); the second function either uses a special file opening function if it is provided by the runtime library or converts the path to UTF-8 and uses the system file opening function.</p>
</div>
<div id="xml_writer_file" class="paragraph">
<p><code>save_file</code> opens the target file for writing, outputs the requested header (by default a document declaration is output, unless the document already has one), and then saves the document contents. If the file could not be opened, the function returns <code>false</code>. Calling <code>save_file</code> is equivalent to creating an <code>xml_writer_file</code> object with <code>FILE*</code> handle as the only constructor argument and then calling <code>save</code>; see <a href="https://pugixml.org/docs/manual.html#saving.writer">Saving document via writer interface</a> for writer interface details.</p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是将XML文档保存到文件（</font></font><a href="https://pugixml.org/docs/samples/save_file.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / save_file.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的简单示例</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// save document to file</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Saving result: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save_file</span><span class="tok-p">(</span><span class="tok-s">"save_file_output.xml"</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="saving.stream"><a class="anchor" href="https://pugixml.org/docs/manual.html#saving.stream"></a><a class="link" href="https://pugixml.org/docs/manual.html#saving.stream"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.2。</font><font style="vertical-align: inherit;">将文档保存到C ++ IOstreams</font></font></a></h3>
<div id="xml_document::save_stream" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了增强互操作性，pugixml提供了用于将文档保存到实现C ++ </font></font><code>std::ostream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口的</font><font style="vertical-align: inherit;">任何对象的</font><font style="vertical-align: inherit;">功能。</font><font style="vertical-align: inherit;">这使您可以将文档保存到任何标准C ++流（即文件流）或任何第三方兼容的实现（即Boost Iostreams）。</font><font style="vertical-align: inherit;">最值得注意的是，这可以轻松进行调试输出，因为您可以将</font></font><code>std::cout</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">流用作保存目标。</font><font style="vertical-align: inherit;">有两种功能，一种用于窄字符流，另一种用于宽字符流：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">void</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">ostream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">void</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wostream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with </font></font><code>std::ostream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数可将文档保存到流中的方式</font></font><code>save_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">与之</font><font style="vertical-align: inherit;">相同</font><font style="vertical-align: inherit;">（即使用请求的标头和编码转换）。</font><font style="vertical-align: inherit;">另一方面，</font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">with </font></font><code>std::wstream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数使用</font></font><a href="https://pugixml.org/docs/manual.html#encoding_wchar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encoding_wchar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码</font><font style="vertical-align: inherit;">将文档保存到宽泛的流中</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">因此，要使用</font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">宽字符流，需要进行仔细的（通常是特定于平台的）流设置（即使用</font></font><code>imbue</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能）。</font><font style="vertical-align: inherit;">通常不建议使用宽流，但是它提供了将文档保存为非Unicode编码的功能，即，如果设置了正确的语言环境，则可以保存Shift-JIS编码的数据。</font></font></p>
</div>
<div id="xml_writer_stream" class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用stream target进行</font><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">等效于</font></font><code>xml_writer_stream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用stream作为唯一的构造函数参数</font><font style="vertical-align: inherit;">创建一个</font><font style="vertical-align: inherit;">对象，然后调用</font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">有关作者界面的详细信息，</font><font style="vertical-align: inherit;">请参见</font></font><a href="https://pugixml.org/docs/manual.html#saving.writer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过作者界面保存文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是将XML文档保存到标准输出（</font></font><a href="https://pugixml.org/docs/samples/save_stream.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / save_stream.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的简单示例</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// save document to standard output</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Document:</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="saving.writer"><a class="anchor" href="https://pugixml.org/docs/manual.html#saving.writer"></a><a class="link" href="https://pugixml.org/docs/manual.html#saving.writer"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.3。</font><font style="vertical-align: inherit;">通过编写者界面保存文档</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_document::save"></a><a id="xml_writer"></a><a id="xml_writer::write"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
以上所有保存功能均通过编写器接口实现。</font><font style="vertical-align: inherit;">这是一个具有单个功能的简单接口，在输出过程中以文档数据块作为输入多次被调用：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">class</span> <span class="tok-nc">xml_writer</span>
<span class="tok-p">{</span>
<span class="tok-k">public</span><span class="tok-o">:</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">void</span> <span class="tok-n">write</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">data</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
<span class="tok-p">};</span><font></font>
<font></font>
<span class="tok-kt">void</span> <span class="tok-n">xml_document</span><span class="tok-o">::</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">xml_writer</span><span class="tok-o">&amp;</span> <span class="tok-n">writer</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了通过某些自定义传输（例如套接字）输出文档，您应该创建一个实现</font></font><code>xml_writer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口</font><font style="vertical-align: inherit;">的对象并将其</font><font style="vertical-align: inherit;">传递给</font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数。</font></font><code>xml_writer::write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数以缓冲区作为输入来调用，该函数</font></font><code>data</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指向缓冲区的起始位置，并且</font></font><code>size</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等于缓冲区的大小（以字节为单位）。</font></font><code>write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现必须将缓冲区写入传输；</font><font style="vertical-align: inherit;">它不能保存传递的缓冲区指针，因为</font></font><code>write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">后缓冲区内容将更改</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">缓冲区包含所需编码形式的文档数据块。</font></font></p>
</div>
<div class="paragraph">
<p><code>write</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 函数使用相对较大的块调用（大小通常为几千字节，最后一个块可能很小），因此在实现中通常不需要额外的缓冲。</font></font></p>
</div>
<div class="paragraph">
<p>This is a simple example of custom writer for saving document data to STL string (<a href="https://pugixml.org/docs/samples/save_custom_writer.cpp" class="bare">samples/save_custom_writer.cpp</a>); read the sample code for more complex examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">struct</span> <span class="tok-nl">xml_string_writer</span><span class="tok-p">:</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_writer</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">result</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">virtual</span> <span class="tok-kt">void</span> <span class="tok-nf">write</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">data</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">)</span>
    <span class="tok-p">{</span>
        <span class="tok-n">result</span><span class="tok-p">.</span><span class="tok-n">append</span><span class="tok-p">(</span><span class="tok-k">static_cast</span><span class="tok-o">&lt;</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*&gt;</span><span class="tok-p">(</span><span class="tok-n">data</span><span class="tok-p">),</span> <span class="tok-n">size</span><span class="tok-p">);</span>
    <span class="tok-p">}</span>
<span class="tok-p">};</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="saving.subtree"><a class="anchor" href="https://pugixml.org/docs/manual.html#saving.subtree"></a><a class="link" href="https://pugixml.org/docs/manual.html#saving.subtree">7.4. Saving a single subtree</a></h3>
<div class="paragraph">
<p><a id="xml_node::print"></a><a id="xml_node::print_stream"></a>
While the previously described functions save the whole document to the destination, it is easy to save a single subtree. The following functions are provided:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">void</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">ostream</span><span class="tok-o">&amp;</span> <span class="tok-n">os</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">depth</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">void</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wostream</span><span class="tok-o">&amp;</span> <span class="tok-n">os</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">depth</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">void</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">xml_writer</span><span class="tok-o">&amp;</span> <span class="tok-n">writer</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">depth</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>These functions have the same arguments with the same meaning as the corresponding <code>xml_document::save</code> functions, and allow you to save the subtree to either a C++ IOstream or to any object that implements <code>xml_writer</code> interface.</p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从节约整个文档保存子树不同：进程就会认为</font></font><a href="https://pugixml.org/docs/manual.html#format_write_bom"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format_write_bom</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是关闭的，而</font></font><a href="https://pugixml.org/docs/manual.html#format_no_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format_no_declaration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是，即使标志的实际值是不同的。</font><font style="vertical-align: inherit;">这意味着BOM不会写入目标位置，并且仅在节点本身或节点的子节点之一的情况下才编写文档声明。</font><font style="vertical-align: inherit;">请注意，如果要保存文档，这也适用；</font><font style="vertical-align: inherit;">这个例子（</font></font><a href="https://pugixml.org/docs/samples/save_subtree.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / save_subtree.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）说明了区别：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// get a test document</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span> <span class="tok-n">doc</span><span class="tok-p">;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-s">"&lt;foo bar='baz'&gt;&lt;call&gt;hey&lt;/call&gt;&lt;/foo&gt;"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// print document to standard output (prints &lt;?xml version="1.0"?&gt;&lt;foo bar="baz"&gt;&lt;call&gt;hey&lt;/call&gt;&lt;/foo&gt;)</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">,</span> <span class="tok-s">""</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">format_raw</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// print document to standard output as a regular node (prints &lt;foo bar="baz"&gt;&lt;call&gt;hey&lt;/call&gt;&lt;/foo&gt;)</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">,</span> <span class="tok-s">""</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">format_raw</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// print a subtree to standard output (prints &lt;call&gt;hey&lt;/call&gt;)</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"foo"</span><span class="tok-p">).</span><span class="tok-n">child</span><span class="tok-p">(</span><span class="tok-s">"call"</span><span class="tok-p">).</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">,</span> <span class="tok-s">""</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">format_raw</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="saving.options"><a class="anchor" href="https://pugixml.org/docs/manual.html#saving.options"></a><a class="link" href="https://pugixml.org/docs/manual.html#saving.options"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.5。</font><font style="vertical-align: inherit;">输出选项</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有保存功能均接受可选参数</font></font><code>flags</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这是一个自定义输出格式的位掩码。</font><font style="vertical-align: inherit;">您可以选择文档节点的打印方式，并选择在文档内容之前输出的所需其他信息。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您应该使用通常的按位算术来操作位掩码：要启用标志，请使用</font></font><code>mask | flag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">要禁用标志，请使用</font></font><code>mask &amp; ~flag</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些标志控制结果树的内容：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="format_indent"></a><code>format_indent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否应使用缩进字符串将所有节点缩进（这是所有保存功能的附加参数，</font></font><code>"\t"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认情况下是）。</font><font style="vertical-align: inherit;">如果此标志为开，则缩进字符串将在每个节点之前打印几次，缩进量取决于节点相对于输出子树的深度。</font><font style="vertical-align: inherit;">如果</font><font style="vertical-align: inherit;">启用了</font></font><a href="https://pugixml.org/docs/manual.html#format_raw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format_raw，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">此标志无效</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打开</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="format_indent_attributes"></a><code>format_indent_attributes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否应将所有属性打印在换行上，并根据属性的深度使用缩进字符串缩进。</font><font style="vertical-align: inherit;">该标志表示</font></font><a href="https://pugixml.org/docs/manual.html#format_indent"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format_indent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果</font><font style="vertical-align: inherit;">启用了</font></font><a href="https://pugixml.org/docs/manual.html#format_raw"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">format_raw，</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则</font><font style="vertical-align: inherit;">此标志无效</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="format_raw"></a><code>format_raw</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在格式化输出和原始输出之间切换。</font><font style="vertical-align: inherit;">如果启用此标志，则不会以任何方式缩进节点，也不会打印不属于文档文本的换行符。</font><font style="vertical-align: inherit;">原始模式可用于序列化，在这种情况下，人类不打算读取结果。</font><font style="vertical-align: inherit;">如果使用</font></font><a href="https://pugixml.org/docs/manual.html#parse_ws_pcdata"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_ws_pcdata</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志</font><font style="vertical-align: inherit;">解析了文档</font><font style="vertical-align: inherit;">，则尽可能保留原始文档的格式也很有用。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="format_no_escapes"></a><code>format_no_escapes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用属性值和PCDATA内容的输出转义。</font><font style="vertical-align: inherit;">如果这个标志是关，特殊符号（</font></font><code>"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和所有不可打印的字符（那些具有少于32个码点值）被转换为XML换码序列（即</font></font><code>&amp;amp;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">输出期间）。</font><font style="vertical-align: inherit;">如果此标志打开，则不执行任何文本处理；</font><font style="vertical-align: inherit;">因此，如果输出内容包含无效符号，则输出XML可能会格式错误（例如</font></font><code>&lt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，在PCDATA中</font><font style="vertical-align: inherit;">包含杂点</font><font style="vertical-align: inherit;">会使输出格式错误）。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="format_no_empty_element_tags"></a><code>format_no_empty_element_tags</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">确定是否应输出开始/结束标签而不是空元素（即，没有子元素的元素）的空元素标签。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="format_skip_control_chars"></a><code>format_skip_control_chars</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使能跳过属于范围[0; </font><font style="vertical-align: inherit;">32）代替“＆＃xNN;” </font><font style="vertical-align: inherit;">编码。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="format_attribute_single_quote"></a><code>format_attribute_single_quote</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">允许使用单引号</font></font><code>'</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而不是双引号</font></font><code>"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来包围属性值。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些标志控制其他输出信息：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="format_no_declaration"></a><code>format_no_declaration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">禁用默认的节点声明输出。</font><font style="vertical-align: inherit;">默认情况下，如果文档是通过</font></font><code>save</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>save_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">保存的</font><font style="vertical-align: inherit;">，并且没有任何文档声明，则会在文档内容之前输出默认声明。</font><font style="vertical-align: inherit;">启用此标志将禁用此声明。</font><font style="vertical-align: inherit;">该标志在</font></font><code>xml_node::print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数中</font><font style="vertical-align: inherit;">无效</font><font style="vertical-align: inherit;">：它们从不输出默认声明。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="format_write_bom"></a><code>format_write_bom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用字节顺序标记（BOM）输出。</font><font style="vertical-align: inherit;">默认情况下，不输出BOM，因此在非UTF-8编码的情况下，如果某些解析器和文本编辑器未实现复杂的编码检测，则可能无法识别结果文档的编码。</font><font style="vertical-align: inherit;">启用此标志将向输出添加特定于编码的BOM。</font><font style="vertical-align: inherit;">该标志对</font></font><code>xml_node::print</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">没有影响</font><font style="vertical-align: inherit;">：它们从不输出BOM。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志是</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的。</font></font></p>
</li>
<li>
<p><a id="format_save_file_text"></a><code>format_save_file_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>save_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">时更改文件模式</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，文件以二进制模式打开，这意味着输出文件将包含平台无关的换行符</font></font><code>\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ASCII 10）。</font><font style="vertical-align: inherit;">如果打开此标志，则文件将以文本模式打开，这在某些系统上会更改换行格式（即，在Windows上，您可以使用此标志来输出带有</font></font><code>\r\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（ASCII 13 10）换行符的</font><font style="vertical-align: inherit;">XML文档</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">默认情况下，</font><font style="vertical-align: inherit;">此标志为</font></font><strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">关闭状态</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，还有一个预定义的选项掩码：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><a id="format_default"></a><code>format_default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是默认的标志集，即它具有将所有选项设置为其默认值的功能。</font><font style="vertical-align: inherit;">如有必要，它使用缩进设置格式化输出，不带BOM和默认节点声明。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例显示了不同输出选项（</font></font><a href="https://pugixml.org/docs/samples/save_options.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / save_options.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><font style="vertical-align: inherit;">输出</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// get a test document</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span> <span class="tok-n">doc</span><span class="tok-p">;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-s">"&lt;foo bar='baz'&gt;&lt;call&gt;hey&lt;/call&gt;&lt;/foo&gt;"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// default options; prints</span>
<span class="tok-c1">// &lt;?xml version="1.0"?&gt;</span>
<span class="tok-c1">// &lt;foo bar="baz"&gt;</span>
<span class="tok-c1">//         &lt;call&gt;hey&lt;/call&gt;</span>
<span class="tok-c1">// &lt;/foo&gt;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// default options with custom indentation string; prints</span>
<span class="tok-c1">// &lt;?xml version="1.0"?&gt;</span>
<span class="tok-c1">// &lt;foo bar="baz"&gt;</span>
<span class="tok-c1">// --&lt;call&gt;hey&lt;/call&gt;</span>
<span class="tok-c1">// &lt;/foo&gt;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">,</span> <span class="tok-s">"--"</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// default options without indentation; prints</span>
<span class="tok-c1">// &lt;?xml version="1.0"?&gt;</span>
<span class="tok-c1">// &lt;foo bar="baz"&gt;</span>
<span class="tok-c1">// &lt;call&gt;hey&lt;/call&gt;</span>
<span class="tok-c1">// &lt;/foo&gt;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">,</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">format_default</span> <span class="tok-o">&amp;</span> <span class="tok-o">~</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">format_indent</span><span class="tok-p">);</span> <span class="tok-c1">// can also pass "" instead of indentation string for the same effect</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// raw output; prints</span>
<span class="tok-c1">// &lt;?xml version="1.0"?&gt;&lt;foo bar="baz"&gt;&lt;call&gt;hey&lt;/call&gt;&lt;/foo&gt;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">,</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">format_raw</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// raw output without declaration; prints</span>
<span class="tok-c1">// &lt;foo bar="baz"&gt;&lt;call&gt;hey&lt;/call&gt;&lt;/foo&gt;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">,</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">format_raw</span> <span class="tok-o">|</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">format_no_declaration</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="saving.encoding"><a class="anchor" href="https://pugixml.org/docs/manual.html#saving.encoding"></a><a class="link" href="https://pugixml.org/docs/manual.html#saving.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.6。</font><font style="vertical-align: inherit;">编码方式</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">pugixml支持所有流行的Unicode编码（UTF-8，UTF-16（大端和小端），UTF-32（大端和小端）；自然支持UCS-2，因为它是UTF-16的严格子集）并处理所有在输出过程中编码转换。</font><font style="vertical-align: inherit;">通过</font></font><code>encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型为的保存功能</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">设置输出编码</font></font><code>xml_encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">编码的可能值记录在</font></font><a href="https://pugixml.org/docs/manual.html#loading.encoding"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Encodings中</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">唯一具有不同含义的标志是</font></font><code>encoding_auto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管所有其他标志都设置了精确的编码，但是</font></font><code>encoding_auto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这意味着自动进行编码检测。</font><font style="vertical-align: inherit;">对于输出编码，自动检测没有意义，因为通常没有什么可以从中推断出实际编码，因此这里</font></font><code>encoding_auto</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表示的是UTF-8编码，这是XML数据存储最流行的编码。</font><font style="vertical-align: inherit;">这也是输出编码的默认值。</font><font style="vertical-align: inherit;">如果不想使用UTF-8编码的输出，请指定另一个值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">还要注意，宽流保存功能没有</font></font><code>encoding</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数，并且始终采用</font></font><a href="https://pugixml.org/docs/manual.html#encoding_wchar"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">encoding_wchar</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编码。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
Unicode转换的当前行为是在转换过程中跳过所有无效的UTF序列。</font><font style="vertical-align: inherit;">不应依赖此行为；</font><font style="vertical-align: inherit;">如果您的节点/属性名称不包含任何有效的UTF序列，则它们的输出可能就好像它们是空的一样，这将导致XML文档格式错误。
</font></font></td>
</tr>
</tbody></table>
</div>
</div>
<div class="sect2">
<h3 id="saving.declaration"><a class="anchor" href="https://pugixml.org/docs/manual.html#saving.declaration"></a><a class="link" href="https://pugixml.org/docs/manual.html#saving.declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">7.7。</font><font style="vertical-align: inherit;">自定义文件声明</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用</font></font><code>xml_document::save()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font><font style="vertical-align: inherit;">保存文档时</font></font><code>xml_document::save_file()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果</font></font><code>format_no_declaration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">未指定且文档没有声明节点</font><font style="vertical-align: inherit;">，则会输出默认的XML文档声明</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">但是，默认声明不可自定义。</font><font style="vertical-align: inherit;">如果要自定义声明输出，则需要自己创建声明节点。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认情况下，在解析过程中不会将声明节点添加到文档中。</font><font style="vertical-align: inherit;">如果只需要保留原始的声明节点，则必须</font><font style="vertical-align: inherit;">在分析标志中</font><font style="vertical-align: inherit;">添加标志</font></font><a href="https://pugixml.org/docs/manual.html#parse_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">parse_declaration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">结果文档将包含原始声明节点，该声明节点将在保存期间输出。
</font></font></td>
</tr>
</tbody></table>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">声明节点是类型为</font></font><a href="https://pugixml.org/docs/manual.html#node_declaration"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">node_declaration</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的节点</font><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">它的行为类似于元素节点，因为它具有带有值的属性（但没有子节点）。</font><font style="vertical-align: inherit;">因此，设置自定义版本，编码或独立声明涉及添加属性和设置属性值。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此示例显示了如何创建自定义声明节点（</font></font><a href="https://pugixml.org/docs/samples/save_declaration.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / save_declaration.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// get a test document</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_document</span> <span class="tok-n">doc</span><span class="tok-p">;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">load_string</span><span class="tok-p">(</span><span class="tok-s">"&lt;foo bar='baz'&gt;&lt;call&gt;hey&lt;/call&gt;&lt;/foo&gt;"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// add a custom declaration node</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">decl</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">prepend_child</span><span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">node_declaration</span><span class="tok-p">);</span>
<span class="tok-n">decl</span><span class="tok-p">.</span><span class="tok-n">append_attribute</span><span class="tok-p">(</span><span class="tok-s">"version"</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-s">"1.0"</span><span class="tok-p">;</span>
<span class="tok-n">decl</span><span class="tok-p">.</span><span class="tok-n">append_attribute</span><span class="tok-p">(</span><span class="tok-s">"encoding"</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-s">"UTF-8"</span><span class="tok-p">;</span>
<span class="tok-n">decl</span><span class="tok-p">.</span><span class="tok-n">append_attribute</span><span class="tok-p">(</span><span class="tok-s">"standalone"</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-s">"no"</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// &lt;?xml version="1.0" encoding="UTF-8" standalone="no"?&gt;</span>
<span class="tok-c1">// &lt;foo bar="baz"&gt;</span>
<span class="tok-c1">//         &lt;call&gt;hey&lt;/call&gt;</span>
<span class="tok-c1">// &lt;/foo&gt;</span>
<span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">save</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="xpath"><a class="anchor" href="https://pugixml.org/docs/manual.html#xpath"></a><a class="link" href="https://pugixml.org/docs/manual.html#xpath"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8. XPath</font></font></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果当前的任务是选择与某些条件匹配的文档节点的子集，则可以使用现有遍历功能对任何实用条件进行编码。</font><font style="vertical-align: inherit;">但是，在标准未预定义且来自文件的情况下，通常需要采用数据驱动的方法，或者使用遍历接口不方便并且需要更高级别的DSL。</font><font style="vertical-align: inherit;">有一种用于XML处理的标准语言XPath，在这些情况下很有用。</font><font style="vertical-align: inherit;">pugixml实现了XPath 1.0的几乎完整子集。</font><font style="vertical-align: inherit;">由于文档对象模型的差异和某些性能影响，因此轻微违反了官方规范，可以在</font></font><a href="https://pugixml.org/docs/manual.html#xpath.w3c"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">符合W3C规范中找到</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">本节的其余部分描述了XPath功能的接口。</font><font style="vertical-align: inherit;">请注意，如果您想学习使用XPath语言，则必须寻找其他教程或手册。</font><font style="vertical-align: inherit;">例如，您可以阅读</font></font><a href="http://www.w3schools.com/xpath/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">W3Schools XPath教程</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><a href="http://www.tizag.com/xmlTutorial/xpathtutorial.php"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">tizag.com上的XPath教程</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以及</font></font><a href="http://www.w3.org/TR/xpath/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath 1.0规范</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="sect2">
<h3 id="xpath.types"><a class="anchor" href="https://pugixml.org/docs/manual.html#xpath.types"></a><a class="link" href="https://pugixml.org/docs/manual.html#xpath.types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.1。</font><font style="vertical-align: inherit;">XPath类型</font></font></a></h3>
<div class="paragraph">
<p><a id="xpath_value_type"></a><a id="xpath_type_number"></a><a id="xpath_type_string"></a><a id="xpath_type_boolean"></a><a id="xpath_type_node_set"></a><a id="xpath_type_none"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
每个XPath表达式可以具有以下类型之一：布尔值，数字，字符串或节点集。</font><font style="vertical-align: inherit;">布尔类型对应于</font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，数字类型对应于</font></font><code>double</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，字符串类型对应于</font></font><code>std::string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>std::wstring</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这取决于是否</font></font><a href="https://pugixml.org/docs/manual.html#dom.unicode"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">启用了宽字符接口</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，并且节点集对应于</font></font><a href="https://pugixml.org/docs/manual.html#xpath_node_set"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xpath_node_set</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型。</font><font style="vertical-align: inherit;">有一个枚举，</font></font><code>xpath_value_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这可能需要的值</font></font><code>xpath_type_boolean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xpath_type_number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xpath_type_string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>xpath_type_node_set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，相应。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xpath_node"></a><a id="xpath_node::node"></a><a id="xpath_node::attribute"></a><a id="xpath_node::parent"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
由于XPath节点可以是节点，也可以是属性，因此存在特殊类型</font></font><code>xpath_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，这是这些类型的区分联合。</font><font style="vertical-align: inherit;">此类型的值包含两个节点句柄，一个为</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，另一个为</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型。</font><font style="vertical-align: inherit;">最多其中一个可以为非null。</font><font style="vertical-align: inherit;">可以使用获取这些句柄的访问器：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_node</span> <span class="tok-n">xpath_node</span><span class="tok-o">::</span><span class="tok-n">node</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xml_attribute</span> <span class="tok-n">xpath_node</span><span class="tok-o">::</span><span class="tok-n">attribute</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath节点可以为null，在这种情况下，两个访问器都返回null句柄。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，根据XPath规范，每个XPath节点都有一个父节点，可以通过以下函数进行检索：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xml_node</span> <span class="tok-n">xpath_node</span><span class="tok-o">::</span><span class="tok-n">parent</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>parent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果XPath节点对应于</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">handle（等于</font></font><code>node().parent()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），</font><font style="vertical-align: inherit;">则函数返回该节点的父节点；如果XPath节点对应于</font><font style="vertical-align: inherit;">handle，</font><font style="vertical-align: inherit;">则该函数返回该</font><font style="vertical-align: inherit;">属性所属的节点</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">对于空节点，</font></font><code>parent</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回空句柄。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xpath_node::unspecified_bool_type"></a><a id="xpath_node::comparison"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
像节点和属性句柄一样，XPath节点句柄可以隐式转换为类似布尔的对象，以检查它是否为空节点，也可以比较彼此是否相等。</font></font></p>
</div>
<div id="xpath_node::ctor" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您还可以使用以下三个构造函数之一创建XPath节点：默认构造函数，采用node参数的构造函数以及采用attribute和node参数的构造函数（在这种情况下，该属性必须属于节点的属性列表）。</font><font style="vertical-align: inherit;">from的构造函数</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是隐式的，因此通常可以传递</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">给Expect的函数</font></font><code>xpath_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">除此之外，您通常不需要创建自己的XPath节点对象，因为它们是通过选择函数返回给您的。</font></font></p>
</div>
<div id="xpath_node_set" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath表达式不是在单个节点上运行，而是在节点集上运行。</font><font style="vertical-align: inherit;">节点集是节点的集合，可以选择按正向文档顺序或反向顺序进行排序。</font><font style="vertical-align: inherit;">文档顺序在XPath规范中定义；</font><font style="vertical-align: inherit;">如果XPath节点以相应文档的XML表示形式出现在另一个节点之前，则它按文档顺序位于另一个节点之前。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xpath_node_set::const_iterator"></a><a id="xpath_node_set::begin"></a><a id="xpath_node_set::end"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
节点集由</font></font><code>xpath_node_set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">表示，</font><font style="vertical-align: inherit;">对象具有类似于顺序随机访问容器之一的接口。</font><font style="vertical-align: inherit;">它具有一个迭代器类型以及通常的开始/过去-结束迭代器访问器：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">typedef</span> <span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">*</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">const_iterator</span><span class="tok-p">;</span>
<span class="tok-n">const_iterator</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">begin</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">const_iterator</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">end</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="xpath_node_set::index"></a><a id="xpath_node_set::size"></a><a id="xpath_node_set::empty"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
而且它也可以通过索引进行迭代，就像</font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-k">operator</span><span class="tok-p">[](</span><span class="tok-kt">size_t</span> <span class="tok-n">index</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">size_t</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">size</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">bool</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">empty</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以上所有操作的语义与相同</font></font><code>std::vector</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：迭代器是随机访问的，以上所有操作都是恒定时间，并且以大于或等于设置大小的索引访问元素会导致未定义的行为。</font><font style="vertical-align: inherit;">您可以同时使用基于迭代器的访问和基于索引的访问，但是基于迭代器的访问可以更快。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xpath_node_set::type"></a><a id="xpath_node_set::type_unsorted"></a><a id="xpath_node_set::type_sorted"></a><a id="xpath_node_set::type_sorted_reverse"></a><a id="xpath_node_set::sort"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
迭代的顺序取决于集合内节点的顺序。</font><font style="vertical-align: inherit;">可以通过以下功能查询订单：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">enum</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">type_t</span> <span class="tok-p">{</span><span class="tok-n">type_unsorted</span><span class="tok-p">,</span> <span class="tok-n">type_sorted</span><span class="tok-p">,</span> <span class="tok-n">type_sorted_reverse</span><span class="tok-p">};</span>
<span class="tok-n">type_t</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">type</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回节点的当前顺序；</font></font><code>type_sorted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">装置，该节点是在向前文档顺序，</font></font><code>type_sorted_reverse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">意味着该节点是在相反的文档顺序，和</font></font><code>type_unsorted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">手段，无论为了保证（节点可以意外地是排序顺序即使</font></font><code>type()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回</font></font><code>type_unsorted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">如果您需要特定的迭代顺序，则可以通过</font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数</font><font style="vertical-align: inherit;">进行更改</font><font style="vertical-align: inherit;">：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">void</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">sort</span><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">reverse</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用</font></font><code>sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">根据参数以正向或反向文档顺序对节点进行排序；</font><font style="vertical-align: inherit;">此呼叫</font></font><code>type()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">后将返回</font></font><code>type_sorted</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或</font></font><code>type_sorted_reverse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div id="xpath_node_set::first" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通常不需要实际的迭代。</font><font style="vertical-align: inherit;">相反，仅需要文档顺序中的第一个元素。</font><font style="vertical-align: inherit;">为此，提供了一个特殊的访问器：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xpath_node</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">first</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此函数以正向文档顺序从集合中返回第一个节点，如果集合为空，则返回null节点。</font><font style="vertical-align: inherit;">请注意，虽然节点的结果不依赖于集合中节点的顺序（即，取决于的结果</font></font><code>type()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">），但是复杂度却</font><font style="vertical-align: inherit;">取决于</font><font style="vertical-align: inherit;">-如果对集合进行排序，则复杂度是恒定的，否则它的数目是线性的元素或更糟。</font></font></p>
</div>
<div id="xpath_node_set::ctor" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">尽管在大多数情况下，节点集是由XPath函数返回的，但有时仍需要手动构造节点集。</font><font style="vertical-align: inherit;">在这种情况下，提供了一个构造函数，该构造函数具有一个迭代器范围（</font></font><code>const_iterator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">是的typedef </font></font><code>const xpath_node*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和一个可选类型：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">xpath_node_set</span><span class="tok-p">(</span><span class="tok-n">const_iterator</span> <span class="tok-n">begin</span><span class="tok-p">,</span> <span class="tok-n">const_iterator</span> <span class="tok-n">end</span><span class="tok-p">,</span> <span class="tok-n">type_t</span> <span class="tok-n">type</span> <span class="tok-o">=</span> <span class="tok-n">type_unsorted</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构造函数复制指定的范围并设置指定的类型。</font><font style="vertical-align: inherit;">不会以任何方式检查范围内的对象。</font><font style="vertical-align: inherit;">您必须确保该范围不包含重复项，并且必须根据</font></font><code>type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">对对象进行排序</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">否则，使用此设置的XPath操作可能会产生意外结果。</font></font></p>
</div>
</div>
<div class="sect2">
<h3 id="xpath.select"><a class="anchor" href="https://pugixml.org/docs/manual.html#xpath.select"></a><a class="link" href="https://pugixml.org/docs/manual.html#xpath.select"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.2。</font><font style="vertical-align: inherit;">通过XPath表达式选择节点</font></font></a></h3>
<div class="paragraph">
<p><a id="xml_node::select_node"></a><a id="xml_node::select_nodes"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果要选择与某些XPath表达式匹配的节点，则可以使用以下函数进行操作：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xpath_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">select_node</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xpath_node_set</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">select_nodes</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><code>select_nodes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数将编译表达式，然后将其作为上下文节点进行执行，并返回结果节点集。</font></font><code>select_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从结果仅按文档顺序返回第一个节点，等效于调用</font></font><code>select_nodes(query).first()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">如果XPath表达式不匹配任何内容，或者节点句柄为null，则</font></font><code>select_nodes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个空集，然后</font></font><code>select_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回null。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果未禁用异常处理，</font><font style="vertical-align: inherit;">则在无法编译查询或返回节点集以外类型的值时</font><font style="vertical-align: inherit;">，两个函数均抛出</font></font><a href="https://pugixml.org/docs/manual.html#xpath_exception"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xpath_exception；</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">否则</font><font style="vertical-align: inherit;">，函数将抛出</font><a href="https://pugixml.org/docs/manual.html#xpath_exception"><font style="vertical-align: inherit;">xpath_exception</font></a><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">有关详细信息，</font><font style="vertical-align: inherit;">请参见</font></font><a href="https://pugixml.org/docs/manual.html#xpath.errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误处理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xml_node::select_node_precomp"></a><a id="xml_node::select_nodes_precomp"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
尽管表达式的编译速度很快，但是如果在小子树上多次使用相同的表达式，则编译时间可能会带来大量开销。</font><font style="vertical-align: inherit;">如果要执行许多类似的查询，请考虑将它们编译成查询对象（请参阅</font></font><a href="https://pugixml.org/docs/manual.html#xpath.query"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用查询对象</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以获取更多参考）。</font><font style="vertical-align: inherit;">获得编译的查询对象后，可以将其传递给选择函数，而不是表达式字符串：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xpath_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">select_node</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_query</span><span class="tok-o">&amp;</span> <span class="tok-n">query</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xpath_node_set</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">select_nodes</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_query</span><span class="tok-o">&amp;</span> <span class="tok-n">query</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果未禁用异常处理，</font><font style="vertical-align: inherit;">并且查询返回的值不是节点集类型</font><font style="vertical-align: inherit;">，则两个函数均抛出</font></font><a href="https://pugixml.org/docs/manual.html#xpath_exception"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xpath_exception</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是一个使用XPath表达式选择节点的示例（</font></font><a href="https://pugixml.org/docs/samples/xpath_select.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / xpath_select.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_node_set</span> <span class="tok-n">tools</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">select_nodes</span><span class="tok-p">(</span><span class="tok-s">"/Profile/Tools/Tool[@AllowRemote='true' and @DeriveCaptionFrom='lastparam']"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Tools:</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_node_set</span><span class="tok-o">::</span><span class="tok-n">const_iterator</span> <span class="tok-n">it</span> <span class="tok-o">=</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">begin</span><span class="tok-p">();</span> <span class="tok-n">it</span> <span class="tok-o">!=</span> <span class="tok-n">tools</span><span class="tok-p">.</span><span class="tok-n">end</span><span class="tok-p">();</span> <span class="tok-o">++</span><span class="tok-n">it</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_node</span> <span class="tok-n">node</span> <span class="tok-o">=</span> <span class="tok-o">*</span><span class="tok-n">it</span><span class="tok-p">;</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">node</span><span class="tok-p">.</span><span class="tok-n">node</span><span class="tok-p">().</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Filename"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span>
<span class="tok-p">}</span><font></font>
<font></font>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_node</span> <span class="tok-n">build_tool</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">select_node</span><span class="tok-p">(</span><span class="tok-s">"//Tool[contains(Description, 'build system')]"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">build_tool</span><span class="tok-p">)</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Build tool: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">build_tool</span><span class="tok-p">.</span><span class="tok-n">node</span><span class="tok-p">().</span><span class="tok-n">attribute</span><span class="tok-p">(</span><span class="tok-s">"Filename"</span><span class="tok-p">).</span><span class="tok-n">value</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"</span><span class="tok-se">\n</span><span class="tok-s">"</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="xpath.query"><a class="anchor" href="https://pugixml.org/docs/manual.html#xpath.query"></a><a class="link" href="https://pugixml.org/docs/manual.html#xpath.query"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.3。</font><font style="vertical-align: inherit;">使用查询对象</font></font></a></h3>
<div id="xpath_query" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当您</font></font><code>select_nodes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用表达式字符串作为参数进行调用时，将在后台创建查询对象。</font><font style="vertical-align: inherit;">查询对象表示已编译的XPath表达式。</font><font style="vertical-align: inherit;">在以下情况下可能需要查询对象：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以预编译表达式以查询对象，以在出现问题时节省编译时间。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用查询对象来评估XPath表达式，这些表达式会生成布尔值，数字或字符串。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以通过查询对象获取表达式值的类型。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">查询对象对应于</font></font><code>xpath_query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型。</font><font style="vertical-align: inherit;">它们是不可变且不可复制的：它们在创建时绑定到表达式，无法克隆。</font><font style="vertical-align: inherit;">如果要将查询对象放在容器中，请通过</font></font><code>new</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">运算符</font><font style="vertical-align: inherit;">在堆上分配它们</font><font style="vertical-align: inherit;">并将其存储</font></font><code>xpath_query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在该容器中，或者使用C11编译器（查询对象可在C11中移动）。</font></font></p>
</div>
<div id="xpath_query::ctor" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用将XPath表达式作为参数的构造函数来创建查询对象：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">explicit</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">xpath_query</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div id="xpath_query::return_type" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">表达式被编译，并且已编译的表示形式存储在新的查询对象中。</font><font style="vertical-align: inherit;">如果编译失败，</font><font style="vertical-align: inherit;">则在未禁用异常处理的情况下抛出</font></font><a href="https://pugixml.org/docs/manual.html#xpath_exception"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">xpath_exception</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font><font style="vertical-align: inherit;">有关详细信息，</font><font style="vertical-align: inherit;">请参见</font></font><a href="https://pugixml.org/docs/manual.html#xpath.errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误处理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">创建查询后，可以使用以下函数查询评估结果的类型：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xpath_value_type</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">return_type</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="xpath_query::evaluate_boolean"></a><a id="xpath_query::evaluate_number"></a><a id="xpath_query::evaluate_string"></a><a id="xpath_query::evaluate_node_set"></a><a id="xpath_query::evaluate_node"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
您可以使用以下功能之一评估查询：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">evaluate_boolean</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">double</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">evaluate_number</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">string_t</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">evaluate_string</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xpath_node_set</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">evaluate_node_set</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xpath_node</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">evaluate_node</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有函数都将上下文节点作为参数，计算表达式并返回结果，并将其转换为请求的类型。</font><font style="vertical-align: inherit;">根据XPath规范，任何类型的值都可以转换为布尔值，数字或字符串值，但是除节点集之外的任何类型都不能转换为节点集。</font><font style="vertical-align: inherit;">正因为如此，</font></font><code>evaluate_boolean</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>evaluate_number</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code>evaluate_string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">总是返回一个结果，但</font></font><code>evaluate_node_set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>evaluate_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在一个错误的结果，如果返回类型不是节点集（见</font></font><a href="https://pugixml.org/docs/manual.html#xpath.errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">错误处理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
呼叫</font></font><code>node.select_nodes("query")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等效于</font></font><code>xpath_query("query").evaluate_node_set(node)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">呼叫</font></font><code>node.select_node("query")</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等效于</font></font><code>xpath_query("query").evaluate_node(node)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
</font></font></td>
</tr>
</tbody></table>
</div>
<div id="xpath_query::evaluate_string_buffer" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，该</font></font><code>evaluate_string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回STL字符串。</font><font style="vertical-align: inherit;">因此，它在</font></font><a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_STL"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUGIXML_NO_STL</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式下</font><font style="vertical-align: inherit;">不可用，</font><font style="vertical-align: inherit;">并且通常还会分配内存。</font><font style="vertical-align: inherit;">还有另一个字符串评估函数：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">size_t</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">evaluate_string</span><span class="tok-p">(</span><span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">buffer</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">capacity</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该函数计算字符串，然后将结果写入</font></font><code>buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（但最多为</font></font><code>capacity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符）；</font><font style="vertical-align: inherit;">然后它将返回结果的完整大小（以字符为单位），包括结尾的零。</font><font style="vertical-align: inherit;">如果</font></font><code>capacity</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不为0，则结果缓冲区始终为零终止。</font><font style="vertical-align: inherit;">您可以按以下方式使用此功能：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先使用</font></font><code>buffer = 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font><font style="vertical-align: inherit;">调用函数</font></font><code>capacity = 0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">；</font><font style="vertical-align: inherit;">然后分配返回的字符数，并再次调用该函数，传递分配的存储空间和字符数；</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首先调用缓冲区和缓冲区容量小的函数；</font><font style="vertical-align: inherit;">然后，如果结果大于容量，则输出已被裁剪，因此分配更大的缓冲区并再次调用该函数。</font></font></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是使用查询对象的示例（</font></font><a href="https://pugixml.org/docs/samples/xpath_query.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / xpath_query.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// Select nodes via compiled query</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_query</span> <span class="tok-n">query_remote_tools</span><span class="tok-p">(</span><span class="tok-s">"/Profile/Tools/Tool[@AllowRemote='true']"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_node_set</span> <span class="tok-n">tools</span> <span class="tok-o">=</span> <span class="tok-n">query_remote_tools</span><span class="tok-p">.</span><span class="tok-n">evaluate_node_set</span><span class="tok-p">(</span><span class="tok-n">doc</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Remote tool: "</span><span class="tok-p">;</span>
<span class="tok-n">tools</span><span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">].</span><span class="tok-n">node</span><span class="tok-p">().</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// Evaluate numbers via compiled query</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_query</span> <span class="tok-n">query_timeouts</span><span class="tok-p">(</span><span class="tok-s">"sum(//Tool/@Timeout)"</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">query_timeouts</span><span class="tok-p">.</span><span class="tok-n">evaluate_number</span><span class="tok-p">(</span><span class="tok-n">doc</span><span class="tok-p">)</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-c1">// Evaluate strings via compiled query for different context nodes</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_query</span> <span class="tok-n">query_name_valid</span><span class="tok-p">(</span><span class="tok-s">"string-length(substring-before(@Filename, '_')) &gt; 0 and @OutputFileMasks"</span><span class="tok-p">);</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_query</span> <span class="tok-n">query_name</span><span class="tok-p">(</span><span class="tok-s">"concat(substring-before(@Filename, '_'), ' produces ', @OutputFileMasks)"</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-k">for</span> <span class="tok-p">(</span><span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xml_node</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">first_element_by_path</span><span class="tok-p">(</span><span class="tok-s">"Profile/Tools/Tool"</span><span class="tok-p">);</span> <span class="tok-n">tool</span><span class="tok-p">;</span> <span class="tok-n">tool</span> <span class="tok-o">=</span> <span class="tok-n">tool</span><span class="tok-p">.</span><span class="tok-n">next_sibling</span><span class="tok-p">())</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <span class="tok-n">s</span> <span class="tok-o">=</span> <span class="tok-n">query_name</span><span class="tok-p">.</span><span class="tok-n">evaluate_string</span><span class="tok-p">(</span><span class="tok-n">tool</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">query_name_valid</span><span class="tok-p">.</span><span class="tok-n">evaluate_boolean</span><span class="tok-p">(</span><span class="tok-n">tool</span><span class="tok-p">))</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">s</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="xpath.variables"><a class="anchor" href="https://pugixml.org/docs/manual.html#xpath.variables"></a><a class="link" href="https://pugixml.org/docs/manual.html#xpath.variables"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.4。</font><font style="vertical-align: inherit;">使用变量</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath查询可能包含对变量的引用；</font><font style="vertical-align: inherit;">如果您要使用依赖于某些动态参数的查询而无需手动准备完整的查询字符串，或者要对相同的查询重用相同的查询对象，则这很有用。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量引用具有以下形式</font></font><code>$name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font><font style="vertical-align: inherit;">为了使用它们，您必须提供一个变量集，其中包括查询中存在的所有具有正确类型的变量。</font><font style="vertical-align: inherit;">此集合传递给</font></font><code>xpath_query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构造函数或</font></font><code>select_nodes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>select_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">explicit</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">xpath_query</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">);</span>
<span class="tok-n">xpath_node</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">select_node</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xpath_node_set</span> <span class="tok-n">xml_node</span><span class="tok-o">::</span><span class="tok-n">select_nodes</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果使用查询对象，则可以在</font></font><code>evaluate</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>select</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调用</font><font style="vertical-align: inherit;">之前更改变量值</font><font style="vertical-align: inherit;">以更改查询行为。</font></font></p>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<div class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">注意</font></font></div>
</td>
<td class="content"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
变量集指针存储在查询对象中；</font><font style="vertical-align: inherit;">您必须确保集合的生存期超过查询对象的生存期。
</font></font></td>
</tr>
</tbody></table>
</div>
<div id="xpath_variable_set" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量集对应于</font></font><code>xpath_variable_set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，它本质上是一个变量容器。</font></font></p>
</div>
<div id="xpath_variable_set::add" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用以下功能添加新变量：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xpath_variable</span><span class="tok-o">*</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">::</span><span class="tok-n">add</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-n">xpath_value_type</span> <span class="tok-n">type</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">该函数尝试添加具有指定名称和类型的新变量；</font><font style="vertical-align: inherit;">如果在集合中不存在具有该名称的变量，则该函数添加新变量并返回变量句柄；</font><font style="vertical-align: inherit;">如果已经存在具有指定名称的变量，则如果变量具有指定的类型，则该函数返回变量句柄。</font><font style="vertical-align: inherit;">否则，该函数返回空指针。</font><font style="vertical-align: inherit;">如果分配失败，它也会返回空指针。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"></font><code>0</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将为</font><font style="vertical-align: inherit;">新变量分配默认值，该默认值取决于类型：</font><font style="vertical-align: inherit;">对于数字，</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于布尔值，对于字符串是空字符串以及对于节点集是空集。</font></font></p>
</div>
<div id="xpath_variable_set::get" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">您可以使用以下功能获取现有变量：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">xpath_variable</span><span class="tok-o">*</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">::</span><span class="tok-n">get</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
<span class="tok-k">const</span> <span class="tok-n">xpath_variable</span><span class="tok-o">*</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">::</span><span class="tok-n">get</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数返回变量句柄，如果找不到具有指定名称的变量，则返回空指针。</font></font></p>
</div>
<div id="xpath_variable_set::set" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">此外，还有一些帮助程序功能，用于按名称设置变量值。</font><font style="vertical-align: inherit;">他们尝试添加具有相应类型的变量（如果不存在），并设置值。</font><font style="vertical-align: inherit;">如果已经存在名称相同但类型不同的变量，则它们将返回</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">它们还会</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在分配失败时</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，这些函数不执行任何类型转换。</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-kt">bool</span> <span class="tok-n">value</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-kt">double</span> <span class="tok-n">value</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">value</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">&amp;</span> <span class="tok-n">value</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量值将复制到内部变量存储中，因此您可以在函数返回后对其进行修改或销毁。</font></font></p>
</div>
<div id="xpath_variable" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果按名称设置变量不够有效，或者必须检查变量信息或获取变量值，则可以使用变量句柄。</font><font style="vertical-align: inherit;">变量对应于</font></font><code>xpath_variable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型，变量句柄只是指向的指针</font></font><code>xpath_variable</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xpath_variable::type"></a><a id="xpath_variable::name"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了获取变量信息，可以使用以下功能之一：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">name</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-n">xpath_value_type</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">type</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">请注意，每个变量都有一个不同的类型，该类型是在创建变量时指定的，以后不能更改。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xpath_variable::get_boolean"></a><a id="xpath_variable::get_number"></a><a id="xpath_variable::get_string"></a><a id="xpath_variable::get_node_set"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
为了获取变量值，应根据变量类型使用以下功能之一：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">get_boolean</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-kt">double</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">get_number</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">get_string</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-k">const</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">&amp;</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">get_node_set</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些函数返回变量的值。</font><font style="vertical-align: inherit;">请注意，不执行任何类型转换。</font><font style="vertical-align: inherit;">如果发生类型不匹配，则返回一个虚拟值（</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于布尔值，</font></font><code>NaN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于数字，对于字符串而言为空字符串以及对于节点集而言为空集）。</font></font></p>
</div>
<div id="xpath_variable::set" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为了设置变量值，应根据变量类型使用以下功能之一：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-kt">bool</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">value</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">value</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">value</span><span class="tok-p">);</span>
<span class="tok-kt">bool</span> <span class="tok-n">xpath_variable</span><span class="tok-o">::</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">&amp;</span> <span class="tok-n">value</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这些函数修改变量值。</font><font style="vertical-align: inherit;">请注意，不执行任何类型转换。</font><font style="vertical-align: inherit;">如果发生类型不匹配，则函数返回</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ; </font><font style="vertical-align: inherit;">它们还会</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在分配失败时</font><font style="vertical-align: inherit;">返回</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">变量值将复制到内部变量存储中，因此您可以在函数返回后对其进行修改或销毁。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是在XPath查询中使用变量的示例（</font></font><a href="https://pugixml.org/docs/samples/xpath_variables.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / xpath_variables.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// Select nodes via compiled query</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_variable_set</span> <span class="tok-n">vars</span><span class="tok-p">;</span>
<span class="tok-n">vars</span><span class="tok-p">.</span><span class="tok-n">add</span><span class="tok-p">(</span><span class="tok-s">"remote"</span><span class="tok-p">,</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_type_boolean</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_query</span> <span class="tok-n">query_remote_tools</span><span class="tok-p">(</span><span class="tok-s">"/Profile/Tools/Tool[@AllowRemote = string($remote)]"</span><span class="tok-p">,</span> <span class="tok-o">&amp;</span><span class="tok-n">vars</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">vars</span><span class="tok-p">.</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-s">"remote"</span><span class="tok-p">,</span> <span class="tok-nb">true</span><span class="tok-p">);</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_node_set</span> <span class="tok-n">tools_remote</span> <span class="tok-o">=</span> <span class="tok-n">query_remote_tools</span><span class="tok-p">.</span><span class="tok-n">evaluate_node_set</span><span class="tok-p">(</span><span class="tok-n">doc</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">vars</span><span class="tok-p">.</span><span class="tok-n">set</span><span class="tok-p">(</span><span class="tok-s">"remote"</span><span class="tok-p">,</span> <span class="tok-nb">false</span><span class="tok-p">);</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_node_set</span> <span class="tok-n">tools_local</span> <span class="tok-o">=</span> <span class="tok-n">query_remote_tools</span><span class="tok-p">.</span><span class="tok-n">evaluate_node_set</span><span class="tok-p">(</span><span class="tok-n">doc</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Remote tool: "</span><span class="tok-p">;</span>
<span class="tok-n">tools_remote</span><span class="tok-p">[</span><span class="tok-mi">2</span><span class="tok-p">].</span><span class="tok-n">node</span><span class="tok-p">().</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Local tool: "</span><span class="tok-p">;</span>
<span class="tok-n">tools_local</span><span class="tok-p">[</span><span class="tok-mi">0</span><span class="tok-p">].</span><span class="tok-n">node</span><span class="tok-p">().</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-c1">// You can pass the context directly to select_nodes/select_node</span>
<span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_node_set</span> <span class="tok-n">tools_local_imm</span> <span class="tok-o">=</span> <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">select_nodes</span><span class="tok-p">(</span><span class="tok-s">"/Profile/Tools/Tool[@AllowRemote = string($remote)]"</span><span class="tok-p">,</span> <span class="tok-o">&amp;</span><span class="tok-n">vars</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Local tool imm: "</span><span class="tok-p">;</span>
<span class="tok-n">tools_local_imm</span><span class="tok-p">[</span><span class="tok-mi">0</span><span class="tok-p">].</span><span class="tok-n">node</span><span class="tok-p">().</span><span class="tok-n">print</span><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="xpath.errors"><a class="anchor" href="https://pugixml.org/docs/manual.html#xpath.errors"></a><a class="link" href="https://pugixml.org/docs/manual.html#xpath.errors"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.5。</font><font style="vertical-align: inherit;">错误处理</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath实现中有两种不同的错误处理机制：</font><font style="vertical-align: inherit;">使用的机制取决于是否禁用了异常支持（这由</font></font><a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_EXCEPTIONS"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PUGIXML_NO_EXCEPTIONS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">定义</font><font style="vertical-align: inherit;">控制</font><font style="vertical-align: inherit;">）。</font></font></p>
</div>
<div class="paragraph">
<p><a id="xpath_exception"></a><a id="xpath_exception::result"></a><a id="xpath_exception::what"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
默认情况下，XPath函数会</font></font><code>xpath_exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在出现错误的情况下</font><font style="vertical-align: inherit;">抛出</font><font style="vertical-align: inherit;">对象。</font><font style="vertical-align: inherit;">此外，如果任何内存分配失败，</font></font><code>std::bad_alloc</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">则会引发异常。</font><font style="vertical-align: inherit;">另外</font></font><code>xpath_exception</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果查询计算为一个节点集被抛出，但返回类型不是节点集。</font><font style="vertical-align: inherit;">如果查询构造函数成功（即未引发任何异常），则查询对象有效。</font><font style="vertical-align: inherit;">否则，您可以通过以下功能之一获取错误详细信息：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">virtual</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">xpath_exception</span><span class="tok-o">::</span><span class="tok-n">what</span><span class="tok-p">()</span> <span class="tok-k">const</span> <span class="tok-k">throw</span><span class="tok-p">();</span>
<span class="tok-k">const</span> <span class="tok-n">xpath_parse_result</span><span class="tok-o">&amp;</span> <span class="tok-n">xpath_exception</span><span class="tok-o">::</span><span class="tok-n">result</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><a id="xpath_query::unspecified_bool_type"></a><a id="xpath_query::result"></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
如果禁用了例外，则在解析失败的情况下，查询将初始化为无效状态；否则，查询将被初始化为无效状态。</font><font style="vertical-align: inherit;">您可以通过在布尔表达式中使用查询对象来测试查询对象是否有效</font></font><code>if (query) { …​ }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">另外，您可以通过result（）访问器获得解析结果：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">const</span> <span class="tok-n">xpath_parse_result</span><span class="tok-o">&amp;</span> <span class="tok-n">xpath_query</span><span class="tok-o">::</span><span class="tok-n">result</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有例外，</font><font style="vertical-align: inherit;">根据类型</font><font style="vertical-align: inherit;">评估无效查询会导致</font></font><code>false</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，空字符串</font></font><code>NaN</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或空节点集；</font><font style="vertical-align: inherit;">如果返回类型不是节点集，则将查询评估为节点集会导致节点集为空。</font></font></p>
</div>
<div id="xpath_parse_result" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关解析结果的信息是通过</font></font><code>xpath_parse_result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对象</font><font style="vertical-align: inherit;">返回的</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它包含解析状态和上次成功解析的字符与源流开头的偏移量：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">struct</span> <span class="tok-n">xpath_parse_result</span>
<span class="tok-p">{</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">error</span><span class="tok-p">;</span>
    <span class="tok-kt">ptrdiff_t</span> <span class="tok-n">offset</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">operator</span> <span class="tok-nf">bool</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-nf">description</span><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
<span class="tok-p">};</span></code></pre>
</div>
</div>
<div id="xpath_parse_result::error" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析结果表示为错误消息；</font><font style="vertical-align: inherit;">如果没有错误，则它为空指针，或者为ASCII零终止字符串形式的错误消息。</font></font></p>
</div>
<div id="xpath_parse_result::description" class="paragraph">
<p><code>description()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">成员函数可用于获取错误消息；</font><font class="" style="vertical-align: inherit;">它永远不会返回空指针，因此</font></font><code>description()</code><font style="vertical-align: inherit;"><font class="" style="vertical-align: inherit;">即使查询解析成功</font><font class="" style="vertical-align: inherit;">，您也可以放心使用</font><font class="" style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">请注意，</font><font style="vertical-align: inherit;">即使在</font><font style="vertical-align: inherit;">;中</font><font style="vertical-align: inherit;">也</font></font><code>description()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回一个</font></font><code>char</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串</font></font><code>PUGIXML_WCHAR_MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">您必须调用</font></font><a href="https://pugixml.org/docs/manual.html#as_wide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">as_wide</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">来获取</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串。</font></font></p>
</div>
<div id="xpath_parse_result::offset" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除错误消息外，解析结果还</font></font><code>offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含</font><font style="vertical-align: inherit;">一个</font><font style="vertical-align: inherit;">成员，该成员包含最后成功解析的字符的偏移量。</font><font style="vertical-align: inherit;">此偏移量以</font><a href="https://pugixml.org/docs/manual.html#char_t"><font style="vertical-align: inherit;">pugi :: char_t</font></a><font style="vertical-align: inherit;">为单位</font></font><a href="https://pugixml.org/docs/manual.html#char_t"><font style="vertical-align: inherit;"></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（字符模式为字节，宽字符模式为宽字符）。</font></font></p>
</div>
<div id="xpath_parse_result::bool" class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析结果对象可以隐式转换为</font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：</font></font><code>if (result) { …​ } else { …​ }</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</div>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是XPath错误处理的示例（</font></font><a href="https://pugixml.org/docs/samples/xpath_error.cpp" class="bare"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">samples / xpath_error.cpp</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）：</font></font></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// Exception is thrown for incorrect query syntax</span>
<span class="tok-k">try</span>
<span class="tok-p">{</span>
    <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">select_nodes</span><span class="tok-p">(</span><span class="tok-s">"//nodes[#true()]"</span><span class="tok-p">);</span>
<span class="tok-p">}</span>
<span class="tok-k">catch</span> <span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_exception</span><span class="tok-o">&amp;</span> <span class="tok-n">e</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Select failed: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">e</span><span class="tok-p">.</span><span class="tok-n">what</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-p">}</span><font></font>
<font></font>
<span class="tok-c1">// Exception is thrown for incorrect query semantics</span>
<span class="tok-k">try</span>
<span class="tok-p">{</span>
    <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">select_nodes</span><span class="tok-p">(</span><span class="tok-s">"(123)/next"</span><span class="tok-p">);</span>
<span class="tok-p">}</span>
<span class="tok-k">catch</span> <span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_exception</span><span class="tok-o">&amp;</span> <span class="tok-n">e</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Select failed: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">e</span><span class="tok-p">.</span><span class="tok-n">what</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-p">}</span><font></font>
<font></font>
<span class="tok-c1">// Exception is thrown for query with incorrect return type</span>
<span class="tok-k">try</span>
<span class="tok-p">{</span>
    <span class="tok-n">doc</span><span class="tok-p">.</span><span class="tok-n">select_nodes</span><span class="tok-p">(</span><span class="tok-s">"123"</span><span class="tok-p">);</span>
<span class="tok-p">}</span>
<span class="tok-k">catch</span> <span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">pugi</span><span class="tok-o">::</span><span class="tok-n">xpath_exception</span><span class="tok-o">&amp;</span> <span class="tok-n">e</span><span class="tok-p">)</span>
<span class="tok-p">{</span>
    <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">cout</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-s">"Select failed: "</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">e</span><span class="tok-p">.</span><span class="tok-n">what</span><span class="tok-p">()</span> <span class="tok-o">&lt;&lt;</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">endl</span><span class="tok-p">;</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="xpath.w3c"><a class="anchor" href="https://pugixml.org/docs/manual.html#xpath.w3c"></a><a class="link" href="https://pugixml.org/docs/manual.html#xpath.w3c"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">8.6。</font><font style="vertical-align: inherit;">符合W3C规范</font></font></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于文档对象模型，性能考虑因素和实现复杂性的差异，pugixml没有提供完全一致的XPath 1.0实现。</font><font style="vertical-align: inherit;">这是当前不兼容的列表：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">共享同一父级的连续文本节点不会合并，即在 </font></font><code>&lt;node&gt;text1 &lt;![CDATA[data]]&gt; text2&lt;/node&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点中应有一个文本节点子节点，而应具有三个子节点。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">由于文档类型声明不用于解析， </font></font><code>id()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数始终返回空节点集。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不支持命名空间节点（影响 </font></font><code>namespace::</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">轴）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">名称测试是对XML文档中的QName而不是扩展名称执行的；</font><font style="vertical-align: inherit;">对</font></font><code>&lt;foo xmlns:ns1='uri' xmlns:ns2='uri'&gt;&lt;ns1:child/&gt;&lt;ns2:child/&gt;&lt;/foo&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，查询</font></font><code>foo/ns1:*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将仅返回第一个孩子，而不是全部返回第一个孩子。</font><font style="vertical-align: inherit;">如果用户提供适当的名称空间声明，则兼容的XPath实现可以返回两个节点。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">字符串函数</font><font style="vertical-align: inherit;">根据库配置</font><font style="vertical-align: inherit;">将字符视为单个</font></font><code>char</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值或单个</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">值。</font><font style="vertical-align: inherit;">这意味着某些字符串函数不完全支持Unicode。</font><font style="vertical-align: inherit;">这会影响</font></font><code>substring()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>string-length()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>translate()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能。</font></font></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="changes"><a class="anchor" href="https://pugixml.org/docs/manual.html#changes"></a><a class="link" href="https://pugixml.org/docs/manual.html#changes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">9.变更日志</font></font></a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="v1.10"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.10"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.10"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.10 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2019-09-15</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维护版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行为更改：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性值中的制表符（ASCII 9）现在被编码为'＆＃9;' </font><font style="vertical-align: inherit;">生存往返</font></font></p>
</li>
<li>
<p><code>&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 字符不再在属性值中转义</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加Visual Studio .natvis文件以改善调试体验</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMake改进（用于构建多个版本和pkg-config调整的USE_POSTFIX和BUILD_SHARED_AND_STATIC_LIBS选项）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加format_skip_control_chars格式设置标志以跳过无效的，无法在格式正确的XML文件中使用的ASCII字符</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加format_attribute_single_quote格式设置标志以将单引号用作属性值，而不是默认的双引号。</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath的改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，XPath联合产生的稳定顺序不依赖于内存分配。</font><font style="vertical-align: inherit;">至关重要的是，如果您依赖于文档顺序遍历，则可能需要对XPath查询操作的输出进行排序</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">提高XPath联合操作的性能，使其速度提高约2倍</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容性改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复在DLL配置中内置时的Visual Studio警告</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复Coverity和clang中的静态分析误报</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复gcc中的Wdouble-promotion警告</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加对NuGet包的Visual Studio 2019支持</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v1.9"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.9"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">V1.9 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2018年4月4日</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维护版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规格变更：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>xml_document::load(const char*)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（在1.5中弃用）现在具有</font></font><code>deprecated</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性；</font><font style="vertical-align: inherit;">用</font></font><code>xml_document::load_string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替</font></font></p>
</li>
<li>
<p><code>xml_node::select_single_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（在1.5中弃用）现在具有</font></font><code>deprecated</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">属性；</font><font style="vertical-align: inherit;">用</font></font><code>xml_node::select_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加对xml_document的移动语义支持并改进对其他对象的移动语义支持</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CMake build现在导出包含目录</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用BUILD_SHARED_LIBS = ON的CMake构建现在将dllexport属性用于MSVC</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath的改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重做解析器/评估器，以不依赖于异常的控制流程；</font><font style="vertical-align: inherit;">禁用异常时不再使用longjmp</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改善某些无效表达式（例如</font></font><code>.[1]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">或）的</font><font style="vertical-align: inherit;">错误消息</font></font><code>(1</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">轻微的性能改进</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容性改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复德州仪器（TI）编译器警告</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复gcc某些版本的limits.h编译问题</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复Clang / C2的编译问题</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复GCC 7中的隐式掉线警告</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复gcc 8中的未知属性指令警告</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复Cray ++编译器错误</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用-fsanitize = integer修复无符号整数溢出错误</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在紧凑模式下修复未定义的行为消毒器问题</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v1.8"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.8"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.8"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.8 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2016-11-24</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维护版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规格变更：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当打印空元素时，在format_raw模式下/之前不再添加空格</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了parse_embed_pcdata解析模式，在这种模式下，如果可能的话，PCDATA值存储在元素节点中（大大减少了某些文档的内存消耗）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在解析过程中增加了对Latin-1（ISO-8859-1）编码的自动检测支持</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了format_no_empty_element_tags格式化标志，该标志输出空元素的开始/结束标签而不是空元素标签</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">较小的内存分配改进（在某些情况下最多可节省1％的内存）</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容性改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了Borland C ++ 5.4的编译问题</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了MinGW 3.8某些发行版的编译问题</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了各种Clang / GCC警告</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为MSVC 2010及更高版本的XPath对象启用了移动语义支持</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v1.7"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.7"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.7"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.7 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015-10-19</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要版本，具有性能和内存方面的改进以及一些新功能。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">紧凑模式：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入了一种新的树存储模式，该模式以一定的性能成本占用显着更少的内存（较小的DOM为2-5倍）。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以使用</font></font><code>PUGIXML_COMPACT</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define </font><font style="vertical-align: inherit;">启用该模式</font><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的整数解析/格式实现：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">从整数转换为整数的函数（例如</font></font><code>as_int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）不再依赖CRT。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新的实现速度提高了3-5倍，并且总是正确的WRT上溢或下溢。</font><font style="vertical-align: inherit;">这是一个行为更改-以前以前</font></font><code>as_uint()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将在值“ -1”上返回UINT_MAX，现在返回0。</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，如果编译器支持C ++ 11 </font><font style="vertical-align: inherit;">，</font><font style="vertical-align: inherit;">则可以移动</font><font style="vertical-align: inherit;">XPath对象（</font></font><code>xpath_query</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，，</font><font style="vertical-align: inherit;">）。</font><font style="vertical-align: inherit;">此外，</font><font style="vertical-align: inherit;">是可复制的。</font></font><code>xpath_node_set</code><font style="vertical-align: inherit;"></font><code>xpath_variable_set</code><font style="vertical-align: inherit;"></font><code>xpath_variable_set</code><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行了添加</font></font><code>format_indent_attributes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，使生成的XML更适合于行差异/合并工具。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>xml_node::attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">带有提示</font><font style="vertical-align: inherit;">的</font><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">变体</font><font style="vertical-align: inherit;">，可以提高查找性能。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在允许（但不是必需）自定义分配函数抛出而不是返回空指针。</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在内存不足的情况下修复Clang 3.7崩溃（C ++ DR 1748）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复XPath在SPARC64（和其他必须将double对齐到8个字节的其他32位体系结构）上崩溃的情况</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复xpath_node_set分配以提供强大的异常保证</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了可能从write（）抛出的自定义xml_writer实现的保存问题</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v1.6"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.6"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.6"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.6 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2015-04-10</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维护版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规格变更：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，在打印浮点数以确保往返时，属性/文本值使用更多数字。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当漂亮地打印具有混合内容的节点时，文本节点不再获得额外的周围空白</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了转换和规范化空间XPath函数以不再返回内部NUL字符的问题</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了DOCTYPE部分中格式错误的注释的缓冲区溢出</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOCTYPE解析不再不能用完格式错误的输入上的堆栈空间（XML解析现在使用有界的堆栈空间）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调整处理指令输出，以避免在PI值包含的情况下文档格式错误 </font></font><code>?&gt;</code></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v1.5"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.5"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.5 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014-11-27</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要版本，具有许多性能改进和一些新功能。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规格变更：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>xml_document::load(const char_t*)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被重新命名为</font></font><code>load_string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">旧方法仍然可用，并且在以后的版本中将不推荐使用</font></font></p>
</li>
<li>
<p><code>xml_node::select_single_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被重新命名为</font></font><code>select_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font><font style="vertical-align: inherit;">旧方法仍然可用，并且在将来的版本中将不推荐使用。</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"></font><code>xml_node::append_move</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于在文档中移动节点的</font><font style="vertical-align: inherit;">新增</font><font style="vertical-align: inherit;">功能和其他功能</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加</font></font><code>xpath_query::evaluate_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于评估结果为单个节点的查询</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化的XML解析（使用clang / gcc的速度快10-40％，使用MSVC的速度快10％）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在同一文档中复制节点时优化了内存消耗（现在共享字符串内容）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化的节点复制（跨文档副本的速度提高了10％，文档间副本的速度提高了3倍；现在它消耗的堆栈空间也恒定）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化的节点输出（速度提高了60％；现在它还消耗了恒定的堆栈空间）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化的XPath分配（查询评估现在可以减少临时分配）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化的XPath排序（在某些情况下，节点集排序的速度提高了2-3倍）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化的XPath评估（XPathMark套件快100倍；某些常用查询快3-4倍）</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容性改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font></font><code>xml_node::offset_debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">于角落情况</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了在某些情况下调用memcpy时的未定义行为</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了MSVC 2015编译警告</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已</font></font><code>contrib/foreach.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对Boost 1.56.0修复</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">调整注释输出，以避免注释值包含以下格式的文档 </font></font><code>--</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了使用append_buffer构造的文档的XPath排序</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复</font></font><code>load_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了启用了C ++ 11模式的MinGW中具有非ASCII字符的宽字符路径</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v1.4"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.4"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.4 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2014-02-27</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要版本，具有各种新功能，错误修复和兼容性改进。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规格变更：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有元素节点的文档现在会被拒绝，并</font></font><code>status_no_document_element</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">出现错误，除非</font></font><code>parse_fragment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用了option</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了XML片段解析（</font></font><code>parse_fragment</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了PCDATA空格修剪（</font></font><code>parse_trim_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and </font></font><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（</font></font><code>as_llong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>as_ullong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重载）</font><font style="vertical-align: inherit;">添加了长期支持</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>as_int</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>as_uint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>as_llong</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font><font style="vertical-align: inherit;">添加了十六进制整数解析支持</font></font><code>as_ullong</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加</font></font><code>xml_node::append_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以提高从片段组装文档的性能</font></font></p>
</li>
<li>
<p><code>xml_named_node_iterator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 现在是双向的</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">减少了编译和评估期间的XPath堆栈消耗（对嵌入式系统有用）</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容性改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进了对不支持wchar_t的平台的支持</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了c静态分析中的一些误报</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了各种GCC版本的几个编译警告</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了XPath实现中的未定义指针算法</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了某些流类型的无法搜索的iostream支持，即</font></font><code>file_source</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用管道输入进行</font><font style="vertical-align: inherit;">Boost</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复</font></font><code>xpath_query::return_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了某些表达式</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了dllexport问题 </font></font><code>xml_named_node_iterator</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复</font></font><code>find_child_by_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了名称/值为空的属性的断言</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v1.2"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.2"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2012-05-01</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要版本，具有仅标头模式，各种接口增强功能（即PCDATA操作和C ++ 11迭代），许多其他功能和兼容性改进。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>xml_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于处理元素节点的PCDATA / CDATA内容的帮助程序类</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了可选的仅标头模式（由</font></font><code>PUGIXML_HEADER_ONLY</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define </font><font style="vertical-align: inherit;">控制</font><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已添加</font></font><code>xml_node::children()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_node::attributes()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于C ++ 11，范围为循环或</font></font><code>BOOST_FOREACH</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在加载和保存期间增加了对Latin-1（ISO-8859-1）编码转换的支持</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为添加了自定义默认值</font></font><code>xml_attribute::as_*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（如果属性不存在，则返回</font><font style="vertical-align: inherit;">默认值</font><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>parse_ws_pcdata_single</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于保留仅空白PCDATA的标志，以防它是唯一的子级</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>format_save_file_text</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于</font></font><code>xml_document::save_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以文本而不是二进制形式打开文件的功能（在Windows上更改了换行符）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>format_no_escapes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志以禁用特殊符号转义（补码</font></font><code>~parse_escapes</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了对从不支持查找的流中加载文档的支持</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>PUGIXML_MEMORY_*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于调整分配行为的常量（适用于嵌入式系统）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>PUGIXML_VERSION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">预处理器定义</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容性改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析器不需要setjmp支持（提高了与某些嵌入式平台的兼容性，可以进行</font></font><code>/clr:pure</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">STL前向声明不再使用（修复了SunCC / RWSTL编译，修复了C ++ 11模式下的clang编译）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了AirPlay SDK，Android，Windows Mobile（WinCE）和C ++ / CLI编译</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了针对各种GCC版本，英特尔C ++编译器和Clang的一些编译警告</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了不安全的布尔转换，以避免C ++ / CLI出现问题</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迭代器取消引用运算符现在为const（修复了Boost </font></font><code>filter_iterator</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持）</font></font></p>
</li>
<li>
<p><code>xml_document::save_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 现在在保存过程中检查文件I / O错误</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v1.0"><a class="anchor" href="https://pugixml.org/docs/manual.html#v1.0"></a><a class="link" href="https://pugixml.org/docs/manual.html#v1.0"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v1.0 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2010-11-01</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要版本，具有许多XPath增强功能，广泛的字符文件名支持，其他性能改进，错误修复等。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath实现已移至</font></font><code>pugixml.cpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（这是目前唯一的源文件）；</font><font style="vertical-align: inherit;">使用</font></font><code>PUGIXML_NO_XPATH</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，如果你想禁用XPath来减少代码大小</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在支持XPath，没有例外（</font></font><code>PUGIXML_NO_EXCEPTIONS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）；</font><font style="vertical-align: inherit;">错误处理机制取决于异常支持的存在</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在支持不带STL（</font></font><code>PUGIXML_NO_STL</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）的</font><font style="vertical-align: inherit;">XPath</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入变量支持</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入了new </font></font><code>xpath_query::evaluate_string</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，无需STL即可使用</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入了新的</font></font><code>xpath_node_set</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">构造函数（来自迭代器范围）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">评估功能现在接受属性上下文节点</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">所有内部分配均使用自定义分配功能</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进的错误报告；</font><font style="vertical-align: inherit;">现在返回最后一个解析的偏移量以及解析错误</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了在打开流异常的情况下从流加载的内存泄漏</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了在一种情况下使用空指针调用的自定义释放函数</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了迭代器类别函数的缺失属性；</font><font style="vertical-align: inherit;">现在可以导出所有函数/类的DLL</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解决了Digital Mars编译器错误，该错误导致多个函数中的次要读取超量提取</font></font></p>
</li>
<li>
<p><code>load_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 现在可以在MSVC / MinGW中使用2个以上Gb文件</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：修复了错误查询导致的内存泄漏</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：</font></font><code>xpath_node()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有空属性参数的</font><font style="vertical-align: inherit;">固定</font><font style="vertical-align: inherit;">属性构造函数</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：</font></font><code>lang()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非ASCII参数的</font><font style="vertical-align: inherit;">固定</font><font style="vertical-align: inherit;">函数</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规格变更：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">包含的CDATA节点</font></font><code>]]&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">被打印为多个节点；</font><font style="vertical-align: inherit;">虽然这会改变内部结构，但这是转义CDATA内容的唯一方法</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，解析期间的内存分配错误会保留上一次解析的偏移量（以提供有关解析进度的想法）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">如果元素节点具有唯一的子节点，并且属于CDATA类型，则省略多余的缩进（以前，此行为仅适用于PCDATA子节点）</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">附加功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>xml_parse_result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">默认构造函数</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已添加</font></font><code>xml_document::load_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>xml_document::save_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">具有宽字符路径</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font><font style="vertical-align: inherit;">/ </font><font style="vertical-align: inherit;">参数</font><font style="vertical-align: inherit;">添加</font></font><code>as_utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>as_wide</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重载</font></font><code>std::wstring</code><font style="vertical-align: inherit;"></font><code>std::string</code><font style="vertical-align: inherit;"></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了DOCTYPE节点类型（</font></font><code>node_doctype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）和特殊的解析标志</font></font><code>parse_doctype</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，以在解析过程中将此类节点添加到文档中</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>parse_full</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析标志掩码，该掩码扩展</font></font><code>parse_default</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了所有节点类型的解析标志，除了</font></font><code>parse_ws_pcdata</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>xml_node::hash_value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>xml_attribute::hash_value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在基于哈希的容器中使用的函数</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>internal_object()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">既</font><font style="vertical-align: inherit;">增加</font><font style="vertical-align: inherit;">又增加了构造函数</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">以简化编组（对语言绑定很有用）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新增</font></font><code>xml_document::document_element()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了</font></font><code>xml_node::prepend_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_node::prepend_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并且</font></font><code>xml_node::prepend_copy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加入</font></font><code>xml_node::append_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_node::prepend_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_node::insert_child_before</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>xml_node::insert_child_after</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重载元素节点（具有名称代替类型）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新增</font></font><code>xml_document::reset()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>xml_node::root()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>xml_node::offset_debug()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在O（1），而不是O（logN）的的</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次要解析优化</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">DOM树（</font></font><code>set_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）中</font><font style="vertical-align: inherit;">字符串的次内存优化</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于DOM树中的字符串内存回收的内存优化（</font></font><code>set_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，如果内存浪费太大，则重新分配缓冲区）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：优化的文档顺序排序</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：优化的子轴/属性轴步骤</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：MSVC中优化的数字到字符串转换</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：针对许多参数优化的concat</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：优化的评估分配机制：不对常量和文档字符串进行堆分配</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath：优化的评估分配机制：所有临时人员的分配均使用类似于堆栈的快速分配器</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容性：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除去通配符函数（</font></font><code>xml_node::child_w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_node::attribute_w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">等）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已移除 </font></font><code>xml_node::all_elements_by_name</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除</font></font><code>xpath_type_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举；</font><font style="vertical-align: inherit;">用</font></font><code>xpath_value_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除</font></font><code>format_write_bom_utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举；</font><font style="vertical-align: inherit;">用</font></font><code>format_write_bom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除去</font></font><code>xml_document::precompute_document_order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_attribute::document_order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>xml_node::document_order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能; </font><font style="vertical-align: inherit;">文档订单排序优化现在是自动的</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除</font></font><code>xml_document::parse</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能和</font></font><code>transfer_ownership</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">结构；</font><font style="vertical-align: inherit;">使用</font></font><code>xml_document::load_buffer_inplace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>xml_document::load_buffer_inplace_own</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">删除</font></font><code>as_utf16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能；</font><font style="vertical-align: inherit;">用</font></font><code>as_wide</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">代替</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.9"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.9"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.9"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.9 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2010-07-01</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要版本，具有扩展和改进的Unicode支持，其他性能改进，错误修复等。</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Unicode的主要改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入了编码支持（加载时自动/手动编码检测，保存时手动选择编码，从/转换为UTF8，UTF16 LE / BE，UTF32 LE / BE）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引入的</font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">模式（您可以将</font></font><code>PUGIXML_WCHAR_MODE</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">define </font><font style="vertical-align: inherit;">设置</font><font style="vertical-align: inherit;">为将pugixml内部编码从UTF8 </font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">切换为；所有功能都切换为其Unicode变体）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">加载/保存功能现在支持广泛的流</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了文档解析失败时文档损坏的问题</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath字符串/数字转换的改进（提高精度，修正了崩溃的巨大数字）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进的DOCTYPE解析：现在解析器可以识别所有格式正确的DOCTYPE声明</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font></font><code>xml_attribute::as_uint()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为大数（即2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">32</font></font></sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> -1）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>xml_node::first_element_by_path</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对于路径组件是</font><font style="vertical-align: inherit;">固定的</font><font style="vertical-align: inherit;">，该路径组件是节点名称的前缀，但不完全相同。</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规格变更：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>parse()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API更改为</font></font><code>load_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>load_buffer_inplace</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>load_buffer_inplace_own</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font><code>load_buffer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">API不需要以零结尾的字符串。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重命名</font></font><code>as_utf16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>as_wide</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将</font></font><code>xml_node::offset_debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">返回类型和</font></font><code>xml_parse_result::offset</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">类型</font><font style="vertical-align: inherit;">更改</font><font style="vertical-align: inherit;">为</font></font><code>ptrdiff_t</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">空名称的节点/属性现在打印为 </font></font><code>:anonymous</code></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">性能改进：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化的文档解析和保存</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">更改了内部内存管理：内部分配器用于元数据和名称/值数据；</font><font style="vertical-align: inherit;">如果已分配的页面中的所有分配都已删除，则会删除已分配的页面</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化的内存消耗：</font></font><code>sizeof(xml_node_struct)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在x86上从40字节减少到32字节</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">按数量级优化调试模式解析/保存</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">杂：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">除</font></font><code>&lt;exception&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">中的</font><font style="vertical-align: inherit;">所有STL包含项</font></font><code>pugixml.hpp</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">均被前向声明替换</font></font></p>
</li>
<li>
<p><code>xml_node::remove_child</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">而</font></font><code>xml_node::remove_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在返回操作结果</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">兼容性：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>parse()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>as_utf16</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">保留兼容性（不推荐使用这些功能，并将在1.0版中将其删除）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不建议使用通配符，</font></font><code>document_order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/，</font></font><code>precompute_document_order</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">函数，</font></font><code>all_elements_by_name</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能和</font></font><code>format_write_bom_utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志，并将在1.0版中将其删除</font></font></p>
</li>
<li>
<p><code>xpath_type_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">枚举更名为</font></font><code>xpath_value_type</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">; </font></font><code>xpath_type_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不推荐使用，将在1.0版中删除</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.5"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.5"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.5"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.5 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009-11-08</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">主要错误修正版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">XPath错误修正：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font></font><code>translate()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>lang()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>concat()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能（无限循环/崩溃）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了带有空文字字符串（</font></font><code>""</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">的查询的编译</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定轴测试：它们从不向现在的结果节点集添加空节点/属性</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了节点集的字符串值求值（结果不包括某些文本后代）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font></font><code>self::</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">轴（行为类似于</font></font><code>ancestor-or-self::</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font><font style="vertical-align: inherit;">轴</font></font><code>following::</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>preceding::</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">轴（它们分别包括后代节点和祖先节点）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">次要</font></font><code>namespace-uri()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">功能</font><font style="vertical-align: inherit;">修复</font><font style="vertical-align: inherit;">（名称空间声明范围包括名称空间声明属性的父元素）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在不再解析一些错误的查询（例如</font></font><code>foo: *</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font></font><code>text()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc。</font><font style="vertical-align: inherit;">节点测试解析错误（即</font></font><code>foo[text()]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">编译失败）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定根步骤（</font></font><code>/</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）-如果在空节点上评估查询，则现在选择空节点集</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定的字符串到数字的转换（</font></font><code>"123 "</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为NaN，</font></font><code>"123 .456"</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换为123.456-现在结果分别为123和NaN）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在，节点集复制保留排序类型；</font><font style="vertical-align: inherit;">导致某些查询的性能更好</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">其他错误修正：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font></font><code>xml_node::offset_debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">于PI节点</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了空属性检查 </font></font><code>xml_node::remove_attribute</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font></font><code>node_pi</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>node_declaration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">复制</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">const正确性修复</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">规格变更：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>xpath_node::select_nodes()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 如果表达式返回类型不是节点集（而不是断言），则相关函数现在会引发异常</font></font></p>
</li>
<li>
<p><code>xml_node::traverse()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在为</font></font><code>begin()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>end()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回调</font><font style="vertical-align: inherit;">都将depth设置为-1 </font><font style="vertical-align: inherit;">（分别为0 </font></font><code>begin()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和-1 </font></font><code>end()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在非原始节点打印的情况下，如果PCDATA具有同级，则在节点内部的PCDATA之后输出换行符</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">UTF8→ </font></font><code>wchar_t</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">转换现在认为5字节类似UTF8的序列无效</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">增加了</font></font><code>xpath_node_set::operator[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对基于索引的迭代</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加 </font></font><code>xpath_query::return_type()</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了用于内存管理功能的getter访问器</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.42"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.42"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.42"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.42 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009-09-17</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维护版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">自定义分配功能或</font></font><code>delete[]</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>free</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不兼容时的</font><font style="vertical-align: inherit;">固定释放</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修正了针对错误查询的XPath解析器（即，错误的XPath查询现在应始终无法编译）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">常量正确性修复 </font></font><code>find_child_by_attribute</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进的兼容性（其他警告修复，修复了</font></font><code>&lt;cstring&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">对GCC的依赖关系）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了迭代器的开始/结束和打印功能，可在空节点上正常工作</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新增</font></font><code>PUGIXML_API</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>PUGIXML_CLASS</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ </font></font><code>PUGIXML_FUNCTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">配置宏来控制类/功能属性</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了</font></font><code>xml_attribute::set_value</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">针对不同类型的重载</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.41"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.41"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.41"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.41 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009-02-08</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维护版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了节点打印的错误（有时某些内容未写入输出流）</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.4"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.4"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.4"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.4 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2009-01-18</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">样本中的文档修复，可</font></font><code>parse()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进行手动寿命控制</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了XPath中的文档顺序排序（</font></font><code>xpath_node_set::sort</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些XPath查询</font><font style="vertical-align: inherit;">之后导致错误的节点顺序</font><font style="vertical-align: inherit;">和错误的结果）</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">节点打印更改：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打印节点时单引号不再转义</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">打印节点时，ASCII表后半部分的符号不再转义；</font><font style="vertical-align: inherit;">因此，由于</font></font><code>format_utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">不再需要标记，因此将其删除，并将其</font></font><code>format_write_bom</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重命名为</font></font><code>format_write_bom_utf8</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重做节点打印-现在可以通过</font></font><code>xml_writer</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">界面使用；</font><font style="vertical-align: inherit;">为实现</font></font><code>FILE*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>std::ostream</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可用。</font><font style="vertical-align: inherit;">副作用是，</font></font><code>xml_document::save_file</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在无需STL就可以使用。</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为属性（</font></font><code>xml_attribute::as_uint</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>xml_attribute::operator=</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）</font><font style="vertical-align: inherit;">添加了无符号整数支持</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在</font></font><code>&lt;?xml …​?&gt;</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>node_declaration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">当</font></font><code>parse_declaration</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">指定标志</font><font style="vertical-align: inherit;">时，</font><font style="vertical-align: inherit;">文档声明（</font><font style="vertical-align: inherit;">）被解析为具有类型的节点</font><font style="vertical-align: inherit;">（对编码/版本的访问就好像它们是属性一样，即</font></font><code>doc.child("xml").attribute("version").as_float()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">）；</font><font style="vertical-align: inherit;">还添加了用于节点打印的相应标志</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了对自定义内存管理的支持（</font></font><code>set_memory_management_functions</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关详细信息，</font><font style="vertical-align: inherit;">请参阅</font><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">已实现的节点/属性复制（请参阅</font></font><code>xml_node::insert_copy_*</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>xml_node::append_copy</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关详细信息）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在某些情况下（例如COLLADA文件）</font><font style="vertical-align: inherit;">添加</font></font><code>find_child_by_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">并</font></font><code>find_child_by_attribute_w</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">简化了解析代码</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了用于调试目的的文件偏移信息查询​​（现在您可以确定</font></font><code>xml_node</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">解析文件</font><font style="vertical-align: inherit;">中任何</font><font style="vertical-align: inherit;">文件的</font><font style="vertical-align: inherit;">确切位置</font><font style="vertical-align: inherit;">，</font></font><code>xml_node::offset_debug</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有关详细信息</font><font style="vertical-align: inherit;">，请参阅</font><font style="vertical-align: inherit;">）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进的错误处理解析-现在</font></font><code>load()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，</font></font><code>load_file()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>parse()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">回归</font></font><code>xml_parse_result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，其中包含错误代码和最后解析的偏移; </font><font style="vertical-align: inherit;">这不会破坏</font></font><code>xml_parse_result</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">可以隐式转换为的</font><font style="vertical-align: inherit;">旧界面</font></font><code>bool</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.34"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.34"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.34"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.34 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2007-10-31</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">维护版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了从文本模式iostream加载的错误</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了</font></font><code>transfer_ownership</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true且解析失败</font><font style="vertical-align: inherit;">时的泄漏</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修正了在保存（</font></font><code>\r</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>\n</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">现在的属性值转义）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重命名</font></font><code>free()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">为</font></font><code>destroy()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">-报告了一些宏冲突</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进的兼容性（受支持的Digital Mars C ++，MSVC 6，CodeWarrior 8，PGI C ++，Comeau，受支持的PS3和XBox360）</font></font></p>
</li>
<li>
<p><code>PUGIXML_NO_EXCEPTION</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 标记平台时不进行异常处理</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.3"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.3"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.3"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.3 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2007-02-21</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重构，重做和改进的版本。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">接口：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了XPath</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了树修改功能</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">没有添加STL编译模式</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">将保存文档添加到文件</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重构的解析标志</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"></font><code>xml_parser</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">赞成</font><font style="vertical-align: inherit;">罢免的</font><font style="vertical-align: inherit;">阶级</font></font><code>xml_document</code></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了传输所有权解析模式</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改良的方式</font></font><code>xml_tree_walker</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">工作</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">迭代器现在是非恒定的</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">实现方式：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持多种编译器和平台</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">重构并加速解析核心</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">改进的标准合规性</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">添加了XPath实现</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复了一些错误</font></font></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.2"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.2"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.2"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.2 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2006-11-06</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">首次公开发行。</font><font style="vertical-align: inherit;">变化：</font></font></p>
</div>
<div class="ulist">
<ul>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Bug修复：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">固定</font></font><code>child_value()</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">（对于空节点）</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">修复</font></font><code>xml_parser_impl</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">了W4的警告</font></font></p>
</li>
</ol>
</div>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">新功能：</font></font></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">引进</font></font><code>child_value(name)</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>child_value_w(name)</code></p>
</li>
<li>
<p><code>parse_eol_pcdata</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><code>parse_eol_attribute</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">标志+ </font></font><code>parse_minimal</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化</font></font></p>
</li>
<li>
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优化 </font></font><code>strconv_t</code></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="v0.1"><a class="anchor" href="https://pugixml.org/docs/manual.html#v0.1"></a><a class="link" href="https://pugixml.org/docs/manual.html#v0.1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">v0.1 </font></font><sup><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2006-07-15</font></font></sup></a></h3>
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">用于测试目的的第一个私人发行</font></font></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="apiref"><a class="anchor" href="https://pugixml.org/docs/manual.html#apiref"></a><a class="link" href="https://pugixml.org/docs/manual.html#apiref"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10. API参考</font></font></a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">这是pugixml中所有宏，类型，枚举，类和函数的参考。</font><font style="vertical-align: inherit;">每个符号都是指向本手册相关部分的链接。</font></font></p>
</div>
<div class="sect2">
<h3 id="apiref.macros"><a class="anchor" href="https://pugixml.org/docs/manual.html#apiref.macros"></a><a class="link" href="https://pugixml.org/docs/manual.html#apiref.macros"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.1。</font><font style="vertical-align: inherit;">巨集</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_WCHAR_MODE">PUGIXML_WCHAR_MODE</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_COMPACT">PUGIXML_COMPACT</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_XPATH">PUGIXML_NO_XPATH</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_STL">PUGIXML_NO_STL</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_NO_EXCEPTIONS">PUGIXML_NO_EXCEPTIONS</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_API">PUGIXML_API</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_CLASS">PUGIXML_CLASS</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_FUNCTION">PUGIXML_FUNCTION</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_MEMORY_PAGE_SIZE">PUGIXML_MEMORY_PAGE_SIZE</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_MEMORY_OUTPUT_STACK">PUGIXML_MEMORY_OUTPUT_STACK</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_MEMORY_XPATH_PAGE_SIZE">PUGIXML_MEMORY_XPATH_PAGE_SIZE</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_HEADER_ONLY">PUGIXML_HEADER_ONLY</a></span>
<span class="tok-cp">#define <a href="https://pugixml.org/docs/manual.html#PUGIXML_HAS_LONG_LONG">PUGIXML_HAS_LONG_LONG</a></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apiref.types"><a class="anchor" href="https://pugixml.org/docs/manual.html#apiref.types"></a><a class="link" href="https://pugixml.org/docs/manual.html#apiref.types"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.2。</font><font style="vertical-align: inherit;">种类</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">typedef</span> <span class="tok-n">configuration</span><span class="tok-o">-</span><span class="tok-n">defined</span><span class="tok-o">-</span><span class="tok-n">type</span> <a href="https://pugixml.org/docs/manual.html#char_t">char_t</a><span class="tok-p">;</span>
<span class="tok-k">typedef</span> <span class="tok-n">configuration</span><span class="tok-o">-</span><span class="tok-n">defined</span><span class="tok-o">-</span><span class="tok-n">type</span> <a href="https://pugixml.org/docs/manual.html#string_t">string_t</a><span class="tok-p">;</span>
<span class="tok-k">typedef</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-p">(</span><span class="tok-o">*</span><a href="https://pugixml.org/docs/manual.html#allocation_function">allocation_function</a><span class="tok-p">)(</span><span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">);</span>
<span class="tok-k">typedef</span> <span class="tok-nf">void</span> <span class="tok-p">(</span><span class="tok-o">*</span><a href="https://pugixml.org/docs/manual.html#deallocation_function">deallocation_function</a><span class="tok-p">)(</span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">ptr</span><span class="tok-p">);</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apiref.enums"><a class="anchor" href="https://pugixml.org/docs/manual.html#apiref.enums"></a><a class="link" href="https://pugixml.org/docs/manual.html#apiref.enums"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.3。</font><font style="vertical-align: inherit;">枚举</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">enum</span> <a href="https://pugixml.org/docs/manual.html#xml_node_type">xml_node_type</a>
    <a href="https://pugixml.org/docs/manual.html#node_null">node_null</a>
    <a href="https://pugixml.org/docs/manual.html#node_document">node_document</a>
    <a href="https://pugixml.org/docs/manual.html#node_element">node_element</a>
    <a href="https://pugixml.org/docs/manual.html#node_pcdata">node_pcdata</a>
    <a href="https://pugixml.org/docs/manual.html#node_cdata">node_cdata</a>
    <a href="https://pugixml.org/docs/manual.html#node_comment">node_comment</a>
    <a href="https://pugixml.org/docs/manual.html#node_pi">node_pi</a>
    <a href="https://pugixml.org/docs/manual.html#node_declaration">node_declaration</a>
    <a href="https://pugixml.org/docs/manual.html#node_doctype">node_doctype</a><font></font>
<font></font>
<span class="tok-k">enum</span> <a href="https://pugixml.org/docs/manual.html#xml_parse_status">xml_parse_status</a>
    <a href="https://pugixml.org/docs/manual.html#status_ok">status_ok</a>
    <a href="https://pugixml.org/docs/manual.html#status_file_not_found">status_file_not_found</a>
    <a href="https://pugixml.org/docs/manual.html#status_io_error">status_io_error</a>
    <a href="https://pugixml.org/docs/manual.html#status_out_of_memory">status_out_of_memory</a>
    <a href="https://pugixml.org/docs/manual.html#status_internal_error">status_internal_error</a>
    <a href="https://pugixml.org/docs/manual.html#status_unrecognized_tag">status_unrecognized_tag</a>
    <a href="https://pugixml.org/docs/manual.html#status_bad_pi">status_bad_pi</a>
    <a href="https://pugixml.org/docs/manual.html#status_bad_comment">status_bad_comment</a>
    <a href="https://pugixml.org/docs/manual.html#status_bad_cdata">status_bad_cdata</a>
    <a href="https://pugixml.org/docs/manual.html#status_bad_doctype">status_bad_doctype</a>
    <a href="https://pugixml.org/docs/manual.html#status_bad_pcdata">status_bad_pcdata</a>
    <a href="https://pugixml.org/docs/manual.html#status_bad_start_element">status_bad_start_element</a>
    <a href="https://pugixml.org/docs/manual.html#status_bad_attribute">status_bad_attribute</a>
    <a href="https://pugixml.org/docs/manual.html#status_bad_end_element">status_bad_end_element</a>
    <a href="https://pugixml.org/docs/manual.html#status_end_element_mismatch">status_end_element_mismatch</a>
    <a href="https://pugixml.org/docs/manual.html#status_append_invalid_root">status_append_invalid_root</a>
    <a href="https://pugixml.org/docs/manual.html#status_no_document_element">status_no_document_element</a><font></font>
<font></font>
<span class="tok-k">enum</span> <a href="https://pugixml.org/docs/manual.html#xml_encoding">xml_encoding</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_auto">encoding_auto</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_utf8">encoding_utf8</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_utf16_le">encoding_utf16_le</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_utf16_be">encoding_utf16_be</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_utf16">encoding_utf16</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_utf32_le">encoding_utf32_le</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_utf32_be">encoding_utf32_be</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_utf32">encoding_utf32</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_wchar">encoding_wchar</a>
    <a href="https://pugixml.org/docs/manual.html#encoding_latin1">encoding_latin1</a><font></font>
<font></font>
<span class="tok-k">enum</span> <a href="https://pugixml.org/docs/manual.html#xpath_value_type">xpath_value_type</a>
    <a href="https://pugixml.org/docs/manual.html#xpath_type_none">xpath_type_none</a>
    <a href="https://pugixml.org/docs/manual.html#xpath_type_node_set">xpath_type_node_set</a>
    <a href="https://pugixml.org/docs/manual.html#xpath_type_number">xpath_type_number</a>
    <a href="https://pugixml.org/docs/manual.html#xpath_type_string">xpath_type_string</a>
    <a href="https://pugixml.org/docs/manual.html#xpath_type_boolean">xpath_type_boolean</a></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apiref.constants"><a class="anchor" href="https://pugixml.org/docs/manual.html#apiref.constants"></a><a class="link" href="https://pugixml.org/docs/manual.html#apiref.constants"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.4。</font><font style="vertical-align: inherit;">常数</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-c1">// Formatting options bit flags:</span>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_attribute_single_quote">format_attribute_single_quote</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_default">format_default</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_indent">format_indent</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_indent_attributes">format_indent_attributes</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_no_declaration">format_no_declaration</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_no_empty_element_tags">format_no_empty_element_tags</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_no_escapes">format_no_escapes</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_raw">format_raw</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_save_file_text">format_save_file_text</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_skip_control_chars">format_skip_control_chars</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#format_write_bom">format_write_bom</a><font></font>
<font></font>
<span class="tok-c1">// Parsing options bit flags:</span>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_cdata">parse_cdata</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_comments">parse_comments</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_declaration">parse_declaration</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_default">parse_default</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_doctype">parse_doctype</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_eol">parse_eol</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_escapes">parse_escapes</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_fragment">parse_fragment</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_full">parse_full</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_minimal">parse_minimal</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_pi">parse_pi</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_trim_pcdata">parse_trim_pcdata</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_ws_pcdata">parse_ws_pcdata</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_ws_pcdata_single">parse_ws_pcdata_single</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_embed_pcdata">parse_embed_pcdata</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_wconv_attribute">parse_wconv_attribute</a>
<span class="tok-k">const</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#parse_wnorm_attribute">parse_wnorm_attribute</a></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apiref.classes"><a class="anchor" href="https://pugixml.org/docs/manual.html#apiref.classes"></a><a class="link" href="https://pugixml.org/docs/manual.html#apiref.classes"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.5。</font><font style="vertical-align: inherit;">班级</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute">xml_attribute</a>
    <a href="https://pugixml.org/docs/manual.html#xml_attribute::ctor">xml_attribute</a><span class="tok-p">();</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::empty">empty</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">operator</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::unspecified_bool_type">unspecified_bool_type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::comparison">operator==</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::comparison">operator!=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::comparison">operator&lt;</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::comparison">operator&gt;</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::comparison">operator&lt;=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::comparison">operator&gt;=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">size_t</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::hash_value">hash_value</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::next_attribute">next_attribute</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::previous_attribute">previous_attribute</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::name">name</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::value">value</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::as_string">as_string</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-s">""</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::as_int">as_int</a><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::as_uint">as_uint</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">double</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::as_double">as_double</a><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">float</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::as_float">as_float</a><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::as_bool">as_bool</a><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">long</span> <span class="tok-kt">long</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::as_llong">as_llong</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::as_ullong">as_ullong</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_name">set_name</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::set_value">set_value</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute::assign">operator=</a><span class="tok-p">(</span><span class="tok-n">unsnigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_node">xml_node</a>
    <a href="https://pugixml.org/docs/manual.html#xml_node::ctor">xml_node</a><span class="tok-p">();</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::empty">empty</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">operator</span> <a href="https://pugixml.org/docs/manual.html#xml_node::unspecified_bool_type">unspecified_bool_type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::comparison">operator==</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::comparison">operator!=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::comparison">operator&lt;</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::comparison">operator&gt;</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::comparison">operator&lt;=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::comparison">operator&gt;=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">r</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">size_t</span> <a href="https://pugixml.org/docs/manual.html#xml_node::hash_value">hash_value</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xml_node_type</span> <a href="https://pugixml.org/docs/manual.html#xml_node::type">type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_node::name">name</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_node::value">value</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::parent">parent</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::first_child">first_child</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::last_child">last_child</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::next_sibling">next_sibling</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::previous_sibling">previous_sibling</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::first_attribute">first_attribute</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::last_attribute">last_attribute</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">implementation</span><span class="tok-o">-</span><span class="tok-n">defined</span><span class="tok-o">-</span><span class="tok-n">type</span> <a href="https://pugixml.org/docs/manual.html#xml_node::children">children</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">implementation</span><span class="tok-o">-</span><span class="tok-n">defined</span><span class="tok-o">-</span><span class="tok-n">type</span> <a href="https://pugixml.org/docs/manual.html#xml_node::children">children</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">implementation</span><span class="tok-o">-</span><span class="tok-n">defined</span><span class="tok-o">-</span><span class="tok-n">type</span> <a href="https://pugixml.org/docs/manual.html#xml_node::attributes">attributes</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::child">child</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::attribute">attribute</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::next_sibling_name">next_sibling</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::previous_sibling_name">previous_sibling</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::find_child_by_attribute">find_child_by_attribute</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">attr_name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">attr_value</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::find_child_by_attribute">find_child_by_attribute</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">attr_name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">attr_value</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_node::child_value">child_value</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_node::child_value">child_value</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_text</span> <a href="https://pugixml.org/docs/manual.html#xml_node::text">text</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">typedef</span> <span class="tok-n">xml_node_iterator</span> <a href="https://pugixml.org/docs/manual.html#xml_node_iterator">iterator</a><span class="tok-p">;</span>
    <span class="tok-n">iterator</span> <a href="https://pugixml.org/docs/manual.html#xml_node::begin">begin</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">iterator</span> <a href="https://pugixml.org/docs/manual.html#xml_node::end">end</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">typedef</span> <span class="tok-n">xml_attribute_iterator</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute_iterator">attribute_iterator</a><span class="tok-p">;</span>
    <span class="tok-n">attribute_iterator</span> <a href="https://pugixml.org/docs/manual.html#xml_node::attributes_begin">attributes_begin</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">attribute_iterator</span> <a href="https://pugixml.org/docs/manual.html#xml_node::attributes_end">attributes_end</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::traverse">traverse</a><span class="tok-p">(</span><span class="tok-n">xml_tree_walker</span><span class="tok-o">&amp;</span> <span class="tok-n">walker</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Predicate</span><span class="tok-o">&gt;</span> <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::find_attribute">find_attribute</a><span class="tok-p">(</span><span class="tok-n">Predicate</span> <span class="tok-n">pred</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Predicate</span><span class="tok-o">&gt;</span> <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::find_child">find_child</a><span class="tok-p">(</span><span class="tok-n">Predicate</span> <span class="tok-n">pred</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">template</span> <span class="tok-o">&lt;</span><span class="tok-k">typename</span> <span class="tok-n">Predicate</span><span class="tok-o">&gt;</span> <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::find_node">find_node</a><span class="tok-p">(</span><span class="tok-n">Predicate</span> <span class="tok-n">pred</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">string_t</span> <a href="https://pugixml.org/docs/manual.html#xml_node::path">path</a><span class="tok-p">(</span><span class="tok-n">char_t</span> <span class="tok-n">delimiter</span> <span class="tok-o">=</span> <span class="tok-sc">'/'</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::first_element_by_path">xml_node::first_element_by_path</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-n">char_t</span> <span class="tok-n">delimiter</span> <span class="tok-o">=</span> <span class="tok-sc">'/'</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::root">root</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">ptrdiff_t</span> <a href="https://pugixml.org/docs/manual.html#xml_node::offset_debug">offset_debug</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::set_name">set_name</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::set_value">set_value</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::append_attribute">append_attribute</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::prepend_attribute">prepend_attribute</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_attribute_after">insert_attribute_after</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attr</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_attribute_before">insert_attribute_before</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attr</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::append_child">append_child</a><span class="tok-p">(</span><span class="tok-n">xml_node_type</span> <span class="tok-n">type</span> <span class="tok-o">=</span> <span class="tok-n">node_element</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::prepend_child">prepend_child</a><span class="tok-p">(</span><span class="tok-n">xml_node_type</span> <span class="tok-n">type</span> <span class="tok-o">=</span> <span class="tok-n">node_element</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_child_after">insert_child_after</a><span class="tok-p">(</span><span class="tok-n">xml_node_type</span> <span class="tok-n">type</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_child_before">insert_child_before</a><span class="tok-p">(</span><span class="tok-n">xml_node_type</span> <span class="tok-n">type</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::append_child">append_child</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::prepend_child">prepend_child</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_child_after">insert_child_after</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_child_before">insert_child_before</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::append_copy">append_copy</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::prepend_copy">prepend_copy</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_copy_after">insert_copy_after</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attr</span><span class="tok-p">);</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_copy_before">insert_copy_before</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attr</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::append_copy">append_copy</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::prepend_copy">prepend_copy</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_copy_after">insert_copy_after</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_copy_before">insert_copy_before</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::append_move">append_move</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">moved</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::prepend_move">prepend_move</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">moved</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_move_after">insert_move_after</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">moved</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::insert_move_before">insert_move_before</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">moved</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::remove_attribute">remove_attribute</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">a</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::remove_attribute">remove_attribute</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::remove_child">remove_child</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_node::remove_child">remove_child</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_node::append_buffer">append_buffer</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_node::print">print</a><span class="tok-p">(</span><span class="tok-n">xml_writer</span><span class="tok-o">&amp;</span> <span class="tok-n">writer</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">depth</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_node::print_stream">print</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">ostream</span><span class="tok-o">&amp;</span> <span class="tok-n">os</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">depth</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_node::print_stream">print</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wostream</span><span class="tok-o">&amp;</span> <span class="tok-n">os</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">depth</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xpath_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::select_node">select_node</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xpath_node</span> <a href="https://pugixml.org/docs/manual.html#xml_node::select_node_precomp">select_node</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_query</span><span class="tok-o">&amp;</span> <span class="tok-n">query</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xpath_node_set</span> <a href="https://pugixml.org/docs/manual.html#xml_node::select_nodes">select_nodes</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xpath_node_set</span> <a href="https://pugixml.org/docs/manual.html#xml_node::select_nodes_precomp">select_nodes</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_query</span><span class="tok-o">&amp;</span> <span class="tok-n">query</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_document">xml_document</a>
    <a href="https://pugixml.org/docs/manual.html#xml_document::ctor">xml_document</a><span class="tok-p">();</span>
    <span class="tok-o">~</span><a href="https://pugixml.org/docs/manual.html#xml_document::dtor">xml_document</a><span class="tok-p">();</span><font></font>
<font></font>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_document::reset">reset</a><span class="tok-p">();</span>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_document::reset">reset</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_document</span><span class="tok-o">&amp;</span> <span class="tok-n">proto</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_document::load_stream">load</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">istream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_document::load_stream">load</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wistream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_document::load_string">load_string</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_document::load_file">load_file</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_document::load_file_wide">load_file</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">wchar_t</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_document::load_buffer">load_buffer</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_document::load_buffer_inplace">load_buffer_inplace</a><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span>
    <span class="tok-n">xml_parse_result</span> <a href="https://pugixml.org/docs/manual.html#xml_document::load_buffer_inplace_own">load_buffer_inplace_own</a><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">contents</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">options</span> <span class="tok-o">=</span> <span class="tok-n">parse_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_document::save_file">save_file</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_document::save_file_wide">save_file</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">wchar_t</span><span class="tok-o">*</span> <span class="tok-n">path</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_document::save_stream">save</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">ostream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_document::save_stream">save</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wostream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_document::save">save</a><span class="tok-p">(</span><span class="tok-n">xml_writer</span><span class="tok-o">&amp;</span> <span class="tok-n">writer</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">indent</span> <span class="tok-o">=</span> <span class="tok-s">"</span><span class="tok-se">\t</span><span class="tok-s">"</span><span class="tok-p">,</span> <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">flags</span> <span class="tok-o">=</span> <span class="tok-n">format_default</span><span class="tok-p">,</span> <span class="tok-n">xml_encoding</span> <span class="tok-n">encoding</span> <span class="tok-o">=</span> <span class="tok-n">encoding_auto</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_document::document_element">document_element</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">struct</span> <a href="https://pugixml.org/docs/manual.html#xml_parse_result">xml_parse_result</a>
    <span class="tok-n">xml_parse_status</span> <a href="https://pugixml.org/docs/manual.html#xml_parse_result::status">status</a><span class="tok-p">;</span>
    <span class="tok-kt">ptrdiff_t</span> <a href="https://pugixml.org/docs/manual.html#xml_parse_result::offset">offset</a><span class="tok-p">;</span>
    <span class="tok-n">xml_encoding</span> <a href="https://pugixml.org/docs/manual.html#xml_parse_result::encoding">encoding</a><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">operator</span> <a href="https://pugixml.org/docs/manual.html#xml_parse_result::bool">bool</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_parse_result::description">description</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_node_iterator">xml_node_iterator</a>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_attribute_iterator">xml_attribute_iterator</a><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_tree_walker">xml_tree_walker</a>
    <span class="tok-k">virtual</span> <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_tree_walker::begin">begin</a><span class="tok-p">(</span><span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_tree_walker::for_each">for_each</a><span class="tok-p">(</span><span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span>
    <span class="tok-k">virtual</span> <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_tree_walker::end">end</a><span class="tok-p">(</span><span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#xml_tree_walker::depth">depth</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_text">xml_text</a>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::empty">empty</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">operator</span> <a href="https://pugixml.org/docs/manual.html#xml_text::unspecified_bool_type">xml_text::unspecified_bool_type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_text::get">xml_text::get</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xml_text::as_string">as_string</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-s">""</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#xml_text::as_int">as_int</a><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <a href="https://pugixml.org/docs/manual.html#xml_text::as_uint">as_uint</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">double</span> <a href="https://pugixml.org/docs/manual.html#xml_text::as_double">as_double</a><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">float</span> <a href="https://pugixml.org/docs/manual.html#xml_text::as_float">as_float</a><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::as_bool">as_bool</a><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">long</span> <span class="tok-kt">long</span> <a href="https://pugixml.org/docs/manual.html#xml_text::as_llong">as_llong</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <a href="https://pugixml.org/docs/manual.html#xml_text::as_ullong">as_ullong</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">def</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xml_text::set">set</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">int</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">float</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span>
    <span class="tok-n">xml_text</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xml_text::assign">operator=</a><span class="tok-p">(</span><span class="tok-kt">unsigned</span> <span class="tok-kt">long</span> <span class="tok-kt">long</span> <span class="tok-n">rhs</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xml_text::data">data</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_writer">xml_writer</a>
    <span class="tok-k">virtual</span> <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xml_writer::write">write</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">data</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">size</span><span class="tok-p">)</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_writer_file">xml_writer_file</a><span class="tok-o">:</span> <span class="tok-k">public</span> <span class="tok-n">xml_writer</span>
    <a href="https://pugixml.org/docs/manual.html#xml_writer_file">xml_writer_file</a><span class="tok-p">(</span><span class="tok-kt">void</span><span class="tok-o">*</span> <span class="tok-n">file</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xml_writer_stream">xml_writer_stream</a><span class="tok-o">:</span> <span class="tok-k">public</span> <span class="tok-n">xml_writer</span>
    <a href="https://pugixml.org/docs/manual.html#xml_writer_stream">xml_writer_stream</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">ostream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">);</span>
    <a href="https://pugixml.org/docs/manual.html#xml_writer_stream">xml_writer_stream</a><span class="tok-p">(</span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wostream</span><span class="tok-o">&amp;</span> <span class="tok-n">stream</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-k">struct</span> <a href="https://pugixml.org/docs/manual.html#xpath_parse_result">xpath_parse_result</a>
    <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_parse_result::error">error</a><span class="tok-p">;</span>
    <span class="tok-kt">ptrdiff_t</span> <a href="https://pugixml.org/docs/manual.html#xpath_parse_result::offset">offset</a><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">operator</span> <a href="https://pugixml.org/docs/manual.html#xpath_parse_result::bool">bool</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_parse_result::description">description</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xpath_query">xpath_query</a>
    <span class="tok-k">explicit</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::ctor">xpath_query</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">query</span><span class="tok-p">,</span> <span class="tok-n">xpath_variable_set</span><span class="tok-o">*</span> <span class="tok-n">variables</span> <span class="tok-o">=</span> <span class="tok-mi">0</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::evaluate_boolean">evaluate_boolean</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">double</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::evaluate_number">evaluate_number</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">string_t</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::evaluate_string">evaluate_string</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">size_t</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::evaluate_string_buffer">evaluate_string</a><span class="tok-p">(</span><span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">buffer</span><span class="tok-p">,</span> <span class="tok-kt">size_t</span> <span class="tok-n">capacity</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xpath_node_set</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::evaluate_node_set">evaluate_node_set</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xpath_node</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::evaluate_node">evaluate_node</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xpath_value_type</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::return_type">return_type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">xpath_parse_result</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::result">result</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">operator</span> <a href="https://pugixml.org/docs/manual.html#xpath_query::unspecified_bool_type">unspecified_bool_type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xpath_exception">xpath_exception</a><span class="tok-o">:</span> <span class="tok-k">public</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">exception</span>
    <span class="tok-k">virtual</span> <span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_exception::what">what</a><span class="tok-p">()</span> <span class="tok-k">const</span> <span class="tok-k">throw</span><span class="tok-p">();</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">xpath_parse_result</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xpath_exception::result">result</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xpath_node">xpath_node</a>
    <a href="https://pugixml.org/docs/manual.html#xpath_node::ctor">xpath_node</a><span class="tok-p">();</span>
    <a href="https://pugixml.org/docs/manual.html#xpath_node::ctor">xpath_node</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">node</span><span class="tok-p">);</span>
    <a href="https://pugixml.org/docs/manual.html#xpath_node::ctor">xpath_node</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xml_attribute</span><span class="tok-o">&amp;</span> <span class="tok-n">attribute</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xml_node</span><span class="tok-o">&amp;</span> <span class="tok-n">parent</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xpath_node::node">node</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_attribute</span> <a href="https://pugixml.org/docs/manual.html#xpath_node::attribute">attribute</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xml_node</span> <a href="https://pugixml.org/docs/manual.html#xpath_node::parent">parent</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">operator</span> <a href="https://pugixml.org/docs/manual.html#xpath_node::unspecified_bool_type">unspecified_bool_type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_node::comparison">operator==</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_node::comparison">operator!=</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <span class="tok-n">n</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set">xpath_node_set</a>
    <a href="https://pugixml.org/docs/manual.html#xpath_node_set::ctor">xpath_node_set</a><span class="tok-p">();</span>
    <a href="https://pugixml.org/docs/manual.html#xpath_node_set::ctor">xpath_node_set</a><span class="tok-p">(</span><span class="tok-n">const_iterator</span> <span class="tok-n">begin</span><span class="tok-p">,</span> <span class="tok-n">const_iterator</span> <span class="tok-n">end</span><span class="tok-p">,</span> <span class="tok-n">type_t</span> <span class="tok-n">type</span> <span class="tok-o">=</span> <span class="tok-n">type_unsorted</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-k">typedef</span> <span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::const_iterator">const_iterator</a><span class="tok-p">;</span>
    <span class="tok-n">const_iterator</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::begin">begin</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">const_iterator</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::end">end</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">const</span> <span class="tok-n">xpath_node</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::index">operator[</a><span class="tok-p">](</span><span class="tok-kt">size_t</span> <span class="tok-n">index</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">size_t</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::size">size</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::empty">empty</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-n">xpath_node</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::first">first</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-k">enum</span> <span class="tok-n">type_t</span> <span class="tok-p">{</span><a href="https://pugixml.org/docs/manual.html#xpath_node_set::type_unsorted">type_unsorted</a><span class="tok-p">,</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::type_sorted">type_sorted</a><span class="tok-p">,</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::type_sorted_reverse">type_sorted_reverse</a><span class="tok-p">};</span>
    <span class="tok-n">type_t</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::type">type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#xpath_node_set::sort">sort</a><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">reverse</span> <span class="tok-o">=</span> <span class="tok-nb">false</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable">xpath_variable</a>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::name">name</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-n">xpath_value_type</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::type">type</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::get_boolean">get_boolean</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-kt">double</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::get_number">get_number</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::get_string">get_string</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span>
    <span class="tok-k">const</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">&amp;</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::get_node_set">get_node_set</a><span class="tok-p">()</span> <span class="tok-k">const</span><span class="tok-p">;</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::set">set</a><span class="tok-p">(</span><span class="tok-kt">bool</span> <span class="tok-n">value</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::set">set</a><span class="tok-p">(</span><span class="tok-kt">double</span> <span class="tok-n">value</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::set">set</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">value</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable::set">set</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">&amp;</span> <span class="tok-n">value</span><span class="tok-p">);</span><font></font>
<font></font>
<span class="tok-k">class</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable_set">xpath_variable_set</a>
    <span class="tok-n">xpath_variable</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable_set::add">add</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-n">xpath_value_type</span> <span class="tok-n">type</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable_set::set">set</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-kt">bool</span> <span class="tok-n">value</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable_set::set">set</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-kt">double</span> <span class="tok-n">value</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable_set::set">set</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">value</span><span class="tok-p">);</span>
    <span class="tok-kt">bool</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable_set::set">set</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">,</span> <span class="tok-k">const</span> <span class="tok-n">xpath_node_set</span><span class="tok-o">&amp;</span> <span class="tok-n">value</span><span class="tok-p">);</span><font></font>
<font></font>
    <span class="tok-n">xpath_variable</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable_set::get">get</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">);</span>
    <span class="tok-k">const</span> <span class="tok-n">xpath_variable</span><span class="tok-o">*</span> <a href="https://pugixml.org/docs/manual.html#xpath_variable_set::get">get</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">char_t</span><span class="tok-o">*</span> <span class="tok-n">name</span><span class="tok-p">)</span> <span class="tok-k">const</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apiref.functions"><a class="anchor" href="https://pugixml.org/docs/manual.html#apiref.functions"></a><a class="link" href="https://pugixml.org/docs/manual.html#apiref.functions"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">10.6。</font><font style="vertical-align: inherit;">功能</font></font></a></h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c++"><span></span><span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <a href="https://pugixml.org/docs/manual.html#as_utf8">as_utf8</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">wchar_t</span><span class="tok-o">*</span> <span class="tok-n">str</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span> <a href="https://pugixml.org/docs/manual.html#as_utf8">as_utf8</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wstring</span><span class="tok-o">&amp;</span> <span class="tok-n">str</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wstring</span> <a href="https://pugixml.org/docs/manual.html#as_wide">as_wide</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-kt">char</span><span class="tok-o">*</span> <span class="tok-n">str</span><span class="tok-p">);</span>
<span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">wstring</span> <a href="https://pugixml.org/docs/manual.html#as_wide">as_wide</a><span class="tok-p">(</span><span class="tok-k">const</span> <span class="tok-n">std</span><span class="tok-o">::</span><span class="tok-n">string</span><span class="tok-o">&amp;</span> <span class="tok-n">str</span><span class="tok-p">);</span>
<span class="tok-kt">void</span> <a href="https://pugixml.org/docs/manual.html#set_memory_management_functions">set_memory_management_functions</a><span class="tok-p">(</span><span class="tok-n">allocation_function</span> <span class="tok-n">allocate</span><span class="tok-p">,</span> <span class="tok-n">deallocation_function</span> <span class="tok-n">deallocate</span><span class="tok-p">);</span>
<span class="tok-n">allocation_function</span> <a href="https://pugixml.org/docs/manual.html#get_memory_allocation_function">get_memory_allocation_function</a><span class="tok-p">();</span>
<span class="tok-n">deallocation_function</span> <a href="https://pugixml.org/docs/manual.html#get_memory_deallocation_function">get_memory_deallocation_function</a><span class="tok-p">();</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="https://pugixml.org/docs/manual.html#_footnoteref_1"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">所使用的所有商标均为其各自所有者的财产。
</font></font></div>
</div>
<div id="footer">
<div id="footer-text"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
最后更新时间2019-09-11 21:49:43 -0700
</font></font></div>
</div><div id="goog-gt-tt" class="goog-tooltip skiptranslate" dir="ltr" style="visibility: hidden; left: 869px; top: 81485px; display: none;"><div style="padding: 8px;"><div><div class="logo"><img src="./pugixml 1.10手册_files/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text">it never returns the null pointer, so you can safely use even if query parsing succeeded.</div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none; opacity: 0;"></div></div>

<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div><iframe frameborder="0" class="goog-te-menu-frame skiptranslate" title="语言翻译微件" style="visibility: visible; box-sizing: content-box; width: 978px; height: 300px; display: none;" src="./pugixml 1.10手册_files/saved_resource(1).html"></iframe><iframe frameborder="0" class="goog-te-menu-frame skiptranslate" title="语言翻译微件" style="visibility: visible; box-sizing: content-box; width: 138px; height: 76px; display: none;" src="./pugixml 1.10手册_files/saved_resource(2).html"></iframe></body></html>